{"version":3,"sources":["utils/index.ts","components/Chat/Chat.module.css","utils/generateName.ts","components/UserMenu/UserMenu.tsx","components/Chat/Chat.tsx","components/Modal/LoginModal.tsx","components/Modal/SubscribeModal.tsx","components/SubscribeButton/SubscribeButton.tsx","components/Modal/ProfileModal.tsx","components/TopBar/TopBar.tsx","components/VBrowser/data.ts","components/VBrowser/events.ts","components/VBrowser/base.ts","components/VBrowser/VBrowser.tsx","components/VBrowser/index.ts","components/VideoChat/VideoChat.tsx","components/Settings/LocalSettings.tsx","components/Modal/MultiStreamModal.tsx","utils/examples.ts","components/Playlist/ChatVideoCard.tsx","components/ComboBox/ComboBox.tsx","components/SearchResult/SearchResult.tsx","components/SearchComponent/SearchComponent.tsx","components/Controls/Controls.tsx","components/Modal/VBrowserModal.tsx","components/Modal/PermanentRoomModal.tsx","components/Settings/SettingsTab.tsx","components/Modal/ErrorModal.tsx","components/Modal/PasswordModal.tsx","components/Modal/ScreenShareModal.tsx","components/Modal/FileShareModal.tsx","components/Modal/SubtitleModal.tsx","components/App/App.tsx","components/Home/Home.tsx","components/PrivacyTerms/PrivacyTerms.tsx","components/Footer/Footer.tsx","serviceWorker.js","index.tsx","components/Home/Home.module.css","components/Playlist/ChatVideoCard.module.css"],"names":["formatTimestamp","input","undefined","Number","isNaN","Infinity","hours","Math","floor","minutes","toString","padStart","seconds","formatSpeed","toFixed","colorMappings","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black","colorCache","getColorForString","id","colors","abs","hash","i","length","charCodeAt","hashString","getColorForStringHex","getMediaType","startsWith","testAutoplay","a","canAutoplay","video","result","decodeEntities","DOMParser","parseFromString","documentElement","textContent","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getMediaPathForList","list","match","name","decoded","decodeURIComponent","getDefaultPicture","background","isMobile","window","screen","width","iceServers","urls","username","credential","serverPath","process","REACT_APP_SERVER_HOST","location","protocol","host","getMediaPathResults","mediaPath","query","fetch","response","results","includes","text","xml","parseStringPromise","data","filtered","ListBucketResult","Contents","filter","file","Key","map","url","json","type","option","toLowerCase","getStreamPathResults","streamPath","encodeURIComponent","getYouTubeResults","openFileSelector","accept","Promise","resolve","inputElement","document","createElement","addEventListener","files","dispatchEvent","MouseEvent","getAndSaveClientId","clientId","localStorage","getItem","uuidv4","setItem","calculateMedian","array","sort","b","getUserImage","user","email","md5","gravatar","ok","photoURL","module","exports","capFirst","string","charAt","toUpperCase","slice","getRandomInt","min","max","random","generateName","name1","name2","UserMenu","socket","userToManage","trigger","displayName","position","disabled","timestamp","isChatMessage","useState","isOpen","setIsOpen","Popup","className","on","open","onOpen","onClose","Button","Group","vertical","labeled","icon","content","negative","onClick","getIdToken","token","emit","userToBeKicked","uid","author","Chat","state","chatMsg","isNearBottom","isPickerOpen","messagesRef","React","createRef","updateChatMsg","_e","setState","value","sendChatMsg","chatTooLong","props","Boolean","onScroll","isChatNearBottom","current","scrollHeight","scrollTop","offsetHeight","scrollToBottom","formatMessage","cmd","msg","Fragment","style","textTransform","getMediaDisplayName","addEmoji","emoji","native","prevProps","scrollTimestamp","hide","display","flexDirection","flexGrow","minHeight","marginTop","marginBottom","padding","ref","Comment","chat","message","pictureMap","nameMap","owner","size","bottom","margin","PickerMenu","closeMenu","Input","inverted","fluid","onKeyPress","e","key","onChange","error","isChatDisabled","placeholder","Icon","circular","link","opacity","role","Component","ChatMessage","system","isSub","Avatar","classes","subscriber","src","Content","Author","as","Metadata","Date","toLocaleTimeString","Text","PickerMenuInner","handleClickOutside","set","sheetSize","theme","showPreview","showSkinTones","onSelect","onClickOutside","LoginModal","password","isCreateMode","resetPassword","firebase","auth","sendPasswordResetEmail","closeLogin","emailSignIn","signInWithEmailAndPassword","createAccount","createUserWithEmailAndPassword","emailLinkSignIn","sendSignInLinkToEmail","href","handleCodeInApp","Modal","Header","Message","color","header","Form","Field","target","stripePromise","loadStripe","SubscribeModal","onSubscribe","console","warn","stripe","redirectToCheckout","lineItems","price","quantity","mode","successUrl","cancelUrl","customerEmail","clientReferenceId","isSubscriber","closeSubscribe","image","Description","Table","definition","unstackable","striped","celled","Row","HeaderCell","Body","Cell","textAlign","labelPosition","SubscribeButton","isCustomer","isSubscribeModalOpen","setIsSubscribeModalOpen","onManage","useCallback","JSON","return_url","stringify","method","headers","body","resp","session","log","assign","ProfileModal","resetDisabled","deleteConfirmOpen","onSignOut","signOut","reload","verifyEmail","sendEmailVerification","deleteAccountConfirm","deleteAccount","close","userImage","Actions","positive","Image","avatar","emailVerified","marginLeft","title","alignItems","gap","NewRoomButton","createRoom","openNewTab","SignInButton","isLoginOpen","isProfileOpen","facebookSignIn","provider","FacebookAuthProvider","signInWithPopup","googleSignIn","GoogleAuthProvider","cursor","basic","Dropdown","height","button","Menu","Item","ListRoomsButton","rooms","refreshRooms","axios","get","deleteRoom","roomId","delete","room","scrolling","vanity","replace","paddingLeft","stopPropagation","nativeEvent","stopImmediatePropagation","preventDefault","TopBar","subscribeButton","flexWrap","paddingBottom","marginRight","borderRadius","backgroundColor","top","fontWeight","fontSize","lineHeight","rel","hideNewRoom","hideMyRooms","hideSignin","OPCODE","EVENT","DISCONNECT","ANSWER","PROVIDE","LOCKED","RELEASE","REQUEST","REQUESTING","CLIPBOARD","GIVE","CONFIGURATIONS","RESOLUTION","SET","BAN","KICK","LOCK","UNLOCK","MUTE","UNMUTE","CONTROL","BaseClient","_ws","_peer","_channel","_timeout","_displayname","_state","_id","RTCPeerConnection","prototype","addTransceiver","readyState","WebSocket","OPEN","peerConnected","socketOpen","displayname","supported","Error","onmessage","onMessage","bind","onerror","event","onError","onclose","onDisconnected","onTimeout","err","connected","buffer","payload","ArrayBuffer","DataView","setUint8","setUint16","x","y","setInt16","send","sdp","lite","servers","onconnectionstatechange","connectionState","onsignalingstatechange","signalingState","oniceconnectionstatechange","iceConnectionState","onConnected","ontrack","onTrack","direction","createDataChannel","onData","setRemoteDescription","createAnswer","then","d","setLocalDescription","catch","parse","ice","createPeer","track","kind","streams","label","reason","disconnect","EventEmitter","VBrowser","focused","fullscreen","activeKeys","Set","controlling","scroll","scroll_invert","rate","keepAliveInterval","_container","_overlay","_video","$client","NekoClient","takeControl","sendMessage","once","changeResolution","resString","split","onFocus","navigator","clipboard","readText","onBlur","forEach","sendData","onContextMenu","onMousePos","w","h","rect","getBoundingClientRect","round","clientX","left","clientY","onWheel","deltaX","deltaY","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","focus","onMouseLeave","blur","getCode","keyCode","onKeyDown","add","onKeyUp","onResize","setInterval","login","setResolution","stream","getElementById","srcObject","getTracks","audio","MediaStream","play","doPlay","onClipboardChanged","hostname","passive","resolution","clearInterval","removeAllListeners","logout","writeText","justifyContent","playsInline","tabIndex","clientWidth","clientHeight","scrollbarWidth","connect","configurations","VideoChat","handleSignal","from","pc","watchparty","videoPCs","addIceCandidate","RTCIceCandidate","RTCSessionDescription","answer","sendSignal","localDescription","setupWebRTC","canvas","Object","getContext","fillRect","captureStream","getVideoTracks","enabled","mediaDevices","getUserMedia","ourStream","stopWebRTC","stop","keys","toggleVideoWebRTC","forceUpdate","getVideoWebRTC","toggleAudioWebRTC","getAudioTracks","getAudioWebRTC","updateWebRTC","videoRefs","participants","isVideoChat","addTrack","onicecandidate","candidate","onnegotiationneeded","createOffer","offer","to","off","rosterUpdateTS","tsMap","videoChatContentStyle","objectFit","overflow","p","right","visibility","el","transform","autoPlay","muted","alt","backdropFilter","textOverflow","whiteSpace","getCurrentSettings","setting","settings","validateSettingsString","settingObject","updateSettings","newSetting","MultiStreamModal","setMedia","resetMultiSelect","closeIcon","Loader","List","toLocaleString","examples","duration","ChatVideoCard","index","controls","onPlay","onPlayNext","onRemove","onSetMedia","onPlaylistAdd","isYoutube","handlePlayClick","handlePlayNextClick","handleRemoveClick","Card","Wrapper","ThumbnailWrapper","DurationLabel","img","Thumbnail","Title","ChannelName","channel","Controls","ButtonGroup","ComboBox","inputMedia","loading","lastResultTimestamp","debounced","setMediaAndClose","doSearch","persist","items","playlistAdd","currentMedia","select","playlist","item","maxWidth","playlistDelete","playlistMove","maxHeight","zIndex","YouTubeSearchResult","MediaPathSearchResult","StreamPathSearchResult","launchMultiSelect","magnet","metadata","multiStreamSelection","localeCompare","Label","empty","seeders","SearchComponent","resetDropdown","search","onSearchChange","showTimestamp","currTimestamp","posTimestamp","volume","onMouseOver","onMouseOut","pct","togglePlay","onSeek","fullScreen","toggleMute","toggleSubtitle","jumpToLeader","currentTime","leaderTime","isPauseDisabled","subtitled","paused","isBehind","Progress","minWidth","total","pointerEvents","pointing","step","setVolume","VBrowserModal","isVMPoolFull","region","regionPlus","HetznerUS","closeModal","startVBrowser","LaunchButton","withGoogleReCaptcha","googleReCaptchaProps","large","executeRecaptcha","rcToken","vmPoolFullMessage","options","reCaptchaKey","useRecaptchaNet","beta","selection","PermanentRoomModal","SettingsTab","roomLock","setRoomLock","setVanity","roomLink","setPassword","setIsChatDisabled","clearChat","updateTS","setUpdateTS","permModalOpen","setPermModalOpen","validVanity","setValidVanity","validVanityLoading","setValidVanityLoading","adminSettingsChanged","setAdminSettingsChanged","setRoomState","setRoomOwner","checkValidVanity","lockDisabled","permanentDisabled","description","checked","helpIcon","undo","subOnly","origin","action","primary","disableChatSound","SettingRow","Divider","horizontal","Radio","toggle","ErrorModal","PasswordModal","savedPasswords","ScreenShareModal","startScreenShare","FileShareModal","startFileShare","SubtitleModal","searchResults","uploadSubtitle","reader","FileReader","subData","readAsText","currentSubtitle","float","haveLock","Grid","columns","Column","SubFileName","SubDownloadLink","App","currentMediaPaused","myName","myPicture","unreadCount","controlsTimestamp","watchOptions","isScreenSharing","isScreenSharingFile","isVBrowser","isYouTubeReady","isAutoPlayable","downloaded","speed","connections","isErrorAuth","vBrowserResolution","isVBrowserLarge","nonPlayableMedia","currentTab","querystring","substring","tab","isVBrowserModalOpen","isScreenShareModalOpen","isFileShareModalOpen","isSubtitleModalOpen","controller","errorMessage","successMessage","showRightBar","watchPartyYTPlayer","ytDebounce","screenShareStream","screenHostPC","screenSharePC","progressUpdater","heartbeat","getRoomLink","handleRoomState","setOwner","setRoomLink","history","replaceState","loadSettings","customSettingsData","customSettings","loadSignInData","firstName","updateName","updatePicture","updateUid","loadYouTube","tag","append","onYouTubeIframeAPIReady","ytPlayer","YT","Player","events","onReady","isYouTube","onStateChange","PlayerState","CUED","ENDED","onVideoEnded","PLAYING","PAUSED","doPause","init","join","savedPasswordsString","shard","test","exec","io","transports","userName","success","doSeek","loadSubtitles","isScreenShare","stopScreenShare","isFileShare","stopVBrowser","subtitle","getVBrowserHost","setLoadingFalse","leftVideo","pause","stopVideo","doSrc","videoTS","visibilityState","Audio","push","syncSubtitle","updateScreenShare","sharer","_sdp","line","trim","sendSignalSS","getCurrentTime","setupFileShare","URL","createObjectURL","onaddtrack","onended","setupScreenShare","getDisplayMedia","logicalSurface","autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","values","find","changeController","isVideo","isHttp","getVBrowserPass","getDuration","isMuted","isSubtitled","getOption","languageCode","maxTS","getLeaderTime","time","innerHTML","videoId","altVideoId","cueVideoById","lv","canPlayType","hls","Hls","loadSource","attachMedia","setMute","playVideo","pauseVideo","seekTo","shouldPlay","ended","getPlayerState","onFullScreenChange","fullscreenElement","onKeydown","activeElement","tagName","bVideoOnly","container","requestFullscreen","webkitEnterFullScreen","webkitEnterFullscreen","bChangeElements","exitFullscreen","mute","unMute","getVolume","subtitleSrc","arrayBuffer","toWebVTT","Blob","srclang","appendChild","textTracks","offset","cues","cue","origStart","startTime","origEnd","endTime","setOption","tracks","toIndex","magnetUrl","torrent","decode","getFileName","locked","val","fileIndex","searchParams","onfullscreenchange","onkeydown","removeEventListener","displayRightContent","rightBar","widths","active","stackable","clearable","Dimmer","allowFullScreen","frameBorder","allow","onEnded","Separator","flexShrink","Home","styles","heroText","subText","featureSection","Step","Feature","flex","fitted","featureTitle","featureText","Hero","hero","heroInner","mdStyle","Privacy","Terms","FAQ","Footer","Debug","lazy","firebaseConfig","initializeApp","WatchParty","onAuthStateChanged","StrictMode","path","exact","render","params","fallback","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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uG,EAAKC,MAAQC,IAAIF,EAAKC,OAAS,IACxCD,EAAKC,MALJ,uBAMGE,EANH,0CAMiD1G,EANjD,yBAOoByC,OAAOgB,MAAMiD,GAPjC,kBAQUC,GARV,yCASMD,GATN,WAYDH,EAAKK,SAZJ,0CAaIL,EAAKK,SAAW,yBAbpB,2EAeqC5G,EAfrC,8D,4CCvUP6G,EAAOC,QAAU,CAAC,WAAa,yBAAyB,iBAAmB,iC,qfCD3E,SAASC,EAASC,GAChB,OAAOA,EAAOC,OAAO,GAAGC,cAAgBF,EAAOG,MAAM,GAGvD,SAASC,EAAaC,EAAaC,GACjC,OAAOjJ,KAAKC,MAAMD,KAAKkJ,UAAYD,EAAMD,IAAQA,EAG5C,SAASG,IACd,IAAIC,EAAQ,CACV,YACA,OACA,WACA,WACA,cACA,WACA,aACA,YACA,eACA,WACA,SACA,SACA,YACA,SACA,SACA,QACA,YACA,UACA,aACA,WACA,SACA,WACA,SACA,eACA,OACA,cACA,aACA,QACA,WACA,YACA,YACA,OACA,UACA,WACA,QACA,YACA,QACA,MACA,aACA,UACA,YACA,QACA,SACA,UACA,WACA,UACA,UACA,QACA,YACA,WACA,SACA,UACA,UACA,UACA,MACA,eACA,cACA,MACA,SACA,OACA,WACA,WACA,UACA,UACA,cACA,WACA,WACA,YACA,aACA,UACA,YACA,aACA,YACA,aACA,UACA,QACA,UACA,QACA,UACA,UACA,MACA,OACA,QACA,OACA,SACA,QACA,YACA,UACA,UACA,aACA,SACA,OACA,YACA,MACA,cACA,gBACA,aACA,SACA,QACA,kBACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,QACA,UACA,OACA,OACA,SACA,QACA,OACA,SACA,YACA,QACA,QACA,YACA,QACA,SACA,YACA,QACA,SACA,SACA,QACA,UACA,SACA,QACA,QACA,UACA,aACA,QACA,WACA,OACA,UACA,UACA,cACA,OACA,SACA,SACA,UACA,WACA,UACA,WACA,SACA,WACA,YACA,aACA,WACA,QACA,WACA,SACA,QACA,SACA,SACA,WACA,UACA,QACA,QACA,YACA,SACA,QACA,SACA,SACA,WACA,SACA,YACA,SACA,OACA,WACA,YACA,WACA,cACA,SACA,gBACA,YACA,WACA,UACA,cACA,WACA,YACA,WACA,WACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,cACA,QACA,UACA,SACA,aACA,YACA,SACA,QACA,SACA,WACA,SACA,WACA,QACA,WACA,UACA,UACA,QACA,WACA,SACA,aACA,WACA,aACA,QACA,QACA,OACA,cACA,UACA,OACA,YACA,SACA,SACA,UACA,OACA,WACA,OACA,SACA,YACA,OACA,UACA,SACA,UACA,WACA,OACA,cACA,YACA,UACA,YACA,WACA,aACA,UACA,aACA,YACA,aACA,YACA,YACA,QACA,SACA,aACA,YACA,cACA,WACA,WACA,aACA,UACA,YACA,YACA,UACA,WACA,MACA,UACA,YACA,SACA,aACA,WACA,aACA,aACA,WACA,SACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,UACA,WACA,YACA,QACA,QACA,SACA,SACA,YACA,OACA,SACA,WACA,SACA,SACA,MACA,OACA,OACA,UACA,OACA,QACA,UACA,QACA,OACA,aACA,WACA,SACA,WACA,YACA,UACA,SACA,UACA,WACA,UACA,aACA,aACA,cACA,cACA,UACA,YACA,QACA,YACA,aACA,YACA,cACA,WACA,UACA,SACA,UACA,QACA,aACA,YACA,WACA,UACA,WACA,OACA,YACA,cACA,QACA,OACA,UACA,YACA,YACA,YACA,YACA,UACA,WACA,SACA,YACA,cACA,SACA,aACA,cACA,cACA,cACA,WACA,UACA,QACA,OACA,WACA,OACA,QACA,WACA,SACA,QACA,YACA,MACA,UACA,YACA,UACA,OACA,MACA,QACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,SACA,WACA,MACA,SACA,SACA,OACA,WACA,OACA,QACA,YACA,UACA,QACA,QACA,aACA,SACA,OACA,SACA,WACA,aACA,SACA,WACA,UACA,SACA,QACA,YACA,UACA,OACA,YACA,UACA,WACA,SACA,SACA,WACA,aACA,YACA,WACA,QACA,QACA,SACA,OACA,SACA,QACA,WACA,WACA,aACA,cACA,SACA,SACA,SACA,YACA,QACA,SACA,SACA,SACA,WACA,OACA,WACA,aACA,QACA,QACA,QACA,aACA,UACA,UACA,WACA,SACA,UACA,QACA,QACA,WACA,SACA,SACA,YACA,UACA,QACA,WACA,UACA,aACA,aACA,SACA,WACA,SACA,OACA,SACA,OACA,eACA,WACA,WACA,WACA,QACA,YACA,WACA,WACA,QACA,OACA,QACA,SACA,QACA,aACA,OACA,QACA,WACA,WACA,QACA,YACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,SACA,SACA,WACA,QACA,QACA,OACA,WACA,WACA,QACA,QACA,iBACA,OACA,eACA,UACA,WACA,aACA,QACA,QACA,UACA,WACA,UACA,YACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,OACA,aACA,YACA,SACA,SACA,SACA,SACA,YACA,UACA,UACA,WACA,aACA,MACA,OACA,SACA,cACA,UACA,YACA,SACA,UACA,QACA,OACA,MACA,QACA,aACA,YACA,OACA,UACA,WACA,WACA,MACA,UACA,YACA,eACA,aACA,cACA,YACA,cACA,aACA,aACA,YACA,UACA,cACA,aACA,YACA,YACA,gBACA,SACA,WACA,YACA,aACA,cACA,iBACA,aACA,aACA,SACA,SACA,eACA,eACA,aACA,kBACA,aACA,YACA,gBACA,WACA,WACA,YACA,aACA,WACA,WACA,WACA,WACA,WACA,YACA,gBACA,YACA,cACA,gBACA,cACA,SACA,cACA,cACA,WACA,gBACA,WACA,WACA,gBACA,aACA,QACA,QACA,SACA,aACA,SACA,UACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,QACA,SACA,QACA,WACA,gBACA,OACA,MACA,OACA,cACA,SACA,SACA,SACA,SACA,gBACA,UACA,QACA,QACA,SACA,OACA,QACA,QACA,OACA,UACA,OACA,SACA,SACA,OACA,UACA,OACA,QACA,OACA,QACA,aACA,QACA,eACA,UACA,SACA,UACA,OACA,UACA,SACA,QACA,SACA,SACA,OACA,SACA,QACA,YACA,OACA,SACA,OACA,YACA,QACA,WACA,OACA,OACA,UACA,SACA,SACA,MACA,QACA,QACA,YACA,WACA,QACA,WACA,YACA,MACA,UACA,cACA,WACA,QACA,OACA,UACA,UACA,YACA,YACA,UACA,SACA,SACA,QACA,OACA,SACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,YACA,WACA,QACA,QACA,WACA,OACA,QACA,WACA,YACA,QACA,QACA,YACA,UACA,YACA,QACA,QACA,SACA,SACA,QACA,YACA,UACA,aACA,QACA,YACA,WACA,aACA,cACA,QACA,UACA,eACA,UACA,QACA,QACA,QACA,QACA,aACA,QACA,SACA,QACA,UACA,UACA,WACA,OACA,OACA,YACA,QACA,WACA,YACA,aACA,cACA,UACA,MACA,OACA,OACA,QACA,SACA,QACA,YACA,QACA,UACA,SACA,UACA,QACA,aACA,QACA,UACA,OACA,aACA,QACA,WACA,QACA,SACA,OACA,SACA,UACA,aACA,MACA,UACA,UACA,YACA,WACA,MACA,gBACA,OACA,OACA,UACA,aACA,UACA,SACA,UACA,UACA,SACA,SACA,WACA,WACA,QACA,MACA,WACA,WACA,aACA,aACA,cACA,OACA,aACA,UACA,YACA,aACA,YACA,OACA,SACA,WACA,UACA,UACA,aACA,OACA,SACA,WACA,UACA,UACA,WACA,WACA,QACA,WACA,YACA,QACA,cACA,QACA,QACA,WACA,WACA,OACA,UACA,QACA,YACA,UACA,UACA,WACA,UACA,WACA,QACA,QACA,WACA,SACA,YACA,UACA,YACA,SACA,OACA,UACA,SACA,OACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,UACA,cACA,SACA,WACA,WACA,SACA,UACA,UACA,QACA,WACA,UACA,QACA,WACA,aACA,aACA,UACA,SACA,QACA,UACA,WACA,UACA,OACA,OACA,SACA,QACA,SACA,UACA,WACA,SACA,YACA,cACA,YACA,SACA,YACA,eACA,QACA,eACA,QACA,iBACA,SACA,WACA,YACA,UACA,SACA,QACA,OACA,OACA,MACA,SACA,WACA,cACA,QACA,OACA,YACA,aACA,MACA,aACA,QACA,UACA,WACA,WACA,aACA,aACA,SACA,YACA,WACA,aACA,cACA,YACA,YACA,YACA,OACA,QACA,QACA,SACA,OACA,UACA,SACA,OACA,WACA,SACA,QACA,QACA,QACA,QACA,UACA,UACA,QACA,OACA,QACA,QACA,QACA,MACA,OACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,QACA,SACA,SACA,QACA,UACA,YACA,aACA,WACA,WACA,UACA,SACA,YACA,cACA,SACA,eACA,eACA,UACA,cACA,WACA,SACA,UACA,aACA,UACA,SACA,SACA,UACA,QACA,UACA,WACA,YACA,QACA,aACA,QACA,UACA,WACA,SACA,QACA,aACA,QACA,SACA,MACA,OACA,SACA,QACA,QACA,SACA,UACA,SACA,aACA,SACA,SACA,WACA,WACA,SACA,SACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,QACA,SACA,SACA,OACA,SACA,WACA,SACA,YACA,SACA,WACA,OACA,QACA,QACA,SACA,OACA,YACA,gBACA,OACA,YACA,UACA,QACA,OACA,UACA,YACA,SACA,WACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,UACA,OACA,SACA,UACA,WACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,QACA,cACA,SACA,SACA,WACA,UACA,QACA,SACA,WACA,WACA,UACA,SACA,WACA,WACA,aACA,SACA,SACA,UACA,UACA,aACA,cACA,SACA,WACA,SACA,SACA,QACA,QACA,SACA,cACA,WACA,aACA,cACA,YACA,aACA,SACA,SACA,QACA,aACA,QACA,cACA,OACA,YACA,OACA,MACA,WACA,OACA,QACA,WACA,OACA,UACA,UACA,WACA,SACA,QACA,QACA,WACA,WACA,QACA,WACA,OACA,QACA,QACA,OACA,QACA,UACA,OACA,WACA,SACA,QACA,aACA,aACA,UACA,aACA,OACA,QACA,SACA,SACA,OACA,QACA,OACA,QACA,QACA,YACA,YACA,aACA,SACA,UACA,aACA,aACA,SACA,WACA,OACA,UACA,WACA,OACA,WACA,cACA,SACA,WACA,QACA,YACA,OACA,OACA,WACA,eACA,UACA,gBACA,WACA,cACA,cACA,YACA,SACA,aACA,QACA,WACA,cACA,UACA,YACA,UACA,cACA,SACA,SACA,UACA,UACA,WACA,UACA,UACA,YACA,aACA,cACA,SACA,SACA,YACA,YACA,WACA,SACA,SACA,WACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,SACA,OACA,SACA,UACA,WACA,QACA,SACA,QACA,OACA,QACA,WACA,QACA,WACA,OACA,UACA,YACA,WACA,aACA,UACA,UACA,aACA,WACA,WACA,aACA,SACA,UACA,UACA,WACA,UACA,QACA,YACA,QACA,aACA,MACA,UACA,OACA,cACA,SACA,OACA,WACA,WACA,cACA,SACA,OACA,UACA,OACA,QACA,SACA,MACA,SACA,QACA,UACA,QACA,UACA,kBACA,eACA,gBACA,WACA,YACA,WACA,aACA,YACA,MACA,QACA,YACA,YACA,YACA,QACA,QACA,WACA,SACA,OACA,YACA,SACA,OACA,UACA,SACA,UACA,QACA,SACA,OACA,OACA,QACA,SACA,SACA,YACA,SACA,QACA,QACA,UACA,OACA,UACA,YACA,QACA,QACA,YACA,aACA,SACA,WACA,WACA,WACA,QACA,MACA,UACA,SACA,SACA,YACA,QACA,WACA,QACA,OACA,UACA,QACA,SACA,SAGEC,EAAQ,CACV,SACA,UACA,MACA,MACA,QACA,cACA,MACA,SACA,aACA,SACA,SACA,WACA,OACA,OACA,SACA,QACA,SACA,UACA,SACA,OACA,OACA,gBACA,SACA,MACA,OACA,aACA,UACA,WACA,UACA,YACA,QACA,UACA,YACA,OACA,WACA,aACA,UACA,UACA,SACA,OACA,UACA,OACA,cACA,aACA,OACA,UACA,WACA,QACA,WACA,QACA,QACA,OACA,YACA,aACA,SACA,UACA,cACA,WACA,aACA,SACA,UACA,QACA,OACA,WACA,UACA,OACA,QACA,eACA,YACA,UACA,WACA,SACA,SACA,UACA,QACA,YACA,YACA,WACA,aACA,OACA,SACA,UACA,QACA,cACA,QACA,WACA,QACA,QACA,YACA,aACA,UACA,UACA,aACA,aACA,OACA,OACA,WACA,UACA,SACA,SACA,WACA,OACA,cACA,UACA,UACA,WACA,aACA,UACA,gBACA,QACA,YACA,UACA,OACA,SACA,SACA,OACA,OACA,OACA,cACA,WACA,UACA,WACA,YACA,YACA,OACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,WACA,UACA,OACA,cACA,eACA,gBACA,SACA,aACA,YACA,OACA,WACA,YACA,UACA,eACA,cACA,cACA,SACA,SACA,SACA,WACA,YACA,eACA,WACA,OACA,SACA,SACA,UACA,OACA,SACA,UACA,QACA,QACA,aACA,cACA,UACA,WACA,QACA,aACA,UACA,YACA,YACA,OACA,QACA,SACA,QACA,SACA,aACA,aACA,UACA,UACA,UACA,iBACA,YACA,QACA,YACA,SACA,cACA,OACA,SACA,QACA,SACA,aACA,cACA,QACA,cACA,QACA,SACA,SACA,QACA,aACA,aACA,cACA,UACA,aACA,WACA,UACA,KACA,SACA,UACA,aACA,YACA,OACA,cACA,SACA,WACA,YACA,WACA,iBACA,SACA,WACA,WACA,cACA,aACA,iBACA,WACA,YACA,UACA,UACA,UACA,WACA,YACA,WACA,WACA,UACA,OACA,aACA,aACA,cACA,QACA,QACA,YACA,SACA,WACA,aACA,cACA,QACA,cACA,QACA,UACA,aACA,SACA,WACA,OACA,YACA,QACA,QACA,YACA,WACA,SACA,aACA,QACA,WACA,SACA,WACA,WACA,QACA,QACA,QACA,WACA,aACA,aACA,UACA,YACA,UACA,aACA,YACA,QACA,UACA,aACA,YACA,eACA,WACA,UACA,WACA,WACA,QACA,SACA,aACA,OACA,UACA,YACA,YACA,UACA,SACA,iBACA,SACA,UACA,SACA,WACA,SACA,aACA,aACA,SACA,WACA,SACA,WACA,SACA,MACA,UACA,aACA,eACA,YACA,aACA,eACA,aACA,UACA,UACA,SACA,SACA,SACA,QACA,UACA,YACA,SACA,UACA,SACA,SACA,UACA,OACA,UACA,aACA,WACA,MACA,cACA,OACA,MACA,SACA,SACA,SACA,cACA,YACA,QACA,QACA,WACA,aACA,eACA,SACA,YACA,eACA,OACA,QACA,OACA,UACA,SACA,OACA,WACA,UACA,cACA,UACA,aACA,WACA,UACA,YACA,eACA,WACA,aACA,QACA,cACA,SACA,OACA,OACA,OACA,YACA,WACA,SACA,cACA,cACA,eACA,OACA,aACA,MACA,OACA,WACA,WACA,YACA,cACA,aACA,QACA,MACA,SACA,MACA,UACA,UACA,SACA,SACA,SACA,aACA,SACA,QACA,QACA,YACA,aACA,eACA,SACA,UACA,OACA,SACA,gBACA,cACA,UACA,UACA,QACA,aACA,cACA,eACA,SACA,aACA,YACA,OACA,SACA,OACA,UACA,QACA,SACA,aACA,YACA,WACA,WACA,cACA,QACA,SACA,cACA,SACA,WACA,UACA,SACA,WACA,UACA,QACA,aACA,YACA,WACA,UACA,OACA,WACA,cACA,eACA,QACA,SACA,cACA,YACA,UACA,OACA,MACA,UACA,aACA,UACA,OACA,aACA,MACA,aACA,YACA,OACA,WACA,cACA,aACA,YACA,QACA,WACA,OACA,YACA,cACA,aACA,QACA,UACA,WACA,UACA,WACA,OACA,SACA,UACA,QACA,QACA,OACA,OACA,OACA,QACA,QACA,UACA,QACA,WACA,QACA,OACA,OACA,OACA,MACA,MACA,QACA,SACA,OACA,QACA,OACA,OACA,UACA,OACA,OACA,aACA,MACA,OACA,MACA,QACA,OACA,OACA,UACA,QACA,OACA,SACA,QACA,WACA,QACA,QACA,SACA,UACA,QACA,OACA,OACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,OACA,MACA,QACA,MACA,QACA,WACA,OACA,SACA,MACA,SACA,QACA,QACA,WACA,WACA,QACA,UACA,QACA,MACA,OACA,QACA,MACA,QACA,OACA,OACA,OACA,SACA,QACA,QACA,SACA,OACA,OACA,QACA,MACA,UACA,SACA,SACA,QACA,OACA,SACA,SACA,OACA,SACA,WACA,QACA,OACA,QACA,QACA,SACA,MACA,MACA,OACA,SACA,SACA,UACA,WACA,QACA,OACA,QACA,SACA,OACA,QACA,MACA,OACA,UACA,QACA,OACA,QACA,UACA,SACA,SACA,MACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,OACA,OACA,MACA,QACA,MACA,MACA,SACA,QACA,MACA,OACA,SACA,OACA,QACA,QACA,MACA,OACA,QACA,OACA,SACA,UACA,WACA,MACA,WACA,MACA,OACA,WACA,WACA,SACA,YACA,UACA,MACA,QACA,QACA,OACA,QACA,OACA,OACA,QACA,QACA,SACA,OACA,SACA,YACA,OACA,UACA,OACA,aACA,SACA,QACA,UACA,MACA,QACA,SACA,SACA,OACA,SACA,UACA,QACA,OACA,OACA,UACA,UACA,SACA,UACA,UACA,MACA,OACA,QACA,OACA,YACA,UACA,SACA,MACA,OACA,MACA,UACA,QACA,SACA,UACA,OACA,SACA,OACA,OACA,OACA,QACA,UACA,YACA,SACA,OACA,OACA,QACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,UACA,OACA,SACA,QACA,QACA,QACA,OACA,QACA,SACA,QACA,SACA,OACA,MACA,YACA,SACA,OACA,OACA,OACA,SACA,WACA,UACA,OACA,UACA,QACA,QACA,SACA,OACA,SACA,SACA,SACA,WACA,OACA,SACA,SACA,SACA,UACA,QACA,YACA,WACA,MACA,QACA,QACA,QACA,UACA,OACA,SACA,WACA,YACA,OACA,OACA,WACA,MACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,UACA,OACA,OACA,SACA,OACA,aACA,QACA,OACA,SACA,QACA,QACA,QACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,SACA,QACA,OACA,QACA,UACA,OACA,MACA,SACA,MACA,QACA,YACA,WACA,OACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,QACA,aACA,OACA,OACA,UACA,OACA,WACA,UACA,MACA,QACA,SACA,QACA,SACA,OACA,QACA,OACA,YACA,aACA,WACA,SACA,SACA,MACA,QACA,OACA,QACA,SACA,MACA,UACA,OACA,QACA,OACA,OACA,QACA,QACA,OACA,SACA,QACA,YACA,OACA,QACA,YACA,MACA,QACA,QACA,QACA,QACA,gBACA,QACA,OACA,SACA,OACA,YACA,MACA,OACA,UACA,OACA,WACA,QACA,QACA,MACA,OACA,SACA,OACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,WACA,YACA,MACA,OACA,UACA,SACA,QACA,MACA,WACA,OACA,OACA,SACA,SACA,YACA,OACA,OACA,YACA,QACA,UACA,MACA,SACA,UACA,OACA,UACA,UACA,UACA,OACA,UACA,WACA,WACA,YACA,MACA,SACA,UACA,MACA,SACA,MACA,OACA,SACA,OACA,OACA,QACA,WACA,YACA,QACA,OACA,YACA,UACA,YACA,OACA,QACA,MACA,QACA,UACA,SACA,QACA,OACA,UACA,OACA,UACA,WACA,OACA,QACA,WACA,UACA,UACA,QACA,SACA,QACA,OACA,SACA,OACA,WACA,WACA,QACA,UACA,SACA,UACA,QACA,WACA,OACA,QACA,OACA,MACA,QACA,YACA,MACA,OACA,SACA,SACA,SACA,UACA,QACA,QACA,OACA,QACA,QACA,WACA,QACA,OACA,SACA,QACA,MACA,OACA,QACA,OACA,QACA,QACA,YACA,SACA,OACA,OACA,SACA,UACA,SACA,UACA,MACA,OACA,QACA,UACA,SACA,QACA,UACA,OACA,SACA,SACA,OACA,QACA,SACA,OACA,MACA,OACA,OACA,QACA,MACA,QACA,QACA,SACA,OACA,SACA,UACA,aACA,QACA,OACA,OACA,OACA,QACA,SACA,QACA,UACA,WACA,QACA,OACA,QACA,OACA,QACA,SACA,MACA,WACA,QACA,QACA,QACA,WACA,OACA,aACA,UACA,UACA,OACA,QACA,OACA,UACA,OACA,QACA,SACA,QACA,SACA,QACA,QACA,UACA,UACA,SACA,cACA,OACA,OACA,SACA,UACA,OACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,QACA,QACA,OACA,aACA,SACA,SACA,QACA,OACA,OACA,QACA,QACA,MACA,SACA,OACA,MACA,OACA,QACA,SACA,MACA,WACA,UACA,QACA,UACA,MACA,QACA,WACA,WACA,QACA,QACA,MACA,OACA,YACA,WACA,SACA,OACA,OACA,MACA,MACA,OACA,QACA,QACA,UACA,MACA,QACA,SACA,QACA,UACA,WACA,SACA,OACA,OACA,OACA,OACA,SACA,SACA,OACA,UACA,MACA,QACA,QACA,UACA,MACA,OACA,QACA,MACA,OACA,OACA,OACA,OACA,KACA,QACA,QACA,QACA,SACA,OACA,OACA,QACA,OACA,QACA,QACA,UACA,WACA,OACA,OACA,OACA,OACA,MACA,SACA,MACA,SACA,SACA,OACA,MACA,WACA,aACA,QACA,WACA,UACA,WACA,MACA,UACA,WACA,OACA,MACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,SACA,aACA,OACA,MACA,MACA,QACA,OACA,OACA,QACA,YACA,eACA,gBACA,SACA,OACA,cACA,UACA,UACA,QACA,QACA,SACA,OACA,aACA,MACA,WACA,OACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,QACA,OACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,SACA,MACA,UACA,MACA,YACA,SACA,UACA,UACA,cACA,QACA,WACA,QACA,OACA,QACA,QACA,YACA,SACA,SACA,QACA,WACA,OACA,OACA,QACA,SACA,SACA,QACA,SACA,OACA,OACA,QACA,SACA,OACA,SACA,UACA,QACA,OACA,MACA,UACA,OACA,QACA,UACA,UACA,WACA,MACA,WACA,QACA,cACA,OACA,OACA,OACA,QACA,QACA,QACA,OACA,SACA,WACA,QACA,SACA,UACA,OACA,UACA,OACA,SACA,SACA,QACA,OACA,SACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,OACA,MACA,YACA,QACA,QACA,SACA,WACA,MACA,OACA,UACA,OACA,WACA,MACA,OACA,SACA,OACA,OACA,WACA,OACA,QACA,SACA,QACA,QACA,OACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,YACA,UACA,UACA,OACA,SACA,OACA,QACA,MACA,OACA,WACA,OACA,OACA,YACA,MACA,MACA,SACA,QACA,WACA,OACA,QACA,QACA,QACA,OACA,MACA,OACA,QACA,OACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,UACA,SACA,QACA,OACA,QACA,QACA,OACA,UACA,UACA,MACA,SACA,aACA,OACA,OACA,UACA,QACA,UACA,YACA,SACA,MACA,QACA,QACA,QACA,SACA,SACA,OACA,QACA,SACA,QACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,UACA,QACA,MACA,SACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,WACA,OACA,QACA,QACA,OACA,SACA,UACA,QACA,YACA,OACA,QACA,OACA,OACA,OACA,SACA,QACA,UACA,UACA,OACA,OACA,OACA,QACA,UACA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","file":"static/js/main.29c8ea8f.chunk.js","sourcesContent":["//@ts-ignore\nimport canAutoplay from 'can-autoplay';\nimport { parseStringPromise } from 'xml2js';\nimport { v4 as uuidv4 } from 'uuid';\nimport md5 from 'blueimp-md5';\nimport firebase from 'firebase/compat/app';\n\nexport function formatTimestamp(input: any) {\n  if (\n    input === null ||\n    input === undefined ||\n    input === false ||\n    Number.isNaN(input) ||\n    input === Infinity\n  ) {\n    return '';\n  }\n  let hours = Math.floor(Number(input) / 3600);\n  let minutes = (Math.floor(Number(input) / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  let seconds = Math.floor(Number(input) % 60)\n    .toString()\n    .padStart(2, '0');\n  return `${hours}:${minutes}:${seconds}`;\n}\n\nexport function formatSpeed(input: number) {\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MiB/s';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KiB/s';\n  }\n  return input + ' B/s';\n}\n\nexport function hashString(input: string) {\n  var hash = 0;\n  for (var i = 0; i < input.length; i++) {\n    var charCode = input.charCodeAt(i);\n    hash += charCode;\n  }\n  return hash;\n}\n\nexport const colorMappings: StringDict = {\n  red: 'B03060',\n  orange: 'FE9A76',\n  yellow: 'FFD700',\n  olive: '32CD32',\n  green: '016936',\n  teal: '008080',\n  blue: '0E6EB8',\n  violet: 'EE82EE',\n  purple: 'B413EC',\n  pink: 'FF1493',\n  brown: 'A52A2A',\n  grey: 'A0A0A0',\n  black: '000000',\n};\n\nlet colorCache = {} as NumberDict;\nexport function getColorForString(id: string) {\n  let colors = [\n    'red',\n    'orange',\n    'yellow',\n    'olive',\n    'green',\n    'teal',\n    'blue',\n    'violet',\n    'purple',\n    'pink',\n    'brown',\n    'grey',\n  ];\n  if (colorCache[id]) {\n    return colors[colorCache[id]];\n  }\n  colorCache[id] = Math.abs(hashString(id)) % colors.length;\n  return colors[colorCache[id]];\n}\n\nexport function getColorForStringHex(id: string) {\n  return colorMappings[getColorForString(id)];\n}\n\nexport const getFbPhoto = (fbId: string) =>\n  `https://graph.facebook.com/${fbId}/picture?type=normal`;\n\nexport const getMediaType = (input: string) => {\n  if (!input) {\n    return '';\n  }\n  if (\n    input.startsWith('https://www.youtube.com/') ||\n    input.startsWith('https://youtu.be/')\n  ) {\n    return 'youtube';\n  }\n  return 'video';\n};\n\nexport async function testAutoplay() {\n  const result = await canAutoplay.video();\n  return result.result;\n}\n\nexport function decodeEntities(input: string) {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func: Function, wait: number, immediate?: boolean) {\n  var timeout: any;\n\n  // This is the function that is actually executed when\n  // the DOM event is triggered.\n  return function executedFunction() {\n    // Store the context of this and any\n    // parameters passed to executedFunction\n    //@ts-ignore\n    var context = this;\n    var args = arguments;\n\n    // The function to be called after\n    // the debounce time has elapsed\n    var later = function () {\n      // null timeout to indicate the debounce ended\n      timeout = null;\n\n      // Call function now if you did not on the leading end\n      if (!immediate) func.apply(context, args);\n    };\n\n    // Determine if you should call the function\n    // on the leading or trail end\n    var callNow = immediate && !timeout;\n\n    // This will reset the waiting every function execution.\n    // This is the step that prevents the function from\n    // being executed because it will never reach the\n    // inside of the previous setTimeout\n    clearTimeout(timeout);\n\n    // Restart the debounce waiting period.\n    // setTimeout returns a truthy value (it differs in web vs node)\n    timeout = setTimeout(later, wait);\n\n    // Call immediately if you're dong a leading\n    // end execution\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport const getMediaPathForList = (list: string) => {\n  if (list.startsWith('https://gitlab.com/')) {\n    const match = list.match(\n      /https:\\/\\/gitlab.com\\/api\\/v4\\/projects\\/(.*)\\/repository\\/tree/\n    );\n    const name = match && match[1];\n    const decoded = decodeURIComponent(name || '');\n    return `https://glcdn.githack.com/${decoded}/-/raw/master/`;\n  }\n  // Nginx servers use the same mediapath as list, add trailing /\n  return list + '/';\n};\n\nexport const getDefaultPicture = (name: string, background = 'a0a0a0') => {\n  return `https://ui-avatars.com/api/?name=${name}&background=${background}&size=256&color=ffffff`;\n};\n\nexport const isMobile = () => {\n  return window.screen.width <= 600;\n};\n\nexport function shuffle(array: any[]) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n}\n\nexport const iceServers = () => [\n  { urls: 'stun:stun.l.google.com:19302' },\n  {\n    urls: 'turn:5.161.49.183:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:135.181.147.65:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:numb.viagenie.ca',\n    credential: 'watchparty',\n    username: 'howardzchung@gmail.com',\n  },\n];\n\nexport const serverPath =\n  process.env.REACT_APP_SERVER_HOST ||\n  `${window.location.protocol}//${\n    process.env.NODE_ENV === 'production'\n      ? window.location.host\n      : `${window.location.hostname}:8080`\n  }`;\n\nexport async function getMediaPathResults(\n  mediaPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  // Get media list if provided\n  const response = await window.fetch(mediaPath);\n  let results: SearchResult[] = [];\n  if (mediaPath.includes('s3.')) {\n    // S3-style buckets return data in XML\n    const xml = await response.text();\n    const data = await parseStringPromise(xml);\n    let filtered = data.ListBucketResult.Contents.filter(\n      (file: any) => !file.Key[0].includes('/')\n    );\n    results = filtered.map((file: any) => ({\n      url: mediaPath + '/' + file.Key[0],\n      name: mediaPath + '/' + file.Key[0],\n    }));\n  } else {\n    const data = await response.json();\n    results = data\n      .filter((file: any) => file.type === 'file')\n      .map((file: any) => ({\n        url: file.url || getMediaPathForList(mediaPath) + file.name,\n        name: getMediaPathForList(mediaPath) + file.name,\n      }));\n  }\n  results = results.filter((option: SearchResult) =>\n    option.name.toLowerCase().includes(query.toLowerCase())\n  );\n  return results;\n}\n\nexport async function getStreamPathResults(\n  streamPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    streamPath + '/search?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function getYouTubeResults(\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    serverPath + '/youtube?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function openFileSelector(accept?: string) {\n  return new Promise<FileList | null>((resolve) => {\n    // Create an input element\n    const inputElement = document.createElement('input');\n\n    // Set its type to file\n    inputElement.type = 'file';\n\n    // Set accept to the file types you want the user to select.\n    // Include both the file extension and the mime type\n    if (accept) {\n      inputElement.accept = accept;\n    }\n\n    // set onchange event to call callback when user has selected file\n    inputElement.addEventListener('change', () => {\n      resolve(inputElement.files);\n    });\n\n    // dispatch a click event to open the file dialog\n    inputElement.dispatchEvent(new MouseEvent('click'));\n  });\n}\n\nexport function getAndSaveClientId() {\n  let clientId = window.localStorage.getItem('watchparty-clientid');\n  if (!clientId) {\n    // Generate a new clientID and save it\n    clientId = uuidv4();\n    window.localStorage.setItem('watchparty-clientid', clientId);\n  }\n  return clientId;\n}\n\nexport function calculateMedian(array: Array<number>): number {\n  // Check If Data Exists\n  if (array.length >= 1) {\n    // Sort Array\n    array = array.sort((a: number, b: number) => {\n      return a - b;\n    });\n\n    // Array Length: Even\n    if (array.length % 2 === 0) {\n      // Average Of Two Middle Numbers\n      return (array[array.length / 2 - 1] + array[array.length / 2]) / 2;\n    }\n    // Array Length: Odd\n    else {\n      // Middle Number\n      return array[(array.length - 1) / 2];\n    }\n  }\n  return 0;\n}\n\nexport async function getUserImage(\n  user: firebase.User\n): Promise<string | null> {\n  // Check if user has a Gravatar\n  const hash = user.email ? md5(user.email) : '';\n  if (user.email) {\n    const gravatar = `https://www.gravatar.com/avatar/${hash}?d=404&s=256`;\n    const response = await window.fetch(gravatar);\n    if (response.ok) {\n      return gravatar;\n    }\n  }\n  if (user.photoURL) {\n    return user.photoURL + '?height=256&width=256';\n  }\n  return `https://www.gravatar.com/avatar/${hash}?d=identicon`;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subscriber\":\"Chat_subscriber__3wy2g\",\"animatedgradient\":\"Chat_animatedgradient__15sFI\"};","function capFirst(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function generateName() {\n  var name1 = [\n    'abandoned',\n    'able',\n    'absolute',\n    'adorable',\n    'adventurous',\n    'academic',\n    'acceptable',\n    'acclaimed',\n    'accomplished',\n    'accurate',\n    'aching',\n    'acidic',\n    'acrobatic',\n    'active',\n    'actual',\n    'adept',\n    'admirable',\n    'admired',\n    'adolescent',\n    'adorable',\n    'adored',\n    'advanced',\n    'afraid',\n    'affectionate',\n    'aged',\n    'aggravating',\n    'aggressive',\n    'agile',\n    'agitated',\n    'agonizing',\n    'agreeable',\n    'ajar',\n    'alarmed',\n    'alarming',\n    'alert',\n    'alienated',\n    'alive',\n    'all',\n    'altruistic',\n    'amazing',\n    'ambitious',\n    'ample',\n    'amused',\n    'amusing',\n    'anchored',\n    'ancient',\n    'angelic',\n    'angry',\n    'anguished',\n    'animated',\n    'annual',\n    'another',\n    'antique',\n    'anxious',\n    'any',\n    'apprehensive',\n    'appropriate',\n    'apt',\n    'arctic',\n    'arid',\n    'aromatic',\n    'artistic',\n    'ashamed',\n    'assured',\n    'astonishing',\n    'athletic',\n    'attached',\n    'attentive',\n    'attractive',\n    'austere',\n    'authentic',\n    'authorized',\n    'automatic',\n    'avaricious',\n    'average',\n    'aware',\n    'awesome',\n    'awful',\n    'awkward',\n    'babyish',\n    'bad',\n    'back',\n    'baggy',\n    'bare',\n    'barren',\n    'basic',\n    'beautiful',\n    'belated',\n    'beloved',\n    'beneficial',\n    'better',\n    'best',\n    'bewitched',\n    'big',\n    'big-hearted',\n    'biodegradable',\n    'bite-sized',\n    'bitter',\n    'black',\n    'black-and-white',\n    'bland',\n    'blank',\n    'blaring',\n    'bleak',\n    'blind',\n    'blissful',\n    'blond',\n    'blue',\n    'blushing',\n    'bogus',\n    'boiling',\n    'bold',\n    'bony',\n    'boring',\n    'bossy',\n    'both',\n    'bouncy',\n    'bountiful',\n    'bowed',\n    'brave',\n    'breakable',\n    'brief',\n    'bright',\n    'brilliant',\n    'brisk',\n    'broken',\n    'bronze',\n    'brown',\n    'bruised',\n    'bubbly',\n    'bulky',\n    'bumpy',\n    'buoyant',\n    'burdensome',\n    'burly',\n    'bustling',\n    'busy',\n    'buttery',\n    'buzzing',\n    'calculating',\n    'calm',\n    'candid',\n    'canine',\n    'capital',\n    'carefree',\n    'careful',\n    'careless',\n    'caring',\n    'cautious',\n    'cavernous',\n    'celebrated',\n    'charming',\n    'cheap',\n    'cheerful',\n    'cheery',\n    'chief',\n    'chilly',\n    'chubby',\n    'circular',\n    'classic',\n    'clean',\n    'clear',\n    'clear-cut',\n    'clever',\n    'close',\n    'closed',\n    'cloudy',\n    'clueless',\n    'clumsy',\n    'cluttered',\n    'coarse',\n    'cold',\n    'colorful',\n    'colorless',\n    'colossal',\n    'comfortable',\n    'common',\n    'compassionate',\n    'competent',\n    'complete',\n    'complex',\n    'complicated',\n    'composed',\n    'concerned',\n    'concrete',\n    'confused',\n    'conscious',\n    'considerate',\n    'constant',\n    'content',\n    'conventional',\n    'cooked',\n    'cool',\n    'cooperative',\n    'coordinated',\n    'corny',\n    'corrupt',\n    'costly',\n    'courageous',\n    'courteous',\n    'crafty',\n    'crazy',\n    'creamy',\n    'creative',\n    'creepy',\n    'criminal',\n    'crisp',\n    'critical',\n    'crooked',\n    'crowded',\n    'cruel',\n    'crushing',\n    'cuddly',\n    'cultivated',\n    'cultured',\n    'cumbersome',\n    'curly',\n    'curvy',\n    'cute',\n    'cylindrical',\n    'damaged',\n    'damp',\n    'dangerous',\n    'dapper',\n    'daring',\n    'darling',\n    'dark',\n    'dazzling',\n    'dead',\n    'deadly',\n    'deafening',\n    'dear',\n    'dearest',\n    'decent',\n    'decimal',\n    'decisive',\n    'deep',\n    'defenseless',\n    'defensive',\n    'defiant',\n    'deficient',\n    'definite',\n    'definitive',\n    'delayed',\n    'delectable',\n    'delicious',\n    'delightful',\n    'delirious',\n    'demanding',\n    'dense',\n    'dental',\n    'dependable',\n    'dependent',\n    'descriptive',\n    'deserted',\n    'detailed',\n    'determined',\n    'devoted',\n    'different',\n    'difficult',\n    'digital',\n    'diligent',\n    'dim',\n    'dimpled',\n    'dimwitted',\n    'direct',\n    'disastrous',\n    'discrete',\n    'disfigured',\n    'disgusting',\n    'disloyal',\n    'dismal',\n    'distant',\n    'downright',\n    'dreary',\n    'dirty',\n    'disguised',\n    'dishonest',\n    'dismal',\n    'distant',\n    'distinct',\n    'distorted',\n    'dizzy',\n    'dopey',\n    'doting',\n    'double',\n    'downright',\n    'drab',\n    'drafty',\n    'dramatic',\n    'dreary',\n    'droopy',\n    'dry',\n    'dual',\n    'dull',\n    'dutiful',\n    'each',\n    'eager',\n    'earnest',\n    'early',\n    'easy',\n    'easy-going',\n    'ecstatic',\n    'edible',\n    'educated',\n    'elaborate',\n    'elastic',\n    'elated',\n    'elderly',\n    'electric',\n    'elegant',\n    'elementary',\n    'elliptical',\n    'embarrassed',\n    'embellished',\n    'eminent',\n    'emotional',\n    'empty',\n    'enchanted',\n    'enchanting',\n    'energetic',\n    'enlightened',\n    'enormous',\n    'enraged',\n    'entire',\n    'envious',\n    'equal',\n    'equatorial',\n    'essential',\n    'esteemed',\n    'ethical',\n    'euphoric',\n    'even',\n    'evergreen',\n    'everlasting',\n    'every',\n    'evil',\n    'exalted',\n    'excellent',\n    'exemplary',\n    'exhausted',\n    'excitable',\n    'excited',\n    'exciting',\n    'exotic',\n    'expensive',\n    'experienced',\n    'expert',\n    'extraneous',\n    'extroverted',\n    'extra-large',\n    'extra-small',\n    'fabulous',\n    'failing',\n    'faint',\n    'fair',\n    'faithful',\n    'fake',\n    'false',\n    'familiar',\n    'famous',\n    'fancy',\n    'fantastic',\n    'far',\n    'faraway',\n    'far-flung',\n    'far-off',\n    'fast',\n    'fat',\n    'fatal',\n    'fatherly',\n    'favorable',\n    'favorite',\n    'fearful',\n    'fearless',\n    'feisty',\n    'feline',\n    'female',\n    'feminine',\n    'few',\n    'fickle',\n    'filthy',\n    'fine',\n    'finished',\n    'firm',\n    'first',\n    'firsthand',\n    'fitting',\n    'fixed',\n    'flaky',\n    'flamboyant',\n    'flashy',\n    'flat',\n    'flawed',\n    'flawless',\n    'flickering',\n    'flimsy',\n    'flippant',\n    'flowery',\n    'fluffy',\n    'fluid',\n    'flustered',\n    'focused',\n    'fond',\n    'foolhardy',\n    'foolish',\n    'forceful',\n    'forked',\n    'formal',\n    'forsaken',\n    'forthright',\n    'fortunate',\n    'fragrant',\n    'frail',\n    'frank',\n    'frayed',\n    'free',\n    'French',\n    'fresh',\n    'frequent',\n    'friendly',\n    'frightened',\n    'frightening',\n    'frigid',\n    'frilly',\n    'frizzy',\n    'frivolous',\n    'front',\n    'frosty',\n    'frozen',\n    'frugal',\n    'fruitful',\n    'full',\n    'fumbling',\n    'functional',\n    'funny',\n    'fussy',\n    'fuzzy',\n    'gargantuan',\n    'gaseous',\n    'general',\n    'generous',\n    'gentle',\n    'genuine',\n    'giant',\n    'giddy',\n    'gigantic',\n    'gifted',\n    'giving',\n    'glamorous',\n    'glaring',\n    'glass',\n    'gleaming',\n    'gleeful',\n    'glistening',\n    'glittering',\n    'gloomy',\n    'glorious',\n    'glossy',\n    'glum',\n    'golden',\n    'good',\n    'good-natured',\n    'gorgeous',\n    'graceful',\n    'gracious',\n    'grand',\n    'grandiose',\n    'granular',\n    'grateful',\n    'grave',\n    'gray',\n    'great',\n    'greedy',\n    'green',\n    'gregarious',\n    'grim',\n    'grimy',\n    'gripping',\n    'grizzled',\n    'gross',\n    'grotesque',\n    'grouchy',\n    'grounded',\n    'growing',\n    'growling',\n    'grown',\n    'grubby',\n    'gruesome',\n    'grumpy',\n    'guilty',\n    'gullible',\n    'gummy',\n    'hairy',\n    'half',\n    'handmade',\n    'handsome',\n    'handy',\n    'happy',\n    'happy-go-lucky',\n    'hard',\n    'hard-to-find',\n    'harmful',\n    'harmless',\n    'harmonious',\n    'harsh',\n    'hasty',\n    'hateful',\n    'haunting',\n    'healthy',\n    'heartfelt',\n    'hearty',\n    'heavenly',\n    'heavy',\n    'hefty',\n    'helpful',\n    'helpless',\n    'hidden',\n    'hideous',\n    'high',\n    'high-level',\n    'hilarious',\n    'hoarse',\n    'hollow',\n    'homely',\n    'honest',\n    'honorable',\n    'honored',\n    'hopeful',\n    'horrible',\n    'hospitable',\n    'hot',\n    'huge',\n    'humble',\n    'humiliating',\n    'humming',\n    'humongous',\n    'hungry',\n    'hurtful',\n    'husky',\n    'icky',\n    'icy',\n    'ideal',\n    'idealistic',\n    'identical',\n    'idle',\n    'idiotic',\n    'idolized',\n    'ignorant',\n    'ill',\n    'illegal',\n    'ill-fated',\n    'ill-informed',\n    'illiterate',\n    'illustrious',\n    'imaginary',\n    'imaginative',\n    'immaculate',\n    'immaterial',\n    'immediate',\n    'immense',\n    'impassioned',\n    'impeccable',\n    'impartial',\n    'imperfect',\n    'imperturbable',\n    'impish',\n    'impolite',\n    'important',\n    'impossible',\n    'impractical',\n    'impressionable',\n    'impressive',\n    'improbable',\n    'impure',\n    'inborn',\n    'incomparable',\n    'incompatible',\n    'incomplete',\n    'inconsequential',\n    'incredible',\n    'indelible',\n    'inexperienced',\n    'indolent',\n    'infamous',\n    'infantile',\n    'infatuated',\n    'inferior',\n    'infinite',\n    'informal',\n    'innocent',\n    'insecure',\n    'insidious',\n    'insignificant',\n    'insistent',\n    'instructive',\n    'insubstantial',\n    'intelligent',\n    'intent',\n    'intentional',\n    'interesting',\n    'internal',\n    'international',\n    'intrepid',\n    'ironclad',\n    'irresponsible',\n    'irritating',\n    'itchy',\n    'jaded',\n    'jagged',\n    'jam-packed',\n    'jaunty',\n    'jealous',\n    'jittery',\n    'joint',\n    'jolly',\n    'jovial',\n    'joyful',\n    'joyous',\n    'jubilant',\n    'judicious',\n    'juicy',\n    'jumbo',\n    'junior',\n    'jumpy',\n    'juvenile',\n    'kaleidoscopic',\n    'keen',\n    'key',\n    'kind',\n    'kindhearted',\n    'kindly',\n    'klutzy',\n    'knobby',\n    'knotty',\n    'knowledgeable',\n    'knowing',\n    'known',\n    'kooky',\n    'kosher',\n    'lame',\n    'lanky',\n    'large',\n    'last',\n    'lasting',\n    'late',\n    'lavish',\n    'lawful',\n    'lazy',\n    'leading',\n    'lean',\n    'leafy',\n    'left',\n    'legal',\n    'legitimate',\n    'light',\n    'lighthearted',\n    'likable',\n    'likely',\n    'limited',\n    'limp',\n    'limping',\n    'linear',\n    'lined',\n    'liquid',\n    'little',\n    'live',\n    'lively',\n    'livid',\n    'loathsome',\n    'lone',\n    'lonely',\n    'long',\n    'long-term',\n    'loose',\n    'lopsided',\n    'lost',\n    'loud',\n    'lovable',\n    'lovely',\n    'loving',\n    'low',\n    'loyal',\n    'lucky',\n    'lumbering',\n    'luminous',\n    'lumpy',\n    'lustrous',\n    'luxurious',\n    'mad',\n    'made-up',\n    'magnificent',\n    'majestic',\n    'major',\n    'male',\n    'mammoth',\n    'married',\n    'marvelous',\n    'masculine',\n    'massive',\n    'mature',\n    'meager',\n    'mealy',\n    'mean',\n    'measly',\n    'meaty',\n    'medical',\n    'mediocre',\n    'medium',\n    'meek',\n    'mellow',\n    'melodic',\n    'memorable',\n    'menacing',\n    'merry',\n    'messy',\n    'metallic',\n    'mild',\n    'milky',\n    'mindless',\n    'miniature',\n    'minor',\n    'minty',\n    'miserable',\n    'miserly',\n    'misguided',\n    'misty',\n    'mixed',\n    'modern',\n    'modest',\n    'moist',\n    'monstrous',\n    'monthly',\n    'monumental',\n    'moral',\n    'mortified',\n    'motherly',\n    'motionless',\n    'mountainous',\n    'muddy',\n    'muffled',\n    'multicolored',\n    'mundane',\n    'murky',\n    'mushy',\n    'musty',\n    'muted',\n    'mysterious',\n    'naive',\n    'narrow',\n    'nasty',\n    'natural',\n    'naughty',\n    'nautical',\n    'near',\n    'neat',\n    'necessary',\n    'needy',\n    'negative',\n    'neglected',\n    'negligible',\n    'neighboring',\n    'nervous',\n    'new',\n    'next',\n    'nice',\n    'nifty',\n    'nimble',\n    'nippy',\n    'nocturnal',\n    'noisy',\n    'nonstop',\n    'normal',\n    'notable',\n    'noted',\n    'noteworthy',\n    'novel',\n    'noxious',\n    'numb',\n    'nutritious',\n    'nutty',\n    'obedient',\n    'obese',\n    'oblong',\n    'oily',\n    'oblong',\n    'obvious',\n    'occasional',\n    'odd',\n    'oddball',\n    'offbeat',\n    'offensive',\n    'official',\n    'old',\n    'old-fashioned',\n    'only',\n    'open',\n    'optimal',\n    'optimistic',\n    'opulent',\n    'orange',\n    'orderly',\n    'organic',\n    'ornate',\n    'ornery',\n    'ordinary',\n    'original',\n    'other',\n    'our',\n    'outlying',\n    'outgoing',\n    'outlandish',\n    'outrageous',\n    'outstanding',\n    'oval',\n    'overcooked',\n    'overdue',\n    'overjoyed',\n    'overlooked',\n    'palatable',\n    'pale',\n    'paltry',\n    'parallel',\n    'parched',\n    'partial',\n    'passionate',\n    'past',\n    'pastel',\n    'peaceful',\n    'peppery',\n    'perfect',\n    'perfumed',\n    'periodic',\n    'perky',\n    'personal',\n    'pertinent',\n    'pesky',\n    'pessimistic',\n    'petty',\n    'phony',\n    'physical',\n    'piercing',\n    'pink',\n    'pitiful',\n    'plain',\n    'plaintive',\n    'plastic',\n    'playful',\n    'pleasant',\n    'pleased',\n    'pleasing',\n    'plump',\n    'plush',\n    'polished',\n    'polite',\n    'political',\n    'pointed',\n    'pointless',\n    'poised',\n    'poor',\n    'popular',\n    'portly',\n    'posh',\n    'positive',\n    'possible',\n    'potable',\n    'powerful',\n    'powerless',\n    'practical',\n    'precious',\n    'present',\n    'prestigious',\n    'pretty',\n    'precious',\n    'previous',\n    'pricey',\n    'prickly',\n    'primary',\n    'prime',\n    'pristine',\n    'private',\n    'prize',\n    'probable',\n    'productive',\n    'profitable',\n    'profuse',\n    'proper',\n    'proud',\n    'prudent',\n    'punctual',\n    'pungent',\n    'puny',\n    'pure',\n    'purple',\n    'pushy',\n    'putrid',\n    'puzzled',\n    'puzzling',\n    'quaint',\n    'qualified',\n    'quarrelsome',\n    'quarterly',\n    'queasy',\n    'querulous',\n    'questionable',\n    'quick',\n    'quick-witted',\n    'quiet',\n    'quintessential',\n    'quirky',\n    'quixotic',\n    'quizzical',\n    'radiant',\n    'ragged',\n    'rapid',\n    'rare',\n    'rash',\n    'raw',\n    'recent',\n    'reckless',\n    'rectangular',\n    'ready',\n    'real',\n    'realistic',\n    'reasonable',\n    'red',\n    'reflecting',\n    'regal',\n    'regular',\n    'reliable',\n    'relieved',\n    'remarkable',\n    'remorseful',\n    'remote',\n    'repentant',\n    'required',\n    'respectful',\n    'responsible',\n    'repulsive',\n    'revolving',\n    'rewarding',\n    'rich',\n    'rigid',\n    'right',\n    'ringed',\n    'ripe',\n    'roasted',\n    'robust',\n    'rosy',\n    'rotating',\n    'rotten',\n    'rough',\n    'round',\n    'rowdy',\n    'royal',\n    'rubbery',\n    'rundown',\n    'ruddy',\n    'rude',\n    'runny',\n    'rural',\n    'rusty',\n    'sad',\n    'safe',\n    'salty',\n    'same',\n    'sandy',\n    'sane',\n    'sarcastic',\n    'sardonic',\n    'satisfied',\n    'scaly',\n    'scarce',\n    'scared',\n    'scary',\n    'scented',\n    'scholarly',\n    'scientific',\n    'scornful',\n    'scratchy',\n    'scrawny',\n    'second',\n    'secondary',\n    'second-hand',\n    'secret',\n    'self-assured',\n    'self-reliant',\n    'selfish',\n    'sentimental',\n    'separate',\n    'serene',\n    'serious',\n    'serpentine',\n    'several',\n    'severe',\n    'shabby',\n    'shadowy',\n    'shady',\n    'shallow',\n    'shameful',\n    'shameless',\n    'sharp',\n    'shimmering',\n    'shiny',\n    'shocked',\n    'shocking',\n    'shoddy',\n    'short',\n    'short-term',\n    'showy',\n    'shrill',\n    'shy',\n    'sick',\n    'silent',\n    'silky',\n    'silly',\n    'silver',\n    'similar',\n    'simple',\n    'simplistic',\n    'sinful',\n    'single',\n    'sizzling',\n    'skeletal',\n    'skinny',\n    'sleepy',\n    'slight',\n    'slim',\n    'slimy',\n    'slippery',\n    'slow',\n    'slushy',\n    'small',\n    'smart',\n    'smoggy',\n    'smooth',\n    'smug',\n    'snappy',\n    'snarling',\n    'sneaky',\n    'sniveling',\n    'snoopy',\n    'sociable',\n    'soft',\n    'soggy',\n    'solid',\n    'somber',\n    'some',\n    'spherical',\n    'sophisticated',\n    'sore',\n    'sorrowful',\n    'soulful',\n    'soupy',\n    'sour',\n    'Spanish',\n    'sparkling',\n    'sparse',\n    'specific',\n    'spectacular',\n    'speedy',\n    'spicy',\n    'spiffy',\n    'spirited',\n    'spiteful',\n    'splendid',\n    'spotless',\n    'spotted',\n    'spry',\n    'square',\n    'squeaky',\n    'squiggly',\n    'stable',\n    'staid',\n    'stained',\n    'stale',\n    'standard',\n    'starchy',\n    'stark',\n    'starry',\n    'steep',\n    'sticky',\n    'stiff',\n    'stimulating',\n    'stingy',\n    'stormy',\n    'straight',\n    'strange',\n    'steel',\n    'strict',\n    'strident',\n    'striking',\n    'striped',\n    'strong',\n    'studious',\n    'stunning',\n    'stupendous',\n    'stupid',\n    'sturdy',\n    'stylish',\n    'subdued',\n    'submissive',\n    'substantial',\n    'subtle',\n    'suburban',\n    'sudden',\n    'sugary',\n    'sunny',\n    'super',\n    'superb',\n    'superficial',\n    'superior',\n    'supportive',\n    'sure-footed',\n    'surprised',\n    'suspicious',\n    'svelte',\n    'sweaty',\n    'sweet',\n    'sweltering',\n    'swift',\n    'sympathetic',\n    'tall',\n    'talkative',\n    'tame',\n    'tan',\n    'tangible',\n    'tart',\n    'tasty',\n    'tattered',\n    'taut',\n    'tedious',\n    'teeming',\n    'tempting',\n    'tender',\n    'tense',\n    'tepid',\n    'terrible',\n    'terrific',\n    'testy',\n    'thankful',\n    'that',\n    'these',\n    'thick',\n    'thin',\n    'third',\n    'thirsty',\n    'this',\n    'thorough',\n    'thorny',\n    'those',\n    'thoughtful',\n    'threadbare',\n    'thrifty',\n    'thunderous',\n    'tidy',\n    'tight',\n    'timely',\n    'tinted',\n    'tiny',\n    'tired',\n    'torn',\n    'total',\n    'tough',\n    'traumatic',\n    'treasured',\n    'tremendous',\n    'tragic',\n    'trained',\n    'tremendous',\n    'triangular',\n    'tricky',\n    'trifling',\n    'trim',\n    'trivial',\n    'troubled',\n    'true',\n    'trusting',\n    'trustworthy',\n    'trusty',\n    'truthful',\n    'tubby',\n    'turbulent',\n    'twin',\n    'ugly',\n    'ultimate',\n    'unacceptable',\n    'unaware',\n    'uncomfortable',\n    'uncommon',\n    'unconscious',\n    'understated',\n    'unequaled',\n    'uneven',\n    'unfinished',\n    'unfit',\n    'unfolded',\n    'unfortunate',\n    'unhappy',\n    'unhealthy',\n    'uniform',\n    'unimportant',\n    'unique',\n    'united',\n    'unkempt',\n    'unknown',\n    'unlawful',\n    'unlined',\n    'unlucky',\n    'unnatural',\n    'unpleasant',\n    'unrealistic',\n    'unripe',\n    'unruly',\n    'unselfish',\n    'unsightly',\n    'unsteady',\n    'unsung',\n    'untidy',\n    'untimely',\n    'untried',\n    'untrue',\n    'unused',\n    'unusual',\n    'unwelcome',\n    'unwieldy',\n    'unwilling',\n    'unwitting',\n    'unwritten',\n    'upbeat',\n    'upright',\n    'upset',\n    'urban',\n    'usable',\n    'used',\n    'useful',\n    'useless',\n    'utilized',\n    'utter',\n    'vacant',\n    'vague',\n    'vain',\n    'valid',\n    'valuable',\n    'vapid',\n    'variable',\n    'vast',\n    'velvety',\n    'venerated',\n    'vengeful',\n    'verifiable',\n    'vibrant',\n    'vicious',\n    'victorious',\n    'vigilant',\n    'vigorous',\n    'villainous',\n    'violet',\n    'violent',\n    'virtual',\n    'virtuous',\n    'visible',\n    'vital',\n    'vivacious',\n    'vivid',\n    'voluminous',\n    'wan',\n    'warlike',\n    'warm',\n    'warmhearted',\n    'warped',\n    'wary',\n    'wasteful',\n    'watchful',\n    'waterlogged',\n    'watery',\n    'wavy',\n    'wealthy',\n    'weak',\n    'weary',\n    'webbed',\n    'wee',\n    'weekly',\n    'weepy',\n    'weighty',\n    'weird',\n    'welcome',\n    'well-documented',\n    'well-groomed',\n    'well-informed',\n    'well-lit',\n    'well-made',\n    'well-off',\n    'well-to-do',\n    'well-worn',\n    'wet',\n    'which',\n    'whimsical',\n    'whirlwind',\n    'whispered',\n    'white',\n    'whole',\n    'whopping',\n    'wicked',\n    'wide',\n    'wide-eyed',\n    'wiggly',\n    'wild',\n    'willing',\n    'wilted',\n    'winding',\n    'windy',\n    'winged',\n    'wiry',\n    'wise',\n    'witty',\n    'wobbly',\n    'woeful',\n    'wonderful',\n    'wooden',\n    'woozy',\n    'wordy',\n    'worldly',\n    'worn',\n    'worried',\n    'worrisome',\n    'worse',\n    'worst',\n    'worthless',\n    'worthwhile',\n    'worthy',\n    'wrathful',\n    'wretched',\n    'writhing',\n    'wrong',\n    'wry',\n    'yawning',\n    'yearly',\n    'yellow',\n    'yellowish',\n    'young',\n    'youthful',\n    'yummy',\n    'zany',\n    'zealous',\n    'zesty',\n    'zigzag',\n    'rocky',\n  ];\n\n  var name2 = [\n    'people',\n    'history',\n    'way',\n    'art',\n    'world',\n    'information',\n    'map',\n    'family',\n    'government',\n    'health',\n    'system',\n    'computer',\n    'meat',\n    'year',\n    'thanks',\n    'music',\n    'person',\n    'reading',\n    'method',\n    'data',\n    'food',\n    'understanding',\n    'theory',\n    'law',\n    'bird',\n    'literature',\n    'problem',\n    'software',\n    'control',\n    'knowledge',\n    'power',\n    'ability',\n    'economics',\n    'love',\n    'internet',\n    'television',\n    'science',\n    'library',\n    'nature',\n    'fact',\n    'product',\n    'idea',\n    'temperature',\n    'investment',\n    'area',\n    'society',\n    'activity',\n    'story',\n    'industry',\n    'media',\n    'thing',\n    'oven',\n    'community',\n    'definition',\n    'safety',\n    'quality',\n    'development',\n    'language',\n    'management',\n    'player',\n    'variety',\n    'video',\n    'week',\n    'security',\n    'country',\n    'exam',\n    'movie',\n    'organization',\n    'equipment',\n    'physics',\n    'analysis',\n    'policy',\n    'series',\n    'thought',\n    'basis',\n    'boyfriend',\n    'direction',\n    'strategy',\n    'technology',\n    'army',\n    'camera',\n    'freedom',\n    'paper',\n    'environment',\n    'child',\n    'instance',\n    'month',\n    'truth',\n    'marketing',\n    'university',\n    'writing',\n    'article',\n    'department',\n    'difference',\n    'goal',\n    'news',\n    'audience',\n    'fishing',\n    'growth',\n    'income',\n    'marriage',\n    'user',\n    'combination',\n    'failure',\n    'meaning',\n    'medicine',\n    'philosophy',\n    'teacher',\n    'communication',\n    'night',\n    'chemistry',\n    'disease',\n    'disk',\n    'energy',\n    'nation',\n    'road',\n    'role',\n    'soup',\n    'advertising',\n    'location',\n    'success',\n    'addition',\n    'apartment',\n    'education',\n    'math',\n    'moment',\n    'painting',\n    'politics',\n    'attention',\n    'decision',\n    'event',\n    'property',\n    'shopping',\n    'student',\n    'wood',\n    'competition',\n    'distribution',\n    'entertainment',\n    'office',\n    'population',\n    'president',\n    'unit',\n    'category',\n    'cigarette',\n    'context',\n    'introduction',\n    'opportunity',\n    'performance',\n    'driver',\n    'flight',\n    'length',\n    'magazine',\n    'newspaper',\n    'relationship',\n    'teaching',\n    'cell',\n    'dealer',\n    'debate',\n    'finding',\n    'lake',\n    'member',\n    'message',\n    'phone',\n    'scene',\n    'appearance',\n    'association',\n    'concept',\n    'customer',\n    'death',\n    'discussion',\n    'housing',\n    'inflation',\n    'insurance',\n    'mood',\n    'woman',\n    'advice',\n    'blood',\n    'effort',\n    'expression',\n    'importance',\n    'opinion',\n    'payment',\n    'reality',\n    'responsibility',\n    'situation',\n    'skill',\n    'statement',\n    'wealth',\n    'application',\n    'city',\n    'county',\n    'depth',\n    'estate',\n    'foundation',\n    'grandmother',\n    'heart',\n    'perspective',\n    'photo',\n    'recipe',\n    'studio',\n    'topic',\n    'collection',\n    'depression',\n    'imagination',\n    'passion',\n    'percentage',\n    'resource',\n    'setting',\n    'ad',\n    'agency',\n    'college',\n    'connection',\n    'criticism',\n    'debt',\n    'description',\n    'memory',\n    'patience',\n    'secretary',\n    'solution',\n    'administration',\n    'aspect',\n    'attitude',\n    'director',\n    'personality',\n    'psychology',\n    'recommendation',\n    'response',\n    'selection',\n    'storage',\n    'version',\n    'alcohol',\n    'argument',\n    'complaint',\n    'contract',\n    'emphasis',\n    'highway',\n    'loss',\n    'membership',\n    'possession',\n    'preparation',\n    'steak',\n    'union',\n    'agreement',\n    'cancer',\n    'currency',\n    'employment',\n    'engineering',\n    'entry',\n    'interaction',\n    'limit',\n    'mixture',\n    'preference',\n    'region',\n    'republic',\n    'seat',\n    'tradition',\n    'virus',\n    'actor',\n    'classroom',\n    'delivery',\n    'device',\n    'difficulty',\n    'drama',\n    'election',\n    'engine',\n    'football',\n    'guidance',\n    'hotel',\n    'match',\n    'owner',\n    'priority',\n    'protection',\n    'suggestion',\n    'tension',\n    'variation',\n    'anxiety',\n    'atmosphere',\n    'awareness',\n    'bread',\n    'climate',\n    'comparison',\n    'confusion',\n    'construction',\n    'elevator',\n    'emotion',\n    'employee',\n    'employer',\n    'guest',\n    'height',\n    'leadership',\n    'mall',\n    'manager',\n    'operation',\n    'recording',\n    'respect',\n    'sample',\n    'transportation',\n    'boring',\n    'charity',\n    'cousin',\n    'disaster',\n    'editor',\n    'efficiency',\n    'excitement',\n    'extent',\n    'feedback',\n    'guitar',\n    'homework',\n    'leader',\n    'mom',\n    'outcome',\n    'permission',\n    'presentation',\n    'promotion',\n    'reflection',\n    'refrigerator',\n    'resolution',\n    'revenue',\n    'session',\n    'singer',\n    'tennis',\n    'basket',\n    'bonus',\n    'cabinet',\n    'childhood',\n    'church',\n    'clothes',\n    'coffee',\n    'dinner',\n    'drawing',\n    'hair',\n    'hearing',\n    'initiative',\n    'judgment',\n    'lab',\n    'measurement',\n    'mode',\n    'mud',\n    'orange',\n    'poetry',\n    'police',\n    'possibility',\n    'procedure',\n    'queen',\n    'ratio',\n    'relation',\n    'restaurant',\n    'satisfaction',\n    'sector',\n    'signature',\n    'significance',\n    'song',\n    'tooth',\n    'town',\n    'vehicle',\n    'volume',\n    'wife',\n    'accident',\n    'airport',\n    'appointment',\n    'arrival',\n    'assumption',\n    'baseball',\n    'chapter',\n    'committee',\n    'conversation',\n    'database',\n    'enthusiasm',\n    'error',\n    'explanation',\n    'farmer',\n    'gate',\n    'girl',\n    'hall',\n    'historian',\n    'hospital',\n    'injury',\n    'instruction',\n    'maintenance',\n    'manufacturer',\n    'meal',\n    'perception',\n    'pie',\n    'poem',\n    'presence',\n    'proposal',\n    'reception',\n    'replacement',\n    'revolution',\n    'river',\n    'son',\n    'speech',\n    'tea',\n    'village',\n    'warning',\n    'winner',\n    'worker',\n    'writer',\n    'assistance',\n    'breath',\n    'buyer',\n    'chest',\n    'chocolate',\n    'conclusion',\n    'contribution',\n    'cookie',\n    'courage',\n    'desk',\n    'drawer',\n    'establishment',\n    'examination',\n    'garbage',\n    'grocery',\n    'honey',\n    'impression',\n    'improvement',\n    'independence',\n    'insect',\n    'inspection',\n    'inspector',\n    'king',\n    'ladder',\n    'menu',\n    'penalty',\n    'piano',\n    'potato',\n    'profession',\n    'professor',\n    'quantity',\n    'reaction',\n    'requirement',\n    'salad',\n    'sister',\n    'supermarket',\n    'tongue',\n    'weakness',\n    'wedding',\n    'affair',\n    'ambition',\n    'analyst',\n    'apple',\n    'assignment',\n    'assistant',\n    'bathroom',\n    'bedroom',\n    'beer',\n    'birthday',\n    'celebration',\n    'championship',\n    'cheek',\n    'client',\n    'consequence',\n    'departure',\n    'diamond',\n    'dirt',\n    'ear',\n    'fortune',\n    'friendship',\n    'funeral',\n    'gene',\n    'girlfriend',\n    'hat',\n    'indication',\n    'intention',\n    'lady',\n    'midnight',\n    'negotiation',\n    'obligation',\n    'passenger',\n    'pizza',\n    'platform',\n    'poet',\n    'pollution',\n    'recognition',\n    'reputation',\n    'shirt',\n    'speaker',\n    'stranger',\n    'surgery',\n    'sympathy',\n    'tale',\n    'throat',\n    'trainer',\n    'uncle',\n    'youth',\n    'time',\n    'work',\n    'film',\n    'water',\n    'money',\n    'example',\n    'while',\n    'business',\n    'study',\n    'game',\n    'life',\n    'form',\n    'air',\n    'day',\n    'place',\n    'number',\n    'part',\n    'field',\n    'fish',\n    'back',\n    'process',\n    'heat',\n    'hand',\n    'experience',\n    'job',\n    'book',\n    'end',\n    'point',\n    'type',\n    'home',\n    'economy',\n    'value',\n    'body',\n    'market',\n    'guide',\n    'interest',\n    'state',\n    'radio',\n    'course',\n    'company',\n    'price',\n    'size',\n    'card',\n    'list',\n    'mind',\n    'trade',\n    'line',\n    'care',\n    'group',\n    'risk',\n    'word',\n    'fat',\n    'force',\n    'key',\n    'light',\n    'training',\n    'name',\n    'school',\n    'top',\n    'amount',\n    'level',\n    'order',\n    'practice',\n    'research',\n    'sense',\n    'service',\n    'piece',\n    'web',\n    'boss',\n    'sport',\n    'fun',\n    'house',\n    'page',\n    'term',\n    'test',\n    'answer',\n    'sound',\n    'focus',\n    'matter',\n    'kind',\n    'soil',\n    'board',\n    'oil',\n    'picture',\n    'access',\n    'garden',\n    'range',\n    'rate',\n    'reason',\n    'future',\n    'site',\n    'demand',\n    'exercise',\n    'image',\n    'case',\n    'cause',\n    'coast',\n    'action',\n    'age',\n    'bad',\n    'boat',\n    'record',\n    'result',\n    'section',\n    'building',\n    'mouse',\n    'cash',\n    'class',\n    'period',\n    'plan',\n    'store',\n    'tax',\n    'side',\n    'subject',\n    'space',\n    'rule',\n    'stock',\n    'weather',\n    'chance',\n    'figure',\n    'man',\n    'model',\n    'source',\n    'beginning',\n    'earth',\n    'program',\n    'chicken',\n    'design',\n    'feature',\n    'head',\n    'material',\n    'purpose',\n    'question',\n    'rock',\n    'salt',\n    'act',\n    'birth',\n    'car',\n    'dog',\n    'object',\n    'scale',\n    'sun',\n    'note',\n    'profit',\n    'rent',\n    'speed',\n    'style',\n    'war',\n    'bank',\n    'craft',\n    'half',\n    'inside',\n    'outside',\n    'standard',\n    'bus',\n    'exchange',\n    'eye',\n    'fire',\n    'position',\n    'pressure',\n    'stress',\n    'advantage',\n    'benefit',\n    'box',\n    'frame',\n    'issue',\n    'step',\n    'cycle',\n    'face',\n    'item',\n    'metal',\n    'paint',\n    'review',\n    'room',\n    'screen',\n    'structure',\n    'view',\n    'account',\n    'ball',\n    'discipline',\n    'medium',\n    'share',\n    'balance',\n    'bit',\n    'black',\n    'bottom',\n    'choice',\n    'gift',\n    'impact',\n    'machine',\n    'shape',\n    'tool',\n    'wind',\n    'address',\n    'average',\n    'career',\n    'culture',\n    'morning',\n    'pot',\n    'sign',\n    'table',\n    'task',\n    'condition',\n    'contact',\n    'credit',\n    'egg',\n    'hope',\n    'ice',\n    'network',\n    'north',\n    'square',\n    'attempt',\n    'date',\n    'effect',\n    'link',\n    'post',\n    'star',\n    'voice',\n    'capital',\n    'challenge',\n    'friend',\n    'self',\n    'shot',\n    'brush',\n    'couple',\n    'exit',\n    'front',\n    'function',\n    'lack',\n    'living',\n    'plant',\n    'plastic',\n    'spot',\n    'summer',\n    'taste',\n    'theme',\n    'track',\n    'wing',\n    'brain',\n    'button',\n    'click',\n    'desire',\n    'foot',\n    'gas',\n    'influence',\n    'notice',\n    'rain',\n    'wall',\n    'base',\n    'damage',\n    'distance',\n    'feeling',\n    'pair',\n    'savings',\n    'staff',\n    'sugar',\n    'target',\n    'text',\n    'animal',\n    'author',\n    'budget',\n    'discount',\n    'file',\n    'ground',\n    'lesson',\n    'minute',\n    'officer',\n    'phase',\n    'reference',\n    'register',\n    'sky',\n    'stage',\n    'stick',\n    'title',\n    'trouble',\n    'bowl',\n    'bridge',\n    'campaign',\n    'character',\n    'club',\n    'edge',\n    'evidence',\n    'fan',\n    'letter',\n    'lock',\n    'maximum',\n    'novel',\n    'option',\n    'pack',\n    'park',\n    'quarter',\n    'skin',\n    'sort',\n    'weight',\n    'baby',\n    'background',\n    'carry',\n    'dish',\n    'factor',\n    'fruit',\n    'glass',\n    'joint',\n    'master',\n    'muscle',\n    'red',\n    'strength',\n    'traffic',\n    'trip',\n    'vegetable',\n    'appeal',\n    'chart',\n    'gear',\n    'ideal',\n    'kitchen',\n    'land',\n    'log',\n    'mother',\n    'net',\n    'party',\n    'principle',\n    'relative',\n    'sale',\n    'season',\n    'signal',\n    'spirit',\n    'street',\n    'tree',\n    'wave',\n    'belt',\n    'bench',\n    'commission',\n    'copy',\n    'drop',\n    'minimum',\n    'path',\n    'progress',\n    'project',\n    'sea',\n    'south',\n    'status',\n    'stuff',\n    'ticket',\n    'tour',\n    'angle',\n    'blue',\n    'breakfast',\n    'confidence',\n    'daughter',\n    'degree',\n    'doctor',\n    'dot',\n    'dream',\n    'duty',\n    'essay',\n    'father',\n    'fee',\n    'finance',\n    'hour',\n    'juice',\n    'luck',\n    'milk',\n    'mouth',\n    'peace',\n    'pipe',\n    'stable',\n    'storm',\n    'substance',\n    'team',\n    'trick',\n    'afternoon',\n    'bat',\n    'beach',\n    'blank',\n    'catch',\n    'chain',\n    'consideration',\n    'cream',\n    'crew',\n    'detail',\n    'gold',\n    'interview',\n    'kid',\n    'mark',\n    'mission',\n    'pain',\n    'pleasure',\n    'score',\n    'screw',\n    'sex',\n    'shop',\n    'shower',\n    'suit',\n    'tone',\n    'window',\n    'agent',\n    'band',\n    'bath',\n    'block',\n    'bone',\n    'calendar',\n    'candidate',\n    'cap',\n    'coat',\n    'contest',\n    'corner',\n    'court',\n    'cup',\n    'district',\n    'door',\n    'east',\n    'finger',\n    'garage',\n    'guarantee',\n    'hole',\n    'hook',\n    'implement',\n    'layer',\n    'lecture',\n    'lie',\n    'manner',\n    'meeting',\n    'nose',\n    'parking',\n    'partner',\n    'profile',\n    'rice',\n    'routine',\n    'schedule',\n    'swimming',\n    'telephone',\n    'tip',\n    'winter',\n    'airline',\n    'bag',\n    'battle',\n    'bed',\n    'bill',\n    'bother',\n    'cake',\n    'code',\n    'curve',\n    'designer',\n    'dimension',\n    'dress',\n    'ease',\n    'emergency',\n    'evening',\n    'extension',\n    'farm',\n    'fight',\n    'gap',\n    'grade',\n    'holiday',\n    'horror',\n    'horse',\n    'host',\n    'husband',\n    'loan',\n    'mistake',\n    'mountain',\n    'nail',\n    'noise',\n    'occasion',\n    'package',\n    'patient',\n    'pause',\n    'phrase',\n    'proof',\n    'race',\n    'relief',\n    'sand',\n    'sentence',\n    'shoulder',\n    'smoke',\n    'stomach',\n    'string',\n    'tourist',\n    'towel',\n    'vacation',\n    'west',\n    'wheel',\n    'wine',\n    'arm',\n    'aside',\n    'associate',\n    'bet',\n    'blow',\n    'border',\n    'branch',\n    'breast',\n    'brother',\n    'buddy',\n    'bunch',\n    'chip',\n    'coach',\n    'cross',\n    'document',\n    'draft',\n    'dust',\n    'expert',\n    'floor',\n    'god',\n    'golf',\n    'habit',\n    'iron',\n    'judge',\n    'knife',\n    'landscape',\n    'league',\n    'mail',\n    'mess',\n    'native',\n    'opening',\n    'parent',\n    'pattern',\n    'pin',\n    'pool',\n    'pound',\n    'request',\n    'salary',\n    'shame',\n    'shelter',\n    'shoe',\n    'silver',\n    'tackle',\n    'tank',\n    'trust',\n    'assist',\n    'bake',\n    'bar',\n    'bell',\n    'bike',\n    'blame',\n    'boy',\n    'brick',\n    'chair',\n    'closet',\n    'clue',\n    'collar',\n    'comment',\n    'conference',\n    'devil',\n    'diet',\n    'fear',\n    'fuel',\n    'glove',\n    'jacket',\n    'lunch',\n    'monitor',\n    'mortgage',\n    'nurse',\n    'pace',\n    'panic',\n    'peak',\n    'plane',\n    'reward',\n    'row',\n    'sandwich',\n    'shock',\n    'spite',\n    'spray',\n    'surprise',\n    'till',\n    'transition',\n    'weekend',\n    'welcome',\n    'yard',\n    'alarm',\n    'bend',\n    'bicycle',\n    'bite',\n    'blind',\n    'bottle',\n    'cable',\n    'candle',\n    'clerk',\n    'cloud',\n    'concert',\n    'counter',\n    'flower',\n    'grandfather',\n    'harm',\n    'knee',\n    'lawyer',\n    'leather',\n    'load',\n    'mirror',\n    'neck',\n    'pension',\n    'plate',\n    'purple',\n    'ruin',\n    'ship',\n    'skirt',\n    'slice',\n    'snow',\n    'specialist',\n    'stroke',\n    'switch',\n    'trash',\n    'tune',\n    'zone',\n    'anger',\n    'award',\n    'bid',\n    'bitter',\n    'boot',\n    'bug',\n    'camp',\n    'candy',\n    'carpet',\n    'cat',\n    'champion',\n    'channel',\n    'clock',\n    'comfort',\n    'cow',\n    'crack',\n    'engineer',\n    'entrance',\n    'fault',\n    'grass',\n    'guy',\n    'hell',\n    'highlight',\n    'incident',\n    'island',\n    'joke',\n    'jury',\n    'leg',\n    'lip',\n    'mate',\n    'motor',\n    'nerve',\n    'passage',\n    'pen',\n    'pride',\n    'priest',\n    'prize',\n    'promise',\n    'resident',\n    'resort',\n    'ring',\n    'roof',\n    'rope',\n    'sail',\n    'scheme',\n    'script',\n    'sock',\n    'station',\n    'toe',\n    'tower',\n    'truck',\n    'witness',\n    'can',\n    'will',\n    'other',\n    'use',\n    'make',\n    'good',\n    'look',\n    'help',\n    'go',\n    'great',\n    'being',\n    'still',\n    'public',\n    'read',\n    'keep',\n    'start',\n    'give',\n    'human',\n    'local',\n    'general',\n    'specific',\n    'long',\n    'play',\n    'feel',\n    'high',\n    'put',\n    'common',\n    'set',\n    'change',\n    'simple',\n    'past',\n    'big',\n    'possible',\n    'particular',\n    'major',\n    'personal',\n    'current',\n    'national',\n    'cut',\n    'natural',\n    'physical',\n    'show',\n    'try',\n    'check',\n    'second',\n    'call',\n    'move',\n    'pay',\n    'let',\n    'increase',\n    'single',\n    'individual',\n    'turn',\n    'ask',\n    'buy',\n    'guard',\n    'hold',\n    'main',\n    'offer',\n    'potential',\n    'professional',\n    'international',\n    'travel',\n    'cook',\n    'alternative',\n    'special',\n    'working',\n    'whole',\n    'dance',\n    'excuse',\n    'cold',\n    'commercial',\n    'low',\n    'purchase',\n    'deal',\n    'primary',\n    'worth',\n    'fall',\n    'necessary',\n    'positive',\n    'produce',\n    'search',\n    'present',\n    'spend',\n    'talk',\n    'creative',\n    'tell',\n    'cost',\n    'drive',\n    'green',\n    'support',\n    'glad',\n    'remove',\n    'return',\n    'run',\n    'complex',\n    'due',\n    'effective',\n    'middle',\n    'regular',\n    'reserve',\n    'independent',\n    'leave',\n    'original',\n    'reach',\n    'rest',\n    'serve',\n    'watch',\n    'beautiful',\n    'charge',\n    'active',\n    'break',\n    'negative',\n    'safe',\n    'stay',\n    'visit',\n    'visual',\n    'affect',\n    'cover',\n    'report',\n    'rise',\n    'walk',\n    'white',\n    'junior',\n    'pick',\n    'unique',\n    'classic',\n    'final',\n    'lift',\n    'mix',\n    'private',\n    'stop',\n    'teach',\n    'western',\n    'concern',\n    'familiar',\n    'fly',\n    'official',\n    'broad',\n    'comfortable',\n    'gain',\n    'rich',\n    'save',\n    'stand',\n    'young',\n    'heavy',\n    'lead',\n    'listen',\n    'valuable',\n    'worry',\n    'handle',\n    'leading',\n    'meet',\n    'release',\n    'sell',\n    'finish',\n    'normal',\n    'press',\n    'ride',\n    'secret',\n    'spread',\n    'spring',\n    'tough',\n    'wait',\n    'brown',\n    'deep',\n    'display',\n    'flow',\n    'hit',\n    'objective',\n    'shoot',\n    'touch',\n    'cancel',\n    'chemical',\n    'cry',\n    'dump',\n    'extreme',\n    'push',\n    'conflict',\n    'eat',\n    'fill',\n    'formal',\n    'jump',\n    'kick',\n    'opposite',\n    'pass',\n    'pitch',\n    'remote',\n    'total',\n    'treat',\n    'vast',\n    'abuse',\n    'beat',\n    'burn',\n    'deposit',\n    'print',\n    'raise',\n    'sleep',\n    'somewhere',\n    'advance',\n    'consist',\n    'dark',\n    'double',\n    'draw',\n    'equal',\n    'fix',\n    'hire',\n    'internal',\n    'join',\n    'kill',\n    'sensitive',\n    'tap',\n    'win',\n    'attack',\n    'claim',\n    'constant',\n    'drag',\n    'drink',\n    'guess',\n    'minor',\n    'pull',\n    'raw',\n    'soft',\n    'solid',\n    'wear',\n    'weird',\n    'wonder',\n    'annual',\n    'count',\n    'dead',\n    'doubt',\n    'feed',\n    'forever',\n    'impress',\n    'repeat',\n    'round',\n    'sing',\n    'slide',\n    'strip',\n    'wish',\n    'combine',\n    'command',\n    'dig',\n    'divide',\n    'equivalent',\n    'hang',\n    'hunt',\n    'initial',\n    'march',\n    'mention',\n    'spiritual',\n    'survey',\n    'tie',\n    'adult',\n    'brief',\n    'crazy',\n    'escape',\n    'gather',\n    'hate',\n    'prior',\n    'repair',\n    'rough',\n    'sad',\n    'scratch',\n    'sick',\n    'strike',\n    'employ',\n    'external',\n    'hurt',\n    'illegal',\n    'laugh',\n    'lay',\n    'mobile',\n    'nasty',\n    'ordinary',\n    'respond',\n    'royal',\n    'senior',\n    'split',\n    'strain',\n    'struggle',\n    'swim',\n    'train',\n    'upper',\n    'wash',\n    'yellow',\n    'convert',\n    'crash',\n    'dependent',\n    'fold',\n    'funny',\n    'grab',\n    'hide',\n    'miss',\n    'permit',\n    'quote',\n    'recover',\n    'resolve',\n    'roll',\n    'sink',\n    'slip',\n    'spare',\n    'suspect',\n    'sweet',\n    'swing',\n    'twist',\n    'upstairs',\n    'usual',\n    'abroad',\n    'brave',\n    'calm',\n    'concentrate',\n    'estimate',\n    'grand',\n    'male',\n    'mine',\n    'prompt',\n    'quiet',\n    'refuse',\n    'regret',\n    'reveal',\n    'rush',\n    'shake',\n    'shift',\n    'shine',\n    'steal',\n    'suck',\n    'surround',\n    'bear',\n    'brilliant',\n    'dare',\n    'dear',\n    'delay',\n    'drunk',\n    'female',\n    'hurry',\n    'inevitable',\n    'invite',\n    'kiss',\n    'neat',\n    'pop',\n    'punch',\n    'quit',\n    'reply',\n    'representative',\n    'resist',\n    'rip',\n    'rub',\n    'silly',\n    'smile',\n    'spell',\n    'stretch',\n    'stupid',\n    'tear',\n    'temporary',\n    'tomorrow',\n    'wake',\n    'wrap',\n    'yesterday',\n    'Thomas',\n    'Tom',\n    'Lieuwe',\n  ];\n\n  var name =\n    capFirst(name1[getRandomInt(0, name1.length + 1)]) +\n    ' ' +\n    capFirst(name2[getRandomInt(0, name2.length + 1)]);\n  return name;\n}\n","import React, { useState } from 'react';\nimport './UserMenu.css';\nimport { Popup, Button } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\n\nexport const UserMenu = ({\n  user,\n  socket,\n  userToManage,\n  trigger,\n  displayName,\n  position,\n  disabled,\n  timestamp,\n  isChatMessage,\n}: {\n  user?: firebase.User;\n  socket: Socket;\n  userToManage: string;\n  trigger: any;\n  icon?: string;\n  displayName?: string;\n  position?: any;\n  disabled: boolean;\n  timestamp?: string;\n  isChatMessage?: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  return (\n    <Popup\n      className=\"userMenu\"\n      trigger={trigger}\n      on=\"click\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      position={position}\n      disabled={disabled}\n    >\n      <div className=\"userMenuHeader\">{displayName}</div>\n      <div className=\"userMenuContent\">\n        <Button.Group vertical labeled icon>\n          <Button\n            content=\"Kick\"\n            negative\n            icon=\"ban\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('kickUser', {\n                userToBeKicked: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n          {isChatMessage && (\n            <Button\n              content=\"Delete Message\"\n              icon=\"comment\"\n              onClick={async () => {\n                const token = await user?.getIdToken();\n                socket.emit('CMD:deleteChatMessages', {\n                  author: userToManage,\n                  timestamp: timestamp,\n                  uid: user?.uid,\n                  token,\n                });\n                setIsOpen(false);\n              }}\n            />\n          )}\n          <Button\n            content=\"Delete User's Messages\"\n            icon=\"comments\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('CMD:deleteChatMessages', {\n                author: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n        </Button.Group>\n      </div>\n    </Popup>\n  );\n};\n","import React from 'react';\nimport { Button, Comment, Icon, Input, Popup } from 'semantic-ui-react';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { EmojiData, Picker } from 'emoji-mart';\nimport onClickOutside from 'react-onclickoutside';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n} from '../../utils';\nimport { Separator } from '../App/App';\nimport { UserMenu } from '../UserMenu/UserMenu';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\nimport classes from './Chat.module.css';\n\ninterface ChatProps {\n  chat: ChatMessage[];\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  socket: Socket;\n  scrollTimestamp: number;\n  className?: string;\n  getMediaDisplayName: Function;\n  hide?: boolean;\n  isChatDisabled?: boolean;\n  user: firebase.User | undefined;\n  owner: string | undefined;\n}\n\nexport class Chat extends React.Component<ChatProps> {\n  public state = { chatMsg: '', isNearBottom: true, isPickerOpen: false };\n  messagesRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    this.scrollToBottom();\n    this.messagesRef.current?.addEventListener('scroll', this.onScroll);\n  }\n\n  componentDidUpdate(prevProps: ChatProps) {\n    if (this.props.scrollTimestamp !== prevProps.scrollTimestamp) {\n      if (prevProps.scrollTimestamp === 0 || this.state.isNearBottom) {\n        this.scrollToBottom();\n      }\n    }\n    if (this.props.hide !== prevProps.hide) {\n      this.scrollToBottom();\n    }\n  }\n\n  updateChatMsg = (_e: any, data: { value: string }) => {\n    // console.log(e.target.selectionStart);\n    this.setState({ chatMsg: data.value });\n  };\n\n  sendChatMsg = () => {\n    if (!this.state.chatMsg) {\n      return;\n    }\n    if (this.chatTooLong()) {\n      return;\n    }\n    this.setState({ chatMsg: '' });\n    this.props.socket.emit('CMD:chat', this.state.chatMsg);\n  };\n\n  chatTooLong = () => {\n    return Boolean(this.state.chatMsg?.length > 10000);\n  };\n\n  onScroll = () => {\n    this.setState({ isNearBottom: this.isChatNearBottom() });\n  };\n\n  isChatNearBottom = () => {\n    return (\n      this.messagesRef.current &&\n      this.messagesRef.current.scrollHeight -\n        this.messagesRef.current.scrollTop -\n        this.messagesRef.current.offsetHeight <\n        100\n    );\n  };\n\n  scrollToBottom = () => {\n    if (this.messagesRef.current) {\n      this.messagesRef.current.scrollTop =\n        this.messagesRef.current.scrollHeight;\n    }\n  };\n\n  formatMessage = (cmd: string, msg: string): React.ReactNode | string => {\n    if (cmd === 'host') {\n      return (\n        <React.Fragment>\n          {`changed the video to `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'playlistAdd') {\n      return (\n        <React.Fragment>\n          {`added to the playlist: `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'seek') {\n      return `jumped to ${formatTimestamp(msg)}`;\n    } else if (cmd === 'play') {\n      return `started the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'pause') {\n      return `paused the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'lock') {\n      return `locked the room`;\n    } else if (cmd === 'unlock') {\n      return 'unlocked the room';\n    } else if (cmd === 'vBrowserTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser shut down automatically.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    } else if (cmd === 'vBrowserAlmostTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser will shut down soon.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    }\n    return cmd;\n  };\n\n  addEmoji = (emoji: EmojiData) => {\n    this.setState({ chatMsg: this.state.chatMsg + (emoji as any).native });\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          flexDirection: 'column',\n          flexGrow: 1,\n          minHeight: 0,\n          marginTop: 0,\n          marginBottom: 0,\n          padding: '8px',\n        }}\n      >\n        <div\n          className=\"chatContainer\"\n          ref={this.messagesRef}\n          style={{ position: 'relative' }}\n        >\n          <Comment.Group>\n            {this.props.chat.map((msg) => (\n              <ChatMessage\n                key={msg.timestamp + msg.id}\n                message={msg}\n                pictureMap={this.props.pictureMap}\n                nameMap={this.props.nameMap}\n                formatMessage={this.formatMessage}\n                owner={this.props.owner}\n                user={this.props.user}\n                socket={this.props.socket}\n              />\n            ))}\n            {/* <div ref={this.messagesEndRef} /> */}\n          </Comment.Group>\n          {!this.state.isNearBottom && (\n            <Button\n              size=\"tiny\"\n              onClick={this.scrollToBottom}\n              style={{\n                position: 'sticky',\n                bottom: 0,\n                display: 'block',\n                margin: '0 auto',\n              }}\n            >\n              Jump to bottom\n            </Button>\n          )}\n        </div>\n        <Separator />\n        {this.state.isPickerOpen && (\n          <PickerMenu\n            addEmoji={this.addEmoji}\n            closeMenu={() => this.setState({ isPickerOpen: false })}\n          />\n        )}\n        <Input\n          inverted\n          fluid\n          onKeyPress={(e: any) => e.key === 'Enter' && this.sendChatMsg()}\n          onChange={this.updateChatMsg}\n          value={this.state.chatMsg}\n          error={this.chatTooLong()}\n          icon\n          disabled={this.props.isChatDisabled}\n          placeholder={\n            this.props.isChatDisabled\n              ? 'The chat was disabled by the room owner.'\n              : 'Enter a message...'\n          }\n        >\n          <input />\n          <Icon\n            // style={{ right: '40px' }}\n            onClick={() => this.setState({ isPickerOpen: true })}\n            name={'' as any}\n            inverted\n            circular\n            link\n            disabled={this.props.isChatDisabled}\n            style={{ opacity: 1 }}\n          >\n            <span role=\"img\" aria-label=\"Emoji\">\n              \n            </span>\n          </Icon>\n          {/* <Icon onClick={this.sendChatMsg} name=\"send\" inverted circular link /> */}\n        </Input>\n      </div>\n    );\n  }\n}\n\nconst ChatMessage = ({\n  message,\n  nameMap,\n  pictureMap,\n  formatMessage,\n  user,\n  socket,\n  owner,\n}: {\n  message: ChatMessage;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  formatMessage: (cmd: string, msg: string) => React.ReactNode;\n  user: firebase.User | undefined;\n  socket: Socket;\n  owner: string | undefined;\n}) => {\n  const { id, timestamp, cmd, msg, system, isSub } = message;\n  return (\n    <Comment>\n      {id ? (\n        <Popup\n          content=\"WatchParty Plus subscriber\"\n          disabled={!isSub}\n          trigger={\n            <Comment.Avatar\n              className={isSub ? classes.subscriber : ''}\n              src={\n                pictureMap[id] ||\n                getDefaultPicture(nameMap[id], getColorForStringHex(id))\n              }\n            />\n          }\n        />\n      ) : null}\n      <Comment.Content>\n        <UserMenu\n          displayName={nameMap[id] || id}\n          user={user}\n          timestamp={timestamp}\n          socket={socket}\n          userToManage={id}\n          isChatMessage\n          disabled={!Boolean(owner && owner === user?.uid)}\n          trigger={\n            <Comment.Author as=\"a\" className=\"light\">\n              {Boolean(system) && 'System'}\n              {nameMap[id] || id}\n            </Comment.Author>\n          }\n        />\n        <Comment.Metadata className=\"dark\">\n          <div>{new Date(timestamp).toLocaleTimeString()}</div>\n        </Comment.Metadata>\n        <Comment.Text className=\"light system\">\n          {cmd && formatMessage(cmd, msg)}\n        </Comment.Text>\n        <Comment.Text className=\"light\">{!cmd && msg}</Comment.Text>\n      </Comment.Content>\n    </Comment>\n  );\n};\n\nclass PickerMenuInner extends React.Component<{\n  addEmoji: (emoji: EmojiData) => void;\n  closeMenu: Function;\n}> {\n  handleClickOutside = () => {\n    this.props.closeMenu();\n  };\n  render() {\n    return (\n      <div style={{ position: 'absolute', bottom: '60px' }}>\n        <Picker\n          set=\"google\"\n          sheetSize={64}\n          theme=\"dark\"\n          showPreview={false}\n          showSkinTones={false}\n          onSelect={this.props.addEmoji}\n        />\n      </div>\n    );\n  }\n}\n\nconst PickerMenu = onClickOutside(PickerMenuInner);\n","import React from 'react';\nimport { Modal, Button, Form, Message } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nexport class LoginModal extends React.Component<{\n  closeLogin: Function;\n}> {\n  public state = { email: '', password: '', isCreateMode: false, error: '' };\n\n  resetPassword = async () => {\n    try {\n      await firebase.auth().sendPasswordResetEmail(this.state.email);\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailSignIn = async (email: string, password: string) => {\n    try {\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  createAccount = async (email: string, password: string) => {\n    try {\n      await firebase.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailLinkSignIn = async () => {\n    await firebase.auth().sendSignInLinkToEmail(this.state.email, {\n      url: window.location.href,\n      handleCodeInApp: true,\n    });\n  };\n\n  render() {\n    const { closeLogin } = this.props;\n    return (\n      <Modal open={true} onClose={closeLogin as any}>\n        <Modal.Header>\n          {this.state.isCreateMode ? 'Create an account' : 'Login'}\n        </Modal.Header>\n        <Modal.Content>\n          {this.state.error && (\n            <Message color=\"red\" header=\"Error\" content={this.state.error} />\n          )}\n          <Form>\n            <Form.Field>\n              <label>Email</label>\n              <input\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={(e) => this.setState({ password: e.target.value })}\n              />\n            </Form.Field>\n            {!this.state.isCreateMode && (\n              <div>\n                Don't have an account?{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={() => this.setState({ isCreateMode: true })}\n                >\n                  Create one.\n                </button>{' '}\n                Forgot your password? Enter your email and{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={this.resetPassword}\n                >\n                  reset it.\n                </button>\n              </div>\n            )}\n            {this.state.isCreateMode ? (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.createAccount(this.state.email, this.state.password)\n                }\n              >\n                Create\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.emailSignIn(this.state.email, this.state.password)\n                }\n              >\n                Login\n              </Button>\n            )}\n          </Form>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Header, Table, Button, Icon } from 'semantic-ui-react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { SignInButton } from '../TopBar/TopBar';\nimport firebase from 'firebase/compat/app';\n\n// Make sure to call `loadStripe` outside of a components render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = process.env.REACT_APP_STRIPE_PUBLIC_KEY\n  ? loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY as string)\n  : null;\n\nexport class SubscribeModal extends React.Component<{\n  closeSubscribe: Function;\n  user?: firebase.User;\n  isSubscriber: boolean;\n}> {\n  onSubscribe = async () => {\n    if (!stripePromise) {\n      console.warn('Stripe integration is not configured, cannot subscribe');\n      return;\n    }\n    const stripe = await stripePromise;\n    const result = await stripe?.redirectToCheckout({\n      lineItems: [\n        {\n          price:\n            process.env.NODE_ENV === 'development'\n              ? 'price_HNGtabCzD5qyfd'\n              : 'price_HNDBoPDI7yYRi9',\n          quantity: 1,\n        },\n      ] as any,\n      mode: 'subscription',\n      successUrl: window.location.href,\n      cancelUrl: window.location.href,\n      customerEmail: this.props.user?.email,\n      clientReferenceId: this.props.user?.uid,\n    } as any);\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (result && result.error) {\n      console.error(result.error.message);\n    }\n  };\n  render() {\n    if (this.props.isSubscriber) {\n      this.props.closeSubscribe();\n      return null;\n    }\n    const { closeSubscribe } = this.props;\n    return (\n      <Modal open={true} onClose={closeSubscribe as any}>\n        <Modal.Header>Subscribe to WatchParty Plus</Modal.Header>\n        <Modal.Content image>\n          {/* <Image wrapped size='medium' src='https://react.semantic-ui.com/images/avatar/large/rachel.png' /> */}\n          <Modal.Description>\n            <div>\n              Subscriptions help us maintain the service and build new features!\n              Please consider supporting us if you're enjoying WatchParty.\n            </div>\n            <Header>Features</Header>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                  <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {/* Priority support */}\n                <Table.Row>\n                  <Table.Cell>\n                    Basic (Synchronized watching, chat, screenshare)\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Access</Table.Cell>\n                  <Table.Cell>When capacity allows</Table.Cell>\n                  <Table.Cell>Anytime</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Resolution</Table.Cell>\n                  <Table.Cell>720p</Table.Cell>\n                  <Table.Cell>1080p</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                  <Table.Cell>Standard</Table.Cell>\n                  <Table.Cell>Extra</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Session Length</Table.Cell>\n                  <Table.Cell>3 hours</Table.Cell>\n                  <Table.Cell>24 hours</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Number of Permanent Rooms</Table.Cell>\n                  <Table.Cell>1</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                  <Table.Cell>100</Table.Cell>\n                </Table.Row> */}\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Discord Subscriber Role (on request)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Animated Chat Avatar Frame</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Price</Table.Cell>\n                  <Table.Cell>$0 / month</Table.Cell>\n                  <Table.Cell>$5 / month</Table.Cell>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n            <div style={{ textAlign: 'right' }}>\n              {/* if user isn't logged in, provide login prompt */}\n              {this.props.user && this.props.user.email ? (\n                <Button\n                  icon\n                  labelPosition=\"left\"\n                  color=\"blue\"\n                  size=\"large\"\n                  onClick={this.onSubscribe}\n                >\n                  <Icon name=\"cc stripe\" />\n                  Subscribe with Stripe\n                </Button>\n              ) : (\n                <div>\n                  Please sign in to subscribe: <SignInButton user={undefined} />\n                </div>\n              )}\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useCallback, useState } from 'react';\nimport { Button, Icon, Popup } from 'semantic-ui-react';\nimport { serverPath } from '../../utils';\nimport { SubscribeModal } from '../Modal/SubscribeModal';\nimport firebase from 'firebase/compat/app';\n\nexport const SubscribeButton = ({\n  user,\n  isSubscriber,\n  isCustomer,\n}: {\n  user: firebase.User | undefined;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}) => {\n  const [isSubscribeModalOpen, setIsSubscribeModalOpen] = useState(false);\n  const onManage = useCallback(async () => {\n    const resp = await window.fetch(serverPath + '/manageSub', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid: user?.uid,\n        token: await user?.getIdToken(),\n        return_url: window.location.href,\n      }),\n    });\n    const session = await resp.json();\n    console.log(session);\n    window.location.assign(session.url);\n  }, [user]);\n  return (\n    <>\n      {isSubscribeModalOpen && (\n        <SubscribeModal\n          user={user}\n          isSubscriber={isSubscriber}\n          closeSubscribe={() => setIsSubscribeModalOpen(false)}\n        />\n      )}\n      {!isSubscriber && (\n        <Popup\n          content=\"Subscribe to help support us and enable additional features!\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => setIsSubscribeModalOpen(true)}\n            >\n              <Icon name=\"plus\" />\n              Subscribe\n            </Button>\n          }\n        />\n      )}\n      {isSubscriber && (\n        <Popup\n          content=\"Manage your subscription\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={onManage}\n            >\n              <Icon name=\"wrench\" />\n              Manage\n            </Button>\n          }\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { Modal, Button, Icon, Image } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport { serverPath } from '../../utils';\n\nexport class ProfileModal extends React.Component<{\n  close: Function;\n  user: firebase.User;\n  userImage: string | null;\n}> {\n  public state = { resetDisabled: false, deleteConfirmOpen: false };\n\n  onSignOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  resetPassword = async () => {\n    try {\n      if (this.props.user.email) {\n        await firebase.auth().sendPasswordResetEmail(this.props.user.email);\n        this.setState({ resetDisabled: true });\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\n  verifyEmail = async () => {\n    try {\n      if (this.props.user) {\n        await this.props.user.sendEmailVerification();\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\n  deleteAccountConfirm = () => {\n    this.setState({ deleteConfirmOpen: true });\n  };\n\n  deleteAccount = async () => {\n    const token = await this.props.user.getIdToken();\n    await window.fetch(serverPath + '/deleteAccount', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ uid: this.props.user.uid, token }),\n    });\n    window.location.reload();\n  };\n\n  render() {\n    const { close, userImage } = this.props;\n    return (\n      <Modal open={true} onClose={close as any} size=\"tiny\">\n        <Modal\n          open={this.state.deleteConfirmOpen}\n          onClose={() => {\n            this.setState({ deleteConfirmOpen: false });\n          }}\n          size=\"tiny\"\n        >\n          <Modal.Header>Delete Your Account</Modal.Header>\n          <Modal.Content>\n            <p>\n              Are you sure you want to delete your account? This can't be\n              undone.\n            </p>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button\n              positive\n              onClick={async () => {\n                await this.deleteAccount();\n              }}\n            >\n              Yes\n            </Button>\n            <Button\n              negative\n              onClick={() => {\n                this.setState({ deleteConfirmOpen: false });\n              }}\n            >\n              No\n            </Button>\n          </Modal.Actions>\n        </Modal>\n        <Modal.Header>\n          <Image avatar src={userImage} />\n          {this.props.user.email}\n          {this.props.user.emailVerified && (\n            <Icon\n              style={{ marginLeft: '8px' }}\n              title=\"Thie email is verified\"\n              name=\"check circle\"\n            ></Icon>\n          )}\n        </Modal.Header>\n        <Modal.Content>\n          <div\n            style={{\n              width: '300px',\n              display: 'flex',\n              alignItems: 'center',\n              flexDirection: 'column',\n              gap: '10px',\n            }}\n          >\n            <Button\n              icon\n              labelPosition=\"left\"\n              fluid\n              href=\"https://gravatar.com\"\n              target=\"_blank\"\n              color=\"blue\"\n            >\n              <Icon name=\"image\" />\n              Edit Gravatar\n            </Button>\n            <Button\n              disabled={this.props.user.emailVerified}\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"purple\"\n              onClick={this.verifyEmail}\n            >\n              <Icon name=\"check circle\" />\n              Verify Email\n            </Button>\n            <Button\n              disabled={this.state.resetDisabled}\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"green\"\n              onClick={this.resetPassword}\n            >\n              <Icon name=\"key\" />\n              Reset Password\n            </Button>\n            <Button\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"red\"\n              onClick={this.deleteAccountConfirm}\n            >\n              <Icon name=\"trash\" />\n              Delete Account\n            </Button>\n            <Button icon labelPosition=\"left\" onClick={this.onSignOut} fluid>\n              <Icon name=\"sign out\" />\n              Sign out\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { serverPath, colorMappings, getUserImage } from '../../utils';\nimport { Icon, Popup, Button, Dropdown, Image } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ProfileModal } from '../Modal/ProfileModal';\n\nexport class NewRoomButton extends React.Component<{\n  user: firebase.User | undefined;\n  size?: string;\n  openNewTab?: boolean;\n}> {\n  createRoom = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    const response = await window.fetch(serverPath + '/createRoom', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid,\n        token,\n      }),\n    });\n    const data = await response.json();\n    const { name } = data;\n    if (this.props.openNewTab) {\n      window.open('/#' + name);\n    } else {\n      window.location.assign('/#' + name);\n    }\n  };\n  render() {\n    return (\n      <Popup\n        content=\"Create a new room with a random URL that you can share with friends\"\n        trigger={\n          <Button\n            color=\"blue\"\n            size={this.props.size as any}\n            icon\n            labelPosition=\"left\"\n            onClick={this.createRoom}\n            className=\"toolButton\"\n            fluid\n          >\n            <Icon name=\"certificate\" />\n            New Room\n          </Button>\n        }\n      />\n    );\n  }\n}\n\ntype SignInButtonProps = {\n  user: firebase.User | undefined;\n  fluid?: boolean;\n};\n\nexport class SignInButton extends React.Component<SignInButtonProps> {\n  public state = { isLoginOpen: false, isProfileOpen: false, userImage: null };\n\n  async componentDidUpdate(prevProps: SignInButtonProps) {\n    if (!prevProps.user && this.props.user) {\n      this.setState({ userImage: await getUserImage(this.props.user) });\n    }\n  }\n\n  facebookSignIn = async () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  googleSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    if (this.props.user) {\n      return (\n        <div\n          style={{\n            margin: '4px',\n            width: '100px',\n            alignItems: 'center',\n            cursor: 'pointer',\n          }}\n        >\n          <Image\n            avatar\n            src={this.state.userImage}\n            onClick={() => this.setState({ isProfileOpen: true })}\n          />\n          {this.state.isProfileOpen && this.props.user && (\n            <ProfileModal\n              user={this.props.user}\n              userImage={this.state.userImage}\n              close={() => this.setState({ isProfileOpen: false })}\n            />\n          )}\n        </div>\n      );\n    }\n    return (\n      <React.Fragment>\n        {this.state.isLoginOpen && (\n          <LoginModal\n            closeLogin={() => this.setState({ isLoginOpen: false })}\n          />\n        )}\n        <Popup\n          basic\n          content=\"Sign in to set your name and picture, subscribe, or launch VBrowsers\"\n          trigger={\n            <Dropdown\n              style={{ height: '36px' }}\n              icon=\"sign in\"\n              labeled\n              className=\"icon\"\n              button\n              text=\"Sign in\"\n              fluid={this.props.fluid}\n            >\n              <Dropdown.Menu>\n                <Dropdown.Item onClick={this.facebookSignIn}>\n                  <Icon name=\"facebook\" />\n                  Facebook\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.googleSignIn}>\n                  <Icon name=\"google\" />\n                  Google\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.setState({ isLoginOpen: true })}\n                >\n                  <Icon name=\"mail\" />\n                  Email\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ListRoomsButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { rooms: [] as PersistentRoom[] };\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  refreshRooms = async () => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      const response = await axios.get(\n        serverPath + `/listRooms?uid=${this.props.user?.uid}&token=${token}`\n      );\n      this.setState({ rooms: response.data });\n    }\n  };\n\n  deleteRoom = async (roomId: string) => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      await axios.delete(\n        serverPath +\n          `/deleteRoom?uid=${this.props.user?.uid}&token=${token}&roomId=${roomId}`\n      );\n      this.setState({\n        rooms: this.state.rooms.filter((room) => room.roomId !== roomId),\n      });\n      this.refreshRooms();\n    }\n  };\n\n  render() {\n    return (\n      <Dropdown\n        style={{ height: '36px' }}\n        icon=\"group\"\n        labeled\n        className=\"icon\"\n        button\n        text=\"My Rooms\"\n        onClick={this.refreshRooms}\n        scrolling\n      >\n        <Dropdown.Menu>\n          {this.state.rooms.length === 0 && (\n            <Dropdown.Item disabled>You have no permanent rooms.</Dropdown.Item>\n          )}\n          {this.state.rooms.map((room: any) => {\n            return (\n              <Dropdown.Item\n                link\n                href={\n                  room.vanity\n                    ? '/r/' + room.vanity\n                    : '/' + room.roomId.replace('/', '#')\n                }\n                onClick={() => {\n                  if (!room.vanity) {\n                    setTimeout(() => window.location.reload(), 100);\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', alignItems: 'center' }}>\n                  {room.vanity\n                    ? `/r/${room.vanity}`\n                    : room.roomId.replace('/', '#')}\n                  <div style={{ marginLeft: 'auto', paddingLeft: '20px' }}>\n                    <Button\n                      icon\n                      onClick={(e: React.MouseEvent) => {\n                        e.stopPropagation();\n                        e.nativeEvent.stopImmediatePropagation();\n                        e.preventDefault();\n                        this.deleteRoom(room.roomId);\n                      }}\n                      color=\"red\"\n                      size=\"mini\"\n                    >\n                      <Icon name=\"trash\" />\n                    </Button>\n                  </div>\n                </div>\n              </Dropdown.Item>\n            );\n          })}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport class TopBar extends React.Component<{\n  user?: firebase.User;\n  hideNewRoom?: boolean;\n  hideSignin?: boolean;\n  hideMyRooms?: boolean;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}> {\n  render() {\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber ?? false}\n        isCustomer={this.props.isCustomer ?? false}\n      />\n    );\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: '1em',\n            paddingBottom: '0px',\n          }}\n        >\n          <a href=\"/\" style={{ display: 'flex' }}>\n            <div\n              style={{\n                height: '48px',\n                width: '48px',\n                marginRight: '10px',\n                borderRadius: '50%',\n                position: 'relative',\n                backgroundColor: '#' + colorMappings.blue,\n              }}\n            >\n              <Icon\n                inverted\n                name=\"film\"\n                size=\"large\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n              <Icon\n                inverted\n                name=\"group\"\n                size=\"large\"\n                color=\"green\"\n                style={{\n                  position: 'absolute',\n                  bottom: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#2185d0',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                }}\n              >\n                Watch\n              </div>\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#21ba45',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                  marginLeft: 'auto',\n                }}\n              >\n                Party\n              </div>\n            </div>\n          </a>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: '10px',\n              alignItems: 'center',\n            }}\n          >\n            <a\n              href=\"https://discord.gg/3rYj5HV\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"Discord\"\n            >\n              <Icon name=\"discord\" size=\"big\" link />\n            </a>\n            <a\n              href=\"https://github.com/howardchung/watchparty\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"GitHub\"\n            >\n              <Icon name=\"github\" size=\"big\" link />\n            </a>\n          </div>\n          <div\n            className=\"mobileStack\"\n            style={{\n              display: 'flex',\n              marginLeft: 'auto',\n              gap: '4px',\n            }}\n          >\n            {!this.props.hideNewRoom && (\n              <NewRoomButton user={this.props.user} openNewTab />\n            )}\n            {!this.props.hideMyRooms && this.props.user && (\n              <ListRoomsButton user={this.props.user} />\n            )}\n            {subscribeButton}\n            {!this.props.hideSignin && <SignInButton user={this.props.user} />}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","export const OPCODE = {\n  MOVE: 0x01,\n  SCROLL: 0x02,\n  KEY_DOWN: 0x03,\n  KEY_UP: 0x04,\n} as const;\n","export const EVENT = {\n  // Internal Events\n  CONNECTING: 'CONNECTING',\n  CONNECTED: 'CONNECTED',\n  DISCONNECTED: 'DISCONNECTED',\n  TRACK: 'TRACK',\n  MESSAGE: 'MESSAGE',\n  DATA: 'DATA',\n\n  // Websocket Events\n  SYSTEM: {\n    DISCONNECT: 'system/disconnect',\n  },\n  SIGNAL: {\n    ANSWER: 'signal/answer',\n    PROVIDE: 'signal/provide',\n  },\n  MEMBER: {\n    LIST: 'member/list',\n    CONNECTED: 'member/connected',\n    DISCONNECTED: 'member/disconnected',\n  },\n  CONTROL: {\n    LOCKED: 'control/locked',\n    RELEASE: 'control/release',\n    REQUEST: 'control/request',\n    REQUESTING: 'control/requesting',\n    CLIPBOARD: 'control/clipboard',\n    GIVE: 'control/give',\n  },\n  CHAT: {\n    MESSAGE: 'chat/message',\n    EMOTE: 'chat/emote',\n  },\n  SCREEN: {\n    CONFIGURATIONS: 'screen/configurations',\n    RESOLUTION: 'screen/resolution',\n    SET: 'screen/set',\n  },\n  ADMIN: {\n    BAN: 'admin/ban',\n    KICK: 'admin/kick',\n    LOCK: 'admin/lock',\n    UNLOCK: 'admin/unlock',\n    MUTE: 'admin/mute',\n    UNMUTE: 'admin/unmute',\n    CONTROL: 'admin/control',\n    RELEASE: 'admin/release',\n    GIVE: 'admin/give',\n  },\n} as const;\n\nexport type Events = typeof EVENT;\n\nexport type WebSocketEvents =\n  | SystemEvents\n  | ControlEvents\n  | MemberEvents\n  | SignalEvents\n  | ChatEvents\n  | ScreenEvents\n  | AdminEvents\n  | 'ka';\n\nexport type ControlEvents =\n  | typeof EVENT.CONTROL.LOCKED\n  | typeof EVENT.CONTROL.RELEASE\n  | typeof EVENT.CONTROL.REQUEST\n  | typeof EVENT.CONTROL.GIVE\n  | typeof EVENT.CONTROL.CLIPBOARD;\n\nexport type SystemEvents = typeof EVENT.SYSTEM.DISCONNECT;\nexport type MemberEvents =\n  | typeof EVENT.MEMBER.LIST\n  | typeof EVENT.MEMBER.CONNECTED\n  | typeof EVENT.MEMBER.DISCONNECTED;\nexport type SignalEvents =\n  | typeof EVENT.SIGNAL.ANSWER\n  | typeof EVENT.SIGNAL.PROVIDE;\nexport type ChatEvents = typeof EVENT.CHAT.MESSAGE | typeof EVENT.CHAT.EMOTE;\nexport type ScreenEvents =\n  | typeof EVENT.SCREEN.CONFIGURATIONS\n  | typeof EVENT.SCREEN.RESOLUTION\n  | typeof EVENT.SCREEN.SET;\n\nexport type AdminEvents =\n  | typeof EVENT.ADMIN.BAN\n  | typeof EVENT.ADMIN.KICK\n  | typeof EVENT.ADMIN.LOCK\n  | typeof EVENT.ADMIN.UNLOCK\n  | typeof EVENT.ADMIN.MUTE\n  | typeof EVENT.ADMIN.UNMUTE\n  | typeof EVENT.ADMIN.CONTROL\n  | typeof EVENT.ADMIN.RELEASE\n  | typeof EVENT.ADMIN.GIVE;\n","import EventEmitter from 'eventemitter3';\n\nimport { iceServers } from '../../utils';\nimport { OPCODE } from './data';\nimport { EVENT, WebSocketEvents } from './events';\nimport {\n  SignalProvidePayload,\n  WebSocketMessages,\n  WebSocketPayloads,\n} from './messages';\n\nexport abstract class BaseClient extends EventEmitter<any> {\n  protected _ws?: WebSocket;\n  protected _peer?: RTCPeerConnection;\n  protected _channel?: RTCDataChannel;\n  protected _timeout?: NodeJS.Timeout;\n  protected _displayname?: string;\n  protected _state: RTCIceConnectionState = 'disconnected';\n  protected _id = '';\n\n  get id() {\n    return this._id;\n  }\n\n  get supported() {\n    return (\n      typeof RTCPeerConnection !== 'undefined' &&\n      typeof RTCPeerConnection.prototype.addTransceiver !== 'undefined'\n    );\n  }\n\n  get socketOpen() {\n    return (\n      typeof this._ws !== 'undefined' && this._ws.readyState === WebSocket.OPEN\n    );\n  }\n\n  get peerConnected() {\n    return (\n      typeof this._peer !== 'undefined' &&\n      ['connected', 'checking', 'completed'].includes(this._state)\n    );\n  }\n\n  get connected() {\n    return this.peerConnected && this.socketOpen;\n  }\n\n  public connect(url: string, password: string, displayname: string) {\n    if (this.socketOpen) {\n      this.emit('warn', `attempting to create websocket while connection open`);\n      return;\n    }\n\n    if (!this.supported) {\n      this.onDisconnected(\n        new Error('browser does not support webrtc (RTCPeerConnection missing)')\n      );\n      return;\n    }\n\n    if (displayname === '') {\n      throw new Error('Must add a displayname');\n    }\n\n    this._displayname = displayname;\n    this[EVENT.CONNECTING]();\n\n    try {\n      this._ws = new WebSocket(`${url}ws?password=${password}`);\n      this.emit('debug', `connecting to ${this._ws.url}`);\n      this._ws.onmessage = this.onMessage.bind(this);\n      this._ws.onerror = (event) => this.onError.bind(this);\n      this._ws.onclose = (event) =>\n        this.onDisconnected.bind(this, new Error('websocket closed'));\n      this._timeout = setTimeout(this.onTimeout.bind(this), 15000);\n    } catch (err: any) {\n      this.onDisconnected(err);\n    }\n  }\n\n  protected disconnect() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (this.socketOpen) {\n      try {\n        this._ws!.close();\n      } catch (err) {}\n      this._ws = undefined;\n    }\n\n    if (this.peerConnected) {\n      try {\n        this._peer!.close();\n      } catch (err) {}\n      this._peer = undefined;\n    }\n\n    this._state = 'disconnected';\n    this._displayname = undefined;\n    this._id = '';\n  }\n\n  public sendData(\n    event: 'wheel' | 'mousemove',\n    data: { x: number; y: number }\n  ): void;\n  public sendData(\n    event: 'mousedown' | 'mouseup' | 'keydown' | 'keyup',\n    data: { key: number }\n  ): void;\n  public sendData(event: string, data: any) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send data while disconnected`);\n      return;\n    }\n\n    let buffer: ArrayBuffer;\n    let payload: DataView;\n    switch (event) {\n      case 'mousemove':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.MOVE);\n        payload.setUint16(1, 4, true);\n        payload.setUint16(3, data.x, true);\n        payload.setUint16(5, data.y, true);\n        break;\n      case 'wheel':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.SCROLL);\n        payload.setUint16(1, 4, true);\n        payload.setInt16(3, data.x, true);\n        payload.setInt16(5, data.y, true);\n        break;\n      case 'keydown':\n      case 'mousedown':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_DOWN);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      case 'keyup':\n      case 'mouseup':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_UP);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      default:\n        this.emit('warn', `unknown data event: ${event}`);\n    }\n\n    // @ts-ignore\n    if (typeof buffer !== 'undefined') {\n      this._channel!.send(buffer);\n    }\n  }\n\n  public sendMessage(event: WebSocketEvents, payload?: WebSocketPayloads) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send message while disconnected`);\n      return;\n    }\n    this.emit(\n      'debug',\n      `sending event '${event}' ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n    this._ws!.send(JSON.stringify({ event, ...payload }));\n  }\n\n  public createPeer(sdp: string, lite: boolean, servers: string[]) {\n    this.emit('debug', `creating peer`);\n    if (!this.socketOpen) {\n      this.emit(\n        'warn',\n        `attempting to create peer with no websocket: `,\n        this._ws ? `state: ${this._ws.readyState}` : 'no socket'\n      );\n      return;\n    }\n\n    if (this.peerConnected) {\n      this.emit('warn', `attempting to create peer while connected`);\n      return;\n    }\n\n    this._peer = new RTCPeerConnection();\n    if (lite !== true) {\n      this._peer = new RTCPeerConnection({\n        iceServers: servers ? [{ urls: servers }] : iceServers(),\n      });\n    }\n\n    this._peer.onconnectionstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer connection state changed`,\n        this._peer ? this._peer.connectionState : undefined\n      );\n    };\n\n    this._peer.onsignalingstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer signaling state changed`,\n        this._peer ? this._peer.signalingState : undefined\n      );\n    };\n\n    this._peer.oniceconnectionstatechange = (event) => {\n      this._state = this._peer!.iceConnectionState;\n\n      this.emit(\n        'debug',\n        `peer ice connection state changed: ${this._peer!.iceConnectionState}`\n      );\n\n      switch (this._state) {\n        case 'checking':\n          if (this._timeout) {\n            clearTimeout(this._timeout);\n          }\n          break;\n        case 'connected':\n          this.onConnected();\n          break;\n        case 'failed':\n          this.onDisconnected(new Error('peer failed'));\n          break;\n        case 'disconnected':\n          this.onDisconnected(new Error('peer disconnected'));\n          break;\n      }\n    };\n\n    this._peer.ontrack = this.onTrack.bind(this);\n    this._peer.addTransceiver('audio', { direction: 'recvonly' });\n    this._peer.addTransceiver('video', { direction: 'recvonly' });\n\n    this._channel = this._peer.createDataChannel('data');\n    this._channel.onerror = this.onError.bind(this);\n    this._channel.onmessage = this.onData.bind(this);\n    this._channel.onclose = this.onDisconnected.bind(\n      this,\n      new Error('peer data channel closed')\n    );\n\n    this._peer.setRemoteDescription({ type: 'offer', sdp });\n    this._peer\n      .createAnswer()\n      .then((d) => {\n        this._peer!.setLocalDescription(d);\n        this._ws!.send(\n          JSON.stringify({\n            event: EVENT.SIGNAL.ANSWER,\n            sdp: d.sdp,\n            displayname: this._displayname,\n          })\n        );\n      })\n      .catch((err) => this.emit('error', err));\n  }\n\n  private onMessage(e: MessageEvent) {\n    const { event, ...payload } = JSON.parse(e.data) as WebSocketMessages;\n\n    this.emit(\n      'debug',\n      `received websocket event ${event} ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n\n    if (event === EVENT.SIGNAL.PROVIDE) {\n      const { sdp, lite, ice, id } = payload as SignalProvidePayload;\n      this._id = id;\n      this.createPeer(sdp, lite, ice);\n      return;\n    }\n\n    // @ts-ignore\n    if (typeof this[event] === 'function') {\n      // @ts-ignore\n      this[event](payload);\n    } else {\n      this[EVENT.MESSAGE](event, payload);\n    }\n  }\n\n  private onData(e: MessageEvent) {\n    this[EVENT.DATA](e.data);\n  }\n\n  private onTrack(event: RTCTrackEvent) {\n    this.emit(\n      'debug',\n      `received ${event.track.kind} track from peer: ${event.track.id}`,\n      event\n    );\n    const stream = event.streams[0];\n    if (!stream) {\n      this.emit(\n        'warn',\n        `no stream provided for track ${event.track.id}(${event.track.label})`\n      );\n      return;\n    }\n    this[EVENT.TRACK](event);\n  }\n\n  private onError(event: Event) {\n    this.emit('error', (event as ErrorEvent).error);\n  }\n\n  private onConnected() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (!this.connected) {\n      this.emit('warn', `onConnected called while being disconnected`);\n      return;\n    }\n\n    this.emit('debug', `connected`);\n    this[EVENT.CONNECTED]();\n  }\n\n  private onTimeout() {\n    this.emit('debug', `connection timeout`);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this.onDisconnected(new Error('connection timeout'));\n  }\n\n  protected onDisconnected(reason?: Error) {\n    this.disconnect();\n    this.emit('debug', `disconnected:`, reason);\n    this[EVENT.DISCONNECTED](reason);\n  }\n\n  protected [EVENT.MESSAGE](event: string, payload: any) {\n    this.emit('warn', `unhandled websocket event '${event}':`, payload);\n  }\n\n  protected abstract [EVENT.CONNECTING](): void;\n  protected abstract [EVENT.CONNECTED](): void;\n  protected abstract [EVENT.DISCONNECTED](reason?: Error): void;\n  protected abstract [EVENT.TRACK](event: RTCTrackEvent): void;\n  protected abstract [EVENT.DATA](data: any): void;\n}\n","import React from 'react';\n\nimport { EVENT } from './events';\nimport { NekoClient } from '.';\n\n// import { EVENT } from './events';\n\nexport default class VBrowser extends React.Component<{\n  username: string;\n  password: string;\n  hostname: string;\n  controlling: boolean;\n  setLoadingFalse: Function;\n  resolution: string;\n  setResolution: Function;\n  doPlay: Function;\n}> {\n  // private observer = new ResizeObserver(this.onResize);\n  private focused = false;\n  private fullscreen = false;\n  private activeKeys: Set<number> = new Set();\n  private controlling = false;\n  private scroll = 1; // 1 to 10\n  private scroll_invert = true;\n  private width = 1280;\n  private height = 720;\n  private rate = 30;\n  private keepAliveInterval = 0;\n  // private _component = React.createRef<HTMLDivElement>();\n  private _container = React.createRef<HTMLDivElement>();\n  private _overlay = React.createRef<HTMLDivElement>();\n  // private _aspect = React.createRef<HTMLDivElement>();\n  // private _player = React.createRef<HTMLDivElement>();\n  private _video = React.createRef<HTMLVideoElement>();\n  // private _resolution = React.createRef<HTMLDivElement>();\n  private $client: NekoClient = new NekoClient();\n\n  componentDidMount() {\n    this.controlling = this.props.controlling;\n    this.keepAliveInterval = window.setInterval(\n      () => this.$client.sendMessage('ka'),\n      10000\n    );\n\n    this.$client.on(EVENT.CONNECTED, () => {\n      if (this.props.controlling) {\n        this.takeControl();\n      }\n    });\n    this.$client.on(EVENT.DISCONNECTED, () => {\n      this.$client.login(url, this.props.password, this.props.username);\n    });\n    this.$client.on(EVENT.SCREEN.RESOLUTION, (data) => {\n      this.width = data.width;\n      this.height = data.height;\n      this.rate = data.rate;\n      // Update our state with the resolution sent from server\n      this.props.setResolution(`${this.width}x${this.height}@${this.rate}`);\n    });\n    this.$client.on(EVENT.TRACK, (track: MediaStreamTrack, stream) => {\n      // console.log(track, streams);\n      const video = document.getElementById('leftVideo') as HTMLVideoElement;\n      video.src = '';\n      video.srcObject = stream;\n      // Manually play audio for iPhone Safari since this seems to create two separate streams\n      if (stream.getTracks().length === 1 && track.kind === 'audio') {\n        const audio = document.getElementById(\n          'iPhoneAudio'\n        ) as HTMLAudioElement;\n        audio.srcObject = new MediaStream([track]);\n        audio.play();\n      }\n      this.props.doPlay();\n    });\n    this.$client.on(EVENT.CONTROL.CLIPBOARD, this.onClipboardChanged);\n\n    if (process.env.NODE_ENV === 'development') {\n      this.$client.on('debug', (e, data) => console.log(e, data));\n    }\n\n    const url = 'wss://' + this.props.hostname + '/';\n    this.$client.login(url, this.props.password, this.props.username);\n\n    // this._container.current?.addEventListener('resize', this.onResize);\n    // this.onResize();\n\n    // document.addEventListener('fullscreenchange', () => {\n    //   this.onResize();\n    // });\n\n    document.addEventListener('focusin', this.onFocus.bind(this));\n    document.addEventListener('focusout', this.onBlur.bind(this));\n\n    document\n      .getElementById('leftOverlay')\n      ?.addEventListener('wheel', this.onWheel, { passive: false });\n  }\n\n  componentDidUpdate(prevProps: any) {\n    // console.log(this.props.controlling, prevProps.controlling);\n    this.controlling = this.props.controlling;\n    if (this.props.controlling && !prevProps.controlling) {\n      this.takeControl();\n    }\n    if (this.props.resolution !== prevProps.resolution) {\n      this.changeResolution(this.props.resolution);\n    }\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.keepAliveInterval);\n    this.$client.removeAllListeners();\n    this.$client.logout();\n  }\n\n  takeControl = () => {\n    if (this.$client.connected) {\n      this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n    } else {\n      this.$client.once(EVENT.CONNECTED, () => {\n        this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n      });\n    }\n  };\n\n  changeResolution = (resString: string) => {\n    const split = resString.split(/x|@/);\n    const width = Number(split[0]);\n    const height = Number(split[1]);\n    const rate = Number(split[2]);\n    this.$client.sendMessage(EVENT.SCREEN.SET, { width, height, rate });\n  };\n\n  onClipboardChanged(clipboard: string) {\n    if (\n      navigator.clipboard &&\n      typeof navigator.clipboard.writeText === 'function'\n    ) {\n      // Received clipboard contents from vbrowser\n      navigator.clipboard.writeText(clipboard);\n    }\n  }\n  onFocus = async () => {\n    if (\n      this.props.controlling &&\n      navigator.clipboard &&\n      typeof navigator.clipboard.readText === 'function'\n    ) {\n      const text = await navigator.clipboard.readText();\n      // console.log('[FOCUS]', text);\n      // send clipboard contents to vbrowser\n      this.$client.sendMessage(EVENT.CONTROL.CLIPBOARD, { text });\n    }\n  };\n\n  onBlur = () => {\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    this.activeKeys.forEach((key) => {\n      this.$client.sendData('keyup', { key });\n      this.activeKeys.delete(key);\n    });\n  };\n\n  onClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onContextMenu = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onMousePos = (e: MouseEvent | React.MouseEvent) => {\n    const { w, h } = { w: this.width, h: this.height };\n    const rect = this._overlay.current!.getBoundingClientRect();\n    this.$client.sendData('mousemove', {\n      x: Math.round((w / rect.width) * (e.clientX - rect.left)),\n      y: Math.round((h / rect.height) * (e.clientY - rect.top)),\n    });\n  };\n\n  onWheel = (e: WheelEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n\n    let x = e.deltaX;\n    let y = e.deltaY;\n\n    if (this.scroll_invert) {\n      x = x * -1;\n      y = y * -1;\n    }\n\n    x = Math.min(Math.max(x, -this.scroll), this.scroll);\n    y = Math.min(Math.max(y, -this.scroll), this.scroll);\n\n    this.$client.sendData('wheel', { x, y });\n  };\n\n  onMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mousedown', { key: e.button });\n  };\n\n  onMouseUp = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mouseup', { key: e.button });\n  };\n\n  onMouseMove = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n  };\n\n  onMouseEnter = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.focus();\n    this.onFocus();\n    this.focused = true;\n  };\n\n  onMouseLeave = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.blur();\n    this.focused = false;\n  };\n\n  // frick you firefox\n  getCode = (e: React.KeyboardEvent): number => {\n    let key = e.keyCode;\n    if (key === 59 && (e.key === ';' || e.key === ':')) {\n      key = 186;\n    }\n\n    if (key === 61 && (e.key === '=' || e.key === '+')) {\n      key = 187;\n    }\n\n    if (key === 173 && (e.key === '-' || e.key === '_')) {\n      key = 189;\n    }\n\n    return key;\n  };\n\n  onKeyDown = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keydown', { key });\n    this.activeKeys.add(key);\n  };\n\n  onKeyUp = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keyup', { key });\n    this.activeKeys.delete(key);\n  };\n\n  onResize = () => {\n    // let height = 0;\n    // if (!this.fullscreen) {\n    //   const offsetWidth = this._component.current?.offsetWidth;\n    //   const offsetHeight = this._component.current?.offsetHeight;\n    //   this._player.current!.style.width = `${offsetWidth}px`;\n    //   this._player.current!.style.height = `${offsetHeight}px`;\n    //   height = offsetHeight as number;\n    // } else {\n    //   const offsetHeight = this._player.current?.offsetHeight;\n    //   height = offsetHeight as number;\n    // }\n    // this._container.current!.style.maxWidth = `${\n    //   (this.horizontal / this.vertical) * height\n    // }px`;\n    // this._aspect.current!.style.paddingBottom = `${\n    //   (this.vertical / this.horizontal) * 100\n    // }%`;\n  };\n\n  render() {\n    return (\n      <div\n        id=\"leftVideoParent\"\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <div\n          ref={this._container}\n          style={{ width: '100%', height: 'fit-content', position: 'relative' }}\n        >\n          <video\n            playsInline\n            ref={this._video}\n            id=\"leftVideo\"\n            style={{ width: '100%' }}\n          />\n          <audio id=\"iPhoneAudio\" />\n          <div\n            ref={this._overlay}\n            id={'leftOverlay'}\n            tabIndex={0}\n            style={{\n              width: document.getElementById('leftVideo')?.clientWidth,\n              height: document.getElementById('leftVideo')?.clientHeight,\n              position: 'absolute',\n              top: 0,\n              bottom: 0,\n              // disable firefox scrollbars?\n              scrollbarWidth: 'none',\n            }}\n            onClick={this.onClick}\n            onContextMenu={this.onContextMenu}\n            // onWheel={this.onWheel}\n            onMouseMove={this.onMouseMove}\n            onMouseDown={this.onMouseDown}\n            onMouseUp={this.onMouseUp}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n            onKeyDown={this.onKeyDown}\n            onKeyUp={this.onKeyUp}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nimport { BaseClient } from './base';\n//import { Member } from './types';\nimport { EVENT } from './events';\nimport {\n  ControlClipboardPayload,\n  ControlPayload,\n  ControlTargetPayload,\n  DisconnectPayload,\n  ScreenConfigurationsPayload,\n  ScreenResolutionPayload,\n} from './messages';\n\nexport class NekoClient extends BaseClient implements EventEmitter<any> {\n  login(url: string, password: string, displayname: string) {\n    this.connect(url, password, displayname);\n  }\n\n  logout() {\n    this.disconnect();\n  }\n\n  /////////////////////////////\n  // Internal Events\n  /////////////////////////////\n  protected [EVENT.CONNECTING]() {}\n\n  protected [EVENT.CONNECTED]() {\n    this.emit(EVENT.CONNECTED);\n  }\n\n  protected [EVENT.DISCONNECTED](reason?: Error) {\n    console.warn(reason);\n    this.emit(EVENT.DISCONNECTED);\n  }\n\n  protected [EVENT.TRACK](event: RTCTrackEvent) {\n    const { track, streams } = event;\n    this.emit(EVENT.TRACK, track, streams[0]);\n  }\n\n  protected [EVENT.DATA](data: any) {\n    console.log('[DATA]', data);\n  }\n\n  /////////////////////////////\n  // System Events\n  /////////////////////////////\n  protected [EVENT.SYSTEM.DISCONNECT]({ message }: DisconnectPayload) {\n    this.onDisconnected(new Error(message));\n  }\n\n  /////////////////////////////\n  // Control Events\n  /////////////////////////////\n  protected [EVENT.CONTROL.LOCKED]({ id }: ControlPayload) {\n    //this.$accessor.remote.setHost(id);\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.RELEASE]({ id }: ControlPayload) {\n    //this.$accessor.remote.reset();\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.GIVE]({ id, target }: ControlTargetPayload) {\n    // const member = this.member(target);\n    // if (!member) {\n    //   return;\n    // }\n    //this.$accessor.remote.setHost(member);\n  }\n\n  protected [EVENT.CONTROL.CLIPBOARD]({ text }: ControlClipboardPayload) {\n    this.emit(EVENT.CONTROL.CLIPBOARD, text);\n  }\n\n  /////////////////////////////\n  // Screen Events\n  /////////////////////////////\n  protected [EVENT.SCREEN.CONFIGURATIONS]({\n    configurations,\n  }: ScreenConfigurationsPayload) {\n    // console.log('[CONFIGURATIONS]', configurations);\n    //this.$accessor.video.setConfigurations(configurations);\n  }\n\n  protected [EVENT.SCREEN.RESOLUTION]({\n    id,\n    width,\n    height,\n    rate,\n  }: ScreenResolutionPayload) {\n    this.emit(EVENT.SCREEN.RESOLUTION, { width, height, rate });\n  }\n}\n\nexport { default as VBrowser } from './VBrowser';\n","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n  iceServers,\n} from '../../utils';\nimport { UserMenu } from '../UserMenu/UserMenu';\nimport firebase from 'firebase/compat/app';\n\ninterface VideoChatProps {\n  socket: Socket;\n  participants: User[];\n  pictureMap: StringDict;\n  nameMap: StringDict;\n  tsMap: NumberDict;\n  rosterUpdateTS: Number;\n  hide?: boolean;\n  owner: string | undefined;\n  user: firebase.User | undefined;\n}\n\nexport class VideoChat extends React.Component<VideoChatProps> {\n  socket = this.props.socket;\n\n  componentDidMount() {\n    this.socket.on('signal', this.handleSignal);\n  }\n\n  componentWillUnmount() {\n    this.socket.off('signal', this.handleSignal);\n  }\n\n  componentDidUpdate(prevProps: VideoChatProps) {\n    if (this.props.rosterUpdateTS !== prevProps.rosterUpdateTS) {\n      this.updateWebRTC();\n    }\n  }\n\n  handleSignal = async (data: any) => {\n    // Handle messages received from signaling server\n    const msg = data.msg;\n    const from = data.from;\n    const pc = window.watchparty.videoPCs[from];\n    console.log('recv', from, data);\n    if (msg.ice !== undefined) {\n      pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n    } else if (msg.sdp && msg.sdp.type === 'offer') {\n      // console.log('offer');\n      await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      this.sendSignal(from, { sdp: pc.localDescription });\n    } else if (msg.sdp && msg.sdp.type === 'answer') {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n    }\n  };\n\n  setupWebRTC = async () => {\n    // Set up our own video\n    // Create default stream\n    let black = ({ width = 640, height = 480 } = {}) => {\n      let canvas: any = Object.assign(document.createElement('canvas'), {\n        width,\n        height,\n      });\n      canvas.getContext('2d')?.fillRect(0, 0, width, height);\n      let stream = canvas.captureStream();\n      return Object.assign(stream.getVideoTracks()[0], { enabled: false });\n    };\n    let stream = new MediaStream([black()]);\n\n    try {\n      stream = await navigator?.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n    } catch (e) {\n      console.warn(e);\n      try {\n        console.log('attempt audio only stream');\n        stream = await navigator?.mediaDevices?.getUserMedia({\n          audio: true,\n          video: false,\n        });\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    window.watchparty.ourStream = stream;\n    // alert server we've joined video chat\n    this.socket.emit('CMD:joinVideo');\n  };\n\n  stopWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    const videoPCs = window.watchparty.videoPCs;\n    ourStream &&\n      ourStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    window.watchparty.ourStream = undefined;\n    Object.keys(videoPCs).forEach((key) => {\n      videoPCs[key].close();\n      delete videoPCs[key];\n    });\n    this.socket.emit('CMD:leaveVideo');\n  };\n\n  toggleVideoWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    if (ourStream && ourStream.getVideoTracks()[0]) {\n      ourStream.getVideoTracks()[0].enabled =\n        !ourStream.getVideoTracks()[0]?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getVideoWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    return ourStream && ourStream.getVideoTracks()[0]?.enabled;\n  };\n\n  toggleAudioWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    if (ourStream && ourStream.getAudioTracks()[0]) {\n      ourStream.getAudioTracks()[0].enabled =\n        !ourStream.getAudioTracks()[0]?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getAudioWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    return (\n      ourStream &&\n      ourStream.getAudioTracks()[0] &&\n      ourStream.getAudioTracks()[0].enabled\n    );\n  };\n\n  updateWebRTC = () => {\n    const ourStream = window.watchparty.ourStream;\n    const videoPCs = window.watchparty.videoPCs;\n    const videoRefs = window.watchparty.videoRefs;\n    if (!ourStream) {\n      // We haven't started video chat, exit\n      return;\n    }\n    this.props.participants.forEach((user) => {\n      const id = user.id;\n      if (!user.isVideoChat && videoPCs[id]) {\n        // User isn't in video chat but we have a connection, close it\n        videoPCs[id].close();\n        delete videoPCs[id];\n      }\n      if (!user.isVideoChat || videoPCs[id]) {\n        // User isn't in video chat, or we already have a connection to them\n        return;\n      }\n      if (id === this.socket.id) {\n        videoPCs[id] = new RTCPeerConnection();\n        videoRefs[id].srcObject = ourStream;\n      } else {\n        const pc = new RTCPeerConnection({ iceServers: iceServers() });\n        videoPCs[id] = pc;\n        // Add our own video as outgoing stream\n        ourStream?.getTracks().forEach((track) => {\n          if (ourStream) {\n            pc.addTrack(track, ourStream);\n          }\n        });\n        pc.onicecandidate = (event) => {\n          // We generated an ICE candidate, send it to peer\n          if (event.candidate) {\n            this.sendSignal(id, { ice: event.candidate });\n          }\n        };\n        pc.ontrack = (event: RTCTrackEvent) => {\n          // Mount the stream from peer\n          // console.log(stream);\n          videoRefs[id].srcObject = event.streams[0];\n        };\n        // For each pair, have the lexicographically smaller ID be the offerer\n        const isOfferer = this.socket.id < id;\n        if (isOfferer) {\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignal(id, { sdp: pc.localDescription });\n          };\n        }\n      }\n    });\n  };\n\n  sendSignal = async (to: string, data: any) => {\n    console.log('send', to, data);\n    this.socket.emit('signal', { to, msg: data });\n  };\n\n  render() {\n    const { participants, pictureMap, nameMap, tsMap, socket, owner, user } =\n      this.props;\n    const ourStream = window.watchparty.ourStream;\n    const videoRefs = window.watchparty.videoRefs;\n    const videoChatContentStyle = {\n      height: participants.length < 3 ? 220 : 110,\n      borderRadius: '4px',\n      objectFit: 'contain',\n    };\n    return (\n      <div\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          width: '100%',\n          flexDirection: 'column',\n          overflow: 'auto',\n        }}\n      >\n        {!ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n              marginTop: '8px',\n            }}\n          >\n            <Button\n              fluid\n              title=\"Join Video Chat\"\n              color={'purple'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.setupWebRTC}\n            >\n              <Icon name=\"video\" />\n              {`Join Video Chat`}\n            </Button>\n          </div>\n        )}\n        {ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n            }}\n          >\n            <Button\n              fluid\n              color={'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.stopWebRTC}\n            >\n              <Icon name=\"external\" />\n              {`Leave Video Chat`}\n            </Button>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'center',\n                marginTop: '8px',\n                width: '100%',\n              }}\n            >\n              <Button\n                color={this.getVideoWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleVideoWebRTC}\n              >\n                <Icon name=\"video\" />\n                {this.getVideoWebRTC() ? 'On' : 'Off'}\n              </Button>\n              <Button\n                color={this.getAudioWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleAudioWebRTC}\n              >\n                <Icon\n                  name={\n                    this.getAudioWebRTC() ? 'microphone' : 'microphone slash'\n                  }\n                />\n                {this.getAudioWebRTC() ? 'On' : 'Off'}\n              </Button>\n            </div>\n          </div>\n        )}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n            marginTop: '8px',\n          }}\n        >\n          {participants.map((p) => {\n            return (\n              <div key={p.id}>\n                <div\n                  style={{\n                    position: 'relative',\n                    //marginLeft: '4px',\n                  }}\n                >\n                  <div>\n                    <UserMenu\n                      displayName={nameMap[p.id] || p.id}\n                      user={user}\n                      disabled={!Boolean(owner && owner === user?.uid)}\n                      position={'left center'}\n                      socket={socket}\n                      userToManage={p.id}\n                      trigger={\n                        <Icon\n                          name=\"ellipsis vertical\"\n                          size=\"large\"\n                          style={{\n                            position: 'absolute',\n                            right: -7,\n                            top: 5,\n                            cursor: 'pointer',\n                            opacity: 0.75,\n                            visibility: Boolean(owner && owner === user?.uid)\n                              ? 'visible'\n                              : 'hidden',\n                          }}\n                        />\n                      }\n                    />\n                    {ourStream && p.isVideoChat ? (\n                      <video\n                        ref={(el) => {\n                          if (el) {\n                            videoRefs[p.id] = el;\n                          }\n                        }}\n                        style={{\n                          ...(videoChatContentStyle as any),\n                          // mirror the video if it's our stream. this style mimics Zoom where your\n                          // video is mirrored only for you)\n                          transform: `scaleX(${\n                            p.id === socket.id ? '-1' : '1'\n                          })`,\n                        }}\n                        autoPlay\n                        muted={p.id === socket.id}\n                        data-id={p.id}\n                      />\n                    ) : (\n                      <img\n                        style={videoChatContentStyle as any}\n                        src={\n                          pictureMap[p.id] ||\n                          getDefaultPicture(\n                            nameMap[p.id],\n                            getColorForStringHex(p.id)\n                          )\n                        }\n                        alt=\"\"\n                      />\n                    )}\n                    <div\n                      style={{\n                        position: 'absolute',\n                        bottom: '4px',\n                        left: '0px',\n                        width: '100%',\n                        backgroundColor: 'rgba(0,0,0,0)',\n                        color: 'white',\n                        borderRadius: '4px',\n                        fontSize: '10px',\n                        fontWeight: 700,\n                        display: 'flex',\n                      }}\n                    >\n                      <div\n                        title={nameMap[p.id] || p.id}\n                        style={{\n                          width: '80px',\n                          backdropFilter: 'brightness(80%)',\n                          padding: '4px',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                          overflow: 'hidden',\n                          display: 'inline-block',\n                        }}\n                      >\n                        {p.isVideoChat && <Icon size=\"small\" name=\"video\" />}\n                        {nameMap[p.id] || p.id}\n                      </div>\n                      <div\n                        style={{\n                          backdropFilter: 'brightness(60%)',\n                          padding: '4px',\n                          flexGrow: 1,\n                          display: 'flex',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        {formatTimestamp(tsMap[p.id] || 0)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, Form, Header, Icon, Modal, TextArea } from 'semantic-ui-react';\n\nexport const SettingsModal = ({ trigger }: any) => (\n  <Modal trigger={trigger} basic closeIcon size=\"small\">\n    <Header icon=\"setting\" content=\"Settings\" />\n    <Modal.Content>\n      <Form>\n        <TextArea rows={10} id=\"settings_textarea\">\n          {window.localStorage.getItem('watchparty-setting') ||\n            JSON.stringify(getDefaultSettings(), null, 2)}\n        </TextArea>\n      </Form>\n    </Modal.Content>\n    <Modal.Actions>\n      <Button\n        color=\"green\"\n        inverted\n        onClick={() => {\n          const newSetting = (document.getElementById(\n            'settings_textarea'\n          ) as HTMLTextAreaElement)!.value;\n          try {\n            validateSettingsString(newSetting);\n            updateSettings(newSetting);\n            window.location.reload();\n          } catch (e) {\n            alert(e);\n          }\n        }}\n      >\n        <Icon name=\"checkmark\" />\n        Save\n      </Button>\n    </Modal.Actions>\n  </Modal>\n);\n\nexport function getDefaultSettings(): Settings {\n  return {};\n}\n\nexport function getCurrentSettings(): Settings {\n  const setting = window.localStorage.getItem('watchparty-setting');\n  try {\n    let settings = validateSettingsString(setting);\n    if (!settings) {\n      return {};\n    }\n    return settings;\n  } catch (e) {\n    console.warn(e);\n    return getDefaultSettings();\n  }\n}\n\n/**\n * Validate a setting string. Return a parsed setting object if valid, otherwise throw exception\n */\nexport function validateSettingsString(\n  setting: string | null\n): Settings | null {\n  // Don't have a setting or invalid value\n  let settingObject: Settings = JSON.parse(setting as any);\n  if (!setting) {\n    return {};\n  }\n  if (setting[0] !== '{') {\n    throw new Error('failed to parse settings, using defaults');\n  }\n  return settingObject;\n}\n\nexport function updateSettings(newSetting: string) {\n  window.localStorage.setItem('watchparty-setting', newSetting);\n}\n","import React from 'react';\nimport { Modal, Loader, List } from 'semantic-ui-react';\n\nexport const MultiStreamModal = ({\n  streams,\n  setMedia,\n  resetMultiSelect,\n}: {\n  streams: any[];\n  setMedia: Function;\n  resetMultiSelect: Function;\n}) => (\n  <Modal inverted basic open closeIcon onClose={resetMultiSelect as any}>\n    <Modal.Header>Select a file</Modal.Header>\n    <Modal.Content>\n      {streams.length === 0 && <Loader />}\n      {streams && (\n        <List inverted>\n          {streams.map((file: any) => (\n            <List.Item>\n              <List.Icon name=\"file\" />\n              <List.Content>\n                <List.Header\n                  as=\"a\"\n                  onClick={() => {\n                    setMedia(null, { value: file.url });\n                    resetMultiSelect();\n                  }}\n                >\n                  {file.name}\n                </List.Header>\n                <List.Description>\n                  {file.length.toLocaleString()} bytes\n                </List.Description>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      )}\n    </Modal.Content>\n  </Modal>\n);\n","export const examples = [\n  'https://upload.wikimedia.org/wikipedia/commons/a/a5/Spring_-_Blender_Open_Movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/8/88/Big_Buck_Bunny_alt.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/7/75/Sintel_movie_720x306.ogv',\n  'https://upload.wikimedia.org/wikipedia/commons/c/cb/Tears_of_Steel_1080p.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a2/Elephants_Dream_%282006%29.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a9/HERO_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/0/02/Glass_Half_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/d/d0/Caminandes-_Llama_Drama_-_Short_Movie.ogv',\n].map((url) => ({\n  url,\n  type: 'file',\n  name: url,\n  duration: 0,\n}));\n","import React from 'react';\nimport { Button, ButtonGroup, DropdownProps, Icon } from 'semantic-ui-react';\nimport { decodeEntities, formatTimestamp } from '../../utils';\n\nimport classes from './ChatVideoCard.module.css';\n\nconst ChatVideoCard: React.FC<{\n  video: PlaylistVideo;\n  index: number;\n  controls?: boolean;\n  onPlay?: (index: number) => void;\n  onRemove?: (index: number) => void;\n  onPlayNext?: (index: number) => void;\n  onSetMedia?: (e: any, data: DropdownProps) => void;\n  onPlaylistAdd?: (e: any, data: DropdownProps) => void;\n  isYoutube?: boolean;\n  disabled?: boolean;\n}> = (props) => {\n  const {\n    video,\n    index,\n    controls,\n    onPlay,\n    onPlayNext,\n    onRemove,\n    onSetMedia,\n    disabled,\n    onPlaylistAdd,\n    isYoutube,\n  } = props;\n\n  const handlePlayClick = React.useCallback(\n    (e) => {\n      if (onPlay) {\n        onPlay(index);\n      }\n    },\n    [onPlay, index]\n  );\n\n  const handlePlayNextClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onPlayNext) {\n        onPlayNext(index);\n      }\n    },\n    [onPlayNext, index]\n  );\n\n  const handleRemoveClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onRemove) {\n        onRemove(index);\n      }\n    },\n    [onRemove, index]\n  );\n\n  const Element = 'div';\n\n  return (\n    <Element\n      title={video.name}\n      className={classes.Card}\n      onClick={\n        onSetMedia\n          ? (e) => {\n              onSetMedia(e, { value: video.url });\n            }\n          : undefined\n      }\n    >\n      <div className={classes.Wrapper}>\n        <div className={classes.ThumbnailWrapper}>\n          {!!video.duration && (\n            <div className={classes.DurationLabel}>\n              {formatTimestamp(video.duration)}\n            </div>\n          )}\n          {!!video.img && (\n            <img\n              className={classes.Thumbnail}\n              src={video.img}\n              alt={video.name}\n            />\n          )}\n        </div>\n        <Icon\n          color={isYoutube ? 'red' : 'black'}\n          size=\"large\"\n          name={isYoutube ? 'youtube' : 'linkify'}\n        />\n        <div className={classes.Content}>\n          <div className={classes.Title}>{decodeEntities(video.name)}</div>\n          <div className={classes.ChannelName}>{video.channel}</div>\n        </div>\n        {onPlaylistAdd && (\n          <div className={classes.Controls}>\n            <div style={{ marginLeft: 'auto' }}>\n              <Button\n                className=\"playlistAddButton\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  e.nativeEvent.stopImmediatePropagation();\n                  onPlaylistAdd(e, { value: video.url });\n                }}\n              >\n                Add To Playlist\n              </Button>\n            </div>\n          </div>\n        )}\n        {controls && (\n          <div className={classes.Controls}>\n            <ButtonGroup size=\"mini\">\n              <Button\n                icon\n                color=\"green\"\n                title=\"Play now\"\n                onClick={handlePlayClick}\n                disabled={disabled}\n              >\n                <Icon name=\"play\" />\n              </Button>\n              <Button\n                icon\n                color=\"black\"\n                title=\"Play next\"\n                onClick={handlePlayNextClick}\n                disabled={disabled}\n              >\n                <Icon name=\"arrow up\" />\n              </Button>\n              <Button\n                icon\n                color=\"red\"\n                title=\"Remove\"\n                onClick={handleRemoveClick}\n                disabled={disabled}\n              >\n                <Icon name=\"trash\" />\n              </Button>\n            </ButtonGroup>\n          </div>\n        )}\n      </div>\n    </Element>\n  );\n};\n\nexport default ChatVideoCard;\n","import React from 'react';\nimport { DropdownProps, Menu, Input, Icon, Dropdown } from 'semantic-ui-react';\nimport { debounce, getYouTubeResults } from '../../utils';\nimport { examples } from '../../utils/examples';\nimport ChatVideoCard from '../Playlist/ChatVideoCard';\n\ninterface ComboBoxProps {\n  setMedia: (e: any, data: DropdownProps) => void;\n  playlistAdd: (e: any, data: DropdownProps) => void;\n  playlistMove: (index: number, toIndex: number) => void;\n  playlistDelete: (index: number) => void;\n  currentMedia: string;\n  getMediaDisplayName: Function;\n  launchMultiSelect: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n  playlist: PlaylistVideo[];\n}\n\nexport class ComboBox extends React.Component<ComboBoxProps> {\n  state = {\n    inputMedia: undefined as string | undefined,\n    results: undefined,\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n  };\n  debounced: any = null;\n\n  setMediaAndClose = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ inputMedia: undefined, results: undefined }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          const query: string = this.state.inputMedia || '';\n          let timestamp = Number(new Date());\n          let results: JSX.Element[] | undefined = undefined;\n          if (query === '' || (query && query.startsWith('http'))) {\n            let items = examples;\n            if (query) {\n              items = [\n                {\n                  name: query,\n                  type: 'file',\n                  url: query,\n                  duration: 0,\n                },\n              ];\n            }\n            results = items.map((result: SearchResult, index: number) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                />\n              </Menu.Item>\n            ));\n          } else {\n            const data = await getYouTubeResults(query);\n            results = data.map((result, index) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                  isYoutube\n                />\n              </Menu.Item>\n            ));\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  render() {\n    const { currentMedia, getMediaDisplayName } = this.props;\n    const { results } = this.state;\n    return (\n      <div style={{ position: 'relative' }}>\n        <div style={{ display: 'flex', gap: '4px' }}>\n          <Input\n            style={{ flexGrow: 1 }}\n            inverted\n            fluid\n            focus\n            disabled={this.props.disabled}\n            onChange={this.doSearch}\n            onFocus={(e: any) => {\n              e.persist();\n              this.setState(\n                {\n                  inputMedia: getMediaDisplayName(currentMedia),\n                },\n                () => {\n                  if (\n                    !this.state.inputMedia ||\n                    (this.state.inputMedia &&\n                      this.state.inputMedia.startsWith('http'))\n                  ) {\n                    this.doSearch(e);\n                  }\n                }\n              );\n              setTimeout(() => e.target.select(), 100);\n            }}\n            onBlur={() => {\n              setTimeout(\n                () =>\n                  this.setState({ inputMedia: undefined, results: undefined }),\n                100\n              );\n            }}\n            onKeyPress={(e: any) => {\n              if (e.key === 'Enter') {\n                this.setMediaAndClose(e, {\n                  value: this.state.inputMedia,\n                });\n              }\n            }}\n            icon={\n              <Icon\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, {\n                    value: this.state.inputMedia,\n                  })\n                }\n                name=\"arrow right\"\n                link\n                circular\n                //bordered\n              />\n            }\n            loading={this.state.loading}\n            label={'Now Watching:'}\n            placeholder=\"Enter video file URL, YouTube link, or YouTube search term\"\n            value={\n              this.state.inputMedia !== undefined\n                ? this.state.inputMedia\n                : getMediaDisplayName(currentMedia)\n            }\n          />\n          <Dropdown\n            icon=\"list\"\n            labeled\n            className=\"icon\"\n            button\n            text={`Playlist (${this.props.playlist.length})`}\n            scrolling\n          >\n            <Dropdown.Menu direction=\"left\">\n              {this.props.playlist.length === 0 && (\n                <Dropdown.Item disabled>\n                  There are no items in the playlist.\n                </Dropdown.Item>\n              )}\n              {this.props.playlist.map((item: PlaylistVideo, index: number) => {\n                return (\n                  <Dropdown.Item>\n                    <div style={{ maxWidth: '500px' }}>\n                      <ChatVideoCard\n                        video={item}\n                        index={index}\n                        controls\n                        onPlay={(index) => {\n                          this.props.setMedia(null, {\n                            value: this.props.playlist[index]?.url,\n                          });\n                          this.props.playlistDelete(index);\n                        }}\n                        onPlayNext={(index) => {\n                          this.props.playlistMove(index, 0);\n                        }}\n                        onRemove={(index) => {\n                          this.props.playlistDelete(index);\n                        }}\n                        disabled={this.props.disabled}\n                        isYoutube={Boolean(item.img)}\n                      />\n                    </div>\n                  </Dropdown.Item>\n                );\n              })}\n            </Dropdown.Menu>\n          </Dropdown>\n        </div>\n        {Boolean(results) && this.state.inputMedia !== undefined && (\n          <Menu\n            fluid\n            vertical\n            style={{\n              position: 'absolute',\n              top: '22px',\n              maxHeight: '250px',\n              overflow: 'scroll',\n              zIndex: 1001,\n            }}\n          >\n            {results}\n          </Menu>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Menu, Icon, Label, Button } from 'semantic-ui-react';\nimport { decodeEntities } from '../../utils';\n\nexport const YouTubeSearchResult = (\n  props: SearchResult & { setMedia: Function; playlistAdd: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n        <img style={{ height: '50px' }} src={result.img} alt={result.name} />\n        <Icon color=\"red\" size=\"large\" name=\"youtube\" />\n        <div>{decodeEntities(result.name)}</div>\n        <div style={{ marginLeft: 'auto' }}>\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              e.nativeEvent.stopImmediatePropagation();\n              props.playlistAdd(e, { value: result.url });\n            }}\n          >\n            Add To Playlist\n          </Button>\n        </div>\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport const MediaPathSearchResult = (\n  props: SearchResult & { setMedia: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex' }}>\n        <Icon name=\"file\" />\n        {result.name}\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport class StreamPathSearchResult extends React.Component<\n  SearchResult & {\n    setMedia: Function;\n    launchMultiSelect: Function;\n    streamPath: string;\n  }\n> {\n  render() {\n    const result = this.props;\n    const setMedia = this.props.setMedia;\n    return (\n      <React.Fragment>\n        <Menu.Item\n          onClick={async (e) => {\n            this.props.launchMultiSelect([]);\n            let response = await window.fetch(\n              this.props.streamPath +\n                '/data?torrent=' +\n                encodeURIComponent(result.magnet!)\n            );\n            let metadata = await response.json();\n            // console.log(metadata);\n            if (\n              metadata.files.filter(\n                (file: any) => file.length > 10 * 1024 * 1024\n              ).length > 1\n            ) {\n              // Multiple large files, present user selection\n              const multiStreamSelection = metadata.files.map(\n                (file: any, i: number) => ({\n                  ...file,\n                  url:\n                    this.props.streamPath +\n                    '/stream?torrent=' +\n                    encodeURIComponent(result.magnet!) +\n                    '&fileIndex=' +\n                    i,\n                })\n              );\n              multiStreamSelection.sort((a: any, b: any) =>\n                a.name.localeCompare(b.name)\n              );\n              this.props.launchMultiSelect(multiStreamSelection);\n            } else {\n              this.props.launchMultiSelect(undefined);\n              setMedia(e, {\n                value:\n                  this.props.streamPath +\n                  '/stream?torrent=' +\n                  encodeURIComponent(result.magnet!),\n              });\n            }\n          }}\n        >\n          <Label\n            circular\n            empty\n            color={Number(result.seeders) ? 'green' : 'red'}\n          />\n          <Icon name=\"film\" />\n          {result.name +\n            ' - ' +\n            result.size +\n            ' - ' +\n            result.seeders +\n            ' peers'}\n        </Menu.Item>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  debounce,\n  getYouTubeResults,\n  getMediaPathResults,\n  getStreamPathResults,\n} from '../../utils';\nimport { DropdownProps, Dropdown } from 'semantic-ui-react';\nimport {\n  YouTubeSearchResult,\n  MediaPathSearchResult,\n  StreamPathSearchResult,\n} from '../SearchResult/SearchResult';\n\ninterface SearchComponentProps {\n  setMedia: Function;\n  playlistAdd: Function;\n  type?: 'youtube' | 'media' | 'stream';\n  launchMultiSelect?: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n}\n\nexport class SearchComponent extends React.Component<SearchComponentProps> {\n  state = {\n    results: [] as SearchResult[],\n    resetDropdown: Number(new Date()),\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n    inputMedia: undefined,\n  };\n  debounced: any = null;\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          let query = this.state.inputMedia || '';\n          let results: SearchResult[] = [];\n          let timestamp = Number(new Date());\n          if (this.props.type === 'youtube') {\n            results = await getYouTubeResults(query);\n          } else if (this.props.type === 'media' && this.props.mediaPath) {\n            results = await getMediaPathResults(this.props.mediaPath, query);\n          } else if (this.props.type === 'stream' && this.props.streamPath) {\n            results = await getStreamPathResults(this.props.streamPath, query);\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  setMedia = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ resetDropdown: Number(new Date()) }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  render() {\n    const setMedia = this.setMedia;\n    let placeholder = 'Search streams';\n    let icon = 'film';\n    if (this.props.type === 'youtube') {\n      placeholder = 'Search YouTube';\n      icon = 'youtube';\n    } else if (this.props.type === 'media') {\n      placeholder = this.props.mediaPath || '';\n      icon = 'file';\n    }\n    if (this.state.loading) {\n      icon = 'loading circle notch';\n    }\n    return (\n      <React.Fragment>\n        <Dropdown\n          key={this.state.resetDropdown}\n          fluid\n          style={{ height: '36px' }}\n          button\n          icon={icon}\n          className=\"icon\"\n          labeled\n          disabled={this.props.disabled}\n          search={(() => {}) as any}\n          text={placeholder}\n          onSearchChange={this.doSearch}\n          onFocus={async (e) => {\n            if (this.props.type === 'media' && this.props.mediaPath) {\n              this.doSearch(e);\n            }\n          }}\n          scrolling\n          // onBlur={() => this.setState({ results: this.state.watchOptions })}\n          //searchQuery={this.state.query}\n          //loading={this.state.loading}\n        >\n          {Boolean(this.state.results.length) ? (\n            <Dropdown.Menu>\n              {this.state.results.map((result: SearchResult) => {\n                if (this.props.type === 'youtube') {\n                  return (\n                    <YouTubeSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                      playlistAdd={this.props.playlistAdd}\n                    />\n                  );\n                } else if (this.props.type === 'media') {\n                  return (\n                    <MediaPathSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                    />\n                  );\n                }\n                return (\n                  <StreamPathSearchResult\n                    key={result.url}\n                    {...result}\n                    setMedia={setMedia}\n                    launchMultiSelect={this.props.launchMultiSelect as Function}\n                    streamPath={this.props.streamPath || ''}\n                  />\n                );\n              })}\n            </Dropdown.Menu>\n          ) : null}\n        </Dropdown>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { Icon, Progress, Label, Popup } from 'semantic-ui-react';\nimport { Slider } from 'react-semantic-ui-range';\nimport { formatTimestamp } from '../../utils';\n\ninterface ControlsProps {\n  duration: number;\n  togglePlay: Function;\n  onSeek: Function;\n  fullScreen: Function;\n  toggleMute: Function;\n  toggleSubtitle: Function;\n  jumpToLeader: Function;\n  paused: boolean;\n  muted: boolean;\n  subtitled: boolean;\n  currentTime: number;\n  setVolume: Function;\n  disabled?: boolean;\n  leaderTime?: number;\n  isPauseDisabled?: boolean;\n}\n\nexport class Controls extends React.Component<ControlsProps> {\n  state = {\n    showTimestamp: false,\n    currTimestamp: 0,\n    posTimestamp: 0,\n    volume: 1,\n    muted: this.props.muted,\n  };\n\n  onMouseOver = () => {\n    // console.log('mouseover');\n    this.setState({ showTimestamp: true });\n  };\n\n  onMouseOut = () => {\n    // console.log('mouseout');\n    this.setState({ showTimestamp: false });\n  };\n\n  onMouseMove = (e: any) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const max = rect.width;\n    const pct = x / max;\n    // console.log(x, max);\n    const target = pct * this.props.duration;\n    // console.log(pct);\n    if (pct >= 0) {\n      this.setState({ currTimestamp: target, posTimestamp: pct });\n    }\n  };\n\n  render() {\n    const {\n      togglePlay,\n      onSeek,\n      fullScreen,\n      toggleMute,\n      toggleSubtitle,\n      jumpToLeader,\n      currentTime,\n      duration,\n      leaderTime,\n      isPauseDisabled,\n      disabled,\n      subtitled,\n      paused,\n    } = this.props;\n    const { muted, volume } = this.state;\n    const isBehind = leaderTime && leaderTime - currentTime > 5;\n    return (\n      <div className=\"controls\">\n        <Icon\n          size=\"large\"\n          onClick={() => {\n            togglePlay();\n          }}\n          className=\"control action\"\n          disabled={disabled || isPauseDisabled}\n          name={paused ? 'play' : 'pause'}\n        />\n        <Popup\n          content={\n            (isBehind ? \"We've detected that your stream is behind. \" : '') +\n            'Click to sync to leader.'\n          }\n          trigger={\n            <Icon\n              size=\"large\"\n              onClick={jumpToLeader}\n              className={`control action ${isBehind ? 'glowing' : ''}`}\n              name={'angle double right'}\n            />\n          }\n        />\n        <div className=\"control\">{formatTimestamp(currentTime)}</div>\n        <Progress\n          size=\"tiny\"\n          color=\"blue\"\n          onClick={\n            duration < Infinity && !this.props.disabled ? onSeek : undefined\n          }\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          onMouseMove={this.onMouseMove}\n          className=\"control action\"\n          inverted\n          style={{\n            flexGrow: 1,\n            marginTop: 0,\n            marginBottom: 0,\n            position: 'relative',\n            minWidth: '50px',\n          }}\n          value={currentTime}\n          total={duration}\n        >\n          {duration < Infinity && this.state.showTimestamp && (\n            <div\n              style={{\n                position: 'absolute',\n                bottom: '0px',\n                left: `calc(${this.state.posTimestamp * 100 + '% - 27px'})`,\n                pointerEvents: 'none',\n              }}\n            >\n              <Label basic color=\"blue\" pointing=\"below\">\n                <div style={{ width: '34px' }}>\n                  {formatTimestamp(this.state.currTimestamp)}\n                </div>\n              </Label>\n            </div>\n          )}\n        </Progress>\n        <div className=\"control\">{formatTimestamp(duration)}</div>\n        <Icon\n          size=\"large\"\n          onClick={() => {\n            toggleSubtitle();\n          }}\n          className=\"control action\"\n          name={subtitled ? 'closed captioning' : 'closed captioning outline'}\n          title=\"Captions\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(false)}\n          className=\"control action\"\n          style={{ transform: 'rotate(90deg)' }}\n          name=\"window maximize outline\"\n          title=\"Theater Mode\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(true)}\n          className=\"control action\"\n          name=\"expand\"\n          title=\"Fullscreen\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => {\n            toggleMute();\n            this.setState({ muted: !this.state.muted });\n          }}\n          className=\"control action\"\n          name={muted ? 'volume off' : 'volume up'}\n          title=\"Mute\"\n        />\n        <div style={{ width: '100px', marginRight: '10px' }}>\n          <Slider\n            value={volume}\n            color=\"blue\"\n            settings={{\n              min: 0,\n              max: 1,\n              step: 0.01,\n              onChange: (value: number) => {\n                this.setState({ volume: value });\n                this.props.setVolume(value);\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button, Table, Message, Dropdown } from 'semantic-ui-react';\nimport {\n  GoogleReCaptchaProvider,\n  withGoogleReCaptcha,\n} from 'react-google-recaptcha-v3';\nimport { SignInButton } from '../TopBar/TopBar';\nimport { serverPath } from '../../utils';\nimport firebase from 'firebase/compat/app';\n\nexport class VBrowserModal extends React.Component<{\n  closeModal: Function;\n  startVBrowser: Function;\n  isSubscriber: boolean;\n  subscribeButton: JSX.Element;\n  user?: firebase.User;\n  beta?: boolean;\n}> {\n  state = { isVMPoolFull: false, region: 'US', regionPlus: 'US' };\n  async componentDidMount() {\n    const resp = await window.fetch(serverPath + '/metadata');\n    const metadata = await resp.json();\n    // TODO make this check on region change\n    if (metadata.isVMPoolFull?.HetznerUS) {\n      this.setState({ isVMPoolFull: true });\n    }\n  }\n  render() {\n    const { closeModal, startVBrowser } = this.props;\n    const LaunchButton = withGoogleReCaptcha(\n      ({ googleReCaptchaProps, large }: any) => (\n        <Button\n          size=\"large\"\n          color={large ? 'orange' : undefined}\n          onClick={async () => {\n            const rcToken = await (\n              googleReCaptchaProps as any\n            ).executeRecaptcha('launchVBrowser');\n            startVBrowser(rcToken, {\n              size: large ? 'large' : '',\n              region: large ? this.state.regionPlus : this.state.region,\n            });\n            closeModal();\n          }}\n        >\n          {large ? 'Launch VBrowser+' : 'Continue with Free'}\n        </Button>\n      )\n    );\n    const vmPoolFullMessage = (\n      <Message\n        size=\"small\"\n        color=\"red\"\n        icon=\"hourglass two\"\n        style={{ width: '380px' }}\n        header=\"No Free VBrowsers Available\"\n        content={\n          <div>\n            <div>All of the free VBrowsers are currently being used.</div>\n            <div>\n              Please consider subscribing for anytime access to faster\n              VBrowsers, or try again later.\n            </div>\n          </div>\n        }\n      />\n    );\n\n    const options = [\n      { key: 'US', text: 'US', value: 'US', icon: 'flag' },\n      { key: 'EU', text: 'EU', value: 'EU', icon: 'flag' },\n    ];\n\n    return (\n      <GoogleReCaptchaProvider\n        reCaptchaKey={process.env.REACT_APP_RECAPTCHA_SITE_KEY as string}\n        useRecaptchaNet\n      >\n        <Modal open={true} onClose={closeModal as any}>\n          <Modal.Header>Launch a VBrowser</Modal.Header>\n          <Modal.Content image>\n            <Modal.Description>\n              <div>\n                You're about to launch a virtual browser to share in this room.\n              </div>\n              <Table definition unstackable striped celled>\n                <Table.Header>\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                    <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                  </Table.Row>\n                </Table.Header>\n\n                <Table.Body>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Resolution</Table.Cell>\n                    <Table.Cell>720p</Table.Cell>\n                    <Table.Cell>1080p</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                    <Table.Cell>Standard</Table.Cell>\n                    <Table.Cell>Extra</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Session Length</Table.Cell>\n                    <Table.Cell>3 hours</Table.Cell>\n                    <Table.Cell>24 hours</Table.Cell>\n                  </Table.Row>\n                  {this.props.beta && (\n                    <Table.Row>\n                      <Table.Cell>Region</Table.Cell>\n                      <Table.Cell>\n                        <Dropdown\n                          selection\n                          onChange={(e, { value }) =>\n                            this.setState({ region: value })\n                          }\n                          value={this.state.region}\n                          options={options}\n                        ></Dropdown>\n                      </Table.Cell>\n                      <Table.Cell>\n                        <Dropdown\n                          selection\n                          onChange={(e, { value }) =>\n                            this.setState({ regionPlus: value })\n                          }\n                          value={this.state.regionPlus}\n                          options={options}\n                        ></Dropdown>\n                      </Table.Cell>\n                    </Table.Row>\n                  )}\n                  <Table.Row>\n                    <Table.Cell></Table.Cell>\n                    <Table.Cell>\n                      {this.props.user ? (\n                        this.state.isVMPoolFull ? (\n                          vmPoolFullMessage\n                        ) : (\n                          <LaunchButton />\n                        )\n                      ) : (\n                        <SignInButton fluid user={this.props.user} />\n                      )}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {this.props.isSubscriber ? (\n                        <LaunchButton large />\n                      ) : (\n                        this.props.subscribeButton\n                      )}\n                    </Table.Cell>\n                  </Table.Row>\n                </Table.Body>\n              </Table>\n            </Modal.Description>\n          </Modal.Content>\n        </Modal>\n      </GoogleReCaptchaProvider>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Table, Icon } from 'semantic-ui-react';\n\nexport class PermanentRoomModal extends React.Component<{\n  closeModal: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any} closeIcon>\n        <Modal.Header>Permanent Rooms</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>\n              Registered users have the ability to make their rooms permanent.\n              Subscribed users can create multiple permanent rooms.\n            </div>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>Temporary</Table.HeaderCell>\n                  <Table.HeaderCell>Permanent</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                <Table.Row>\n                  <Table.Cell>Expiry</Table.Cell>\n                  <Table.Cell>After 24 hours of inactivity</Table.Cell>\n                  <Table.Cell>Never</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Room Passwords</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Disable Chat</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Kick Users</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs (subscribers)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity (subscribers)</Table.Cell>\n                    <Table.Cell>20</Table.Cell>\n                    <Table.Cell>100</Table.Cell>\n                  </Table.Row> */}\n              </Table.Body>\n            </Table>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useState, useCallback } from 'react';\nimport {\n  Icon,\n  Divider,\n  Radio,\n  CheckboxProps,\n  Message,\n  Input,\n  Button,\n  Label,\n} from 'semantic-ui-react';\n// import { SignInButton } from '../TopBar/TopBar';\nimport { getCurrentSettings, updateSettings } from './LocalSettings';\nimport axios from 'axios';\nimport { serverPath } from '../../utils';\nimport { PermanentRoomModal } from '../Modal/PermanentRoomModal';\nimport firebase from 'firebase/compat/app';\nimport { Socket } from 'socket.io-client';\n\ninterface SettingsTabProps {\n  hide: boolean;\n  user: firebase.User | undefined;\n  roomLock: string;\n  setRoomLock: Function;\n  socket: Socket;\n  isSubscriber: boolean;\n  roomId: string;\n  owner: string | undefined;\n  setOwner: Function;\n  vanity: string | undefined;\n  setVanity: Function;\n  roomLink: string;\n  password: string | undefined;\n  setPassword: Function;\n  isChatDisabled: boolean;\n  setIsChatDisabled: Function;\n  clearChat: Function;\n}\n\nexport const SettingsTab = ({\n  hide,\n  user,\n  roomLock,\n  setRoomLock,\n  socket,\n  isSubscriber,\n  owner,\n  vanity,\n  setVanity,\n  roomLink,\n  password,\n  setPassword,\n  isChatDisabled,\n  setIsChatDisabled,\n  clearChat,\n}: SettingsTabProps) => {\n  const [updateTS, setUpdateTS] = useState(0);\n  const [permModalOpen, setPermModalOpen] = useState(false);\n  const [validVanity, setValidVanity] = useState(true);\n  const [validVanityLoading, setValidVanityLoading] = useState(false);\n  const [adminSettingsChanged, setAdminSettingsChanged] = useState(false);\n\n  const setRoomState = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomState', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const setRoomOwner = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomOwner', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const checkValidVanity = useCallback(\n    async (input: string) => {\n      if (!input) {\n        setValidVanity(true);\n        return;\n      }\n      setValidVanity(false);\n      setValidVanityLoading(true);\n      const response = await axios.get(serverPath + '/resolveRoom/' + input);\n      const data = response.data;\n      setValidVanityLoading(false);\n      if (\n        data &&\n        data.vanity &&\n        data.vanity !== roomLink.split('/').slice(-1)[0]\n      ) {\n        // Already exists and doesn't match current room\n        setValidVanity(false);\n      } else {\n        setValidVanity(true);\n      }\n    },\n    [setValidVanity, roomLink]\n  );\n  const lockDisabled =\n    !Boolean(user) || Boolean(roomLock && roomLock !== user?.uid);\n  const permanentDisabled =\n    !Boolean(user) || Boolean(owner && owner !== user?.uid);\n\n  return (\n    <div\n      style={{\n        display: hide ? 'none' : 'block',\n        color: 'white',\n        overflow: 'scroll',\n        padding: '8px',\n      }}\n    >\n      {permModalOpen && (\n        <PermanentRoomModal\n          closeModal={() => setPermModalOpen(false)}\n        ></PermanentRoomModal>\n      )}\n      <div className=\"sectionHeader\">Room Settings</div>\n      {!user && (\n        <Message color=\"yellow\" size=\"tiny\">\n          You need to be signed in to change these settings.\n        </Message>\n      )}\n      <SettingRow\n        icon={roomLock ? 'lock' : 'lock open'}\n        name={`Lock Room`}\n        description=\"Only the person who locked the room can control the video.\"\n        checked={Boolean(roomLock)}\n        disabled={lockDisabled}\n        onChange={(_e, data) => setRoomLock(data.checked)}\n      />\n      {\n        <SettingRow\n          icon={'clock'}\n          name={`Make Room Permanent`}\n          description={\n            'Prevent this room from expiring. This also unlocks additional room features.'\n          }\n          helpIcon={\n            <Icon\n              name=\"help circle\"\n              onClick={() => setPermModalOpen(true)}\n              style={{ cursor: 'pointer' }}\n            ></Icon>\n          }\n          checked={Boolean(owner)}\n          disabled={permanentDisabled}\n          onChange={(_e, data) => setRoomOwner({ undo: !data.checked })}\n        />\n      }\n      {owner && owner === user?.uid && (\n        <div className=\"sectionHeader\">Admin Settings</div>\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'key'}\n          name={`Set Room Password`}\n          description=\"Users must know this password in order to join the room.\"\n          content={\n            <Input\n              value={password}\n              size=\"mini\"\n              onChange={(e) => {\n                setAdminSettingsChanged(true);\n                setPassword(e.target.value);\n              }}\n              fluid\n            />\n          }\n          disabled={false}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i cursor'}\n          name={`Disable Chat`}\n          description=\"Prevent users from sending messages in chat.\"\n          checked={Boolean(isChatDisabled)}\n          disabled={false}\n          onChange={(_e, data) => {\n            setAdminSettingsChanged(true);\n            setIsChatDisabled(Boolean(data.checked));\n          }}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i delete'}\n          name={`Clear Chat`}\n          description=\"Delete all existing chat messages\"\n          disabled={false}\n          content={\n            <Button\n              color=\"red\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => clearChat()}\n            >\n              <Icon name=\"delete\" />\n              Delete Messages\n            </Button>\n          }\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'linkify'}\n          name={`Set Custom Room URL`}\n          description=\"Set a custom URL for this room. Inappropriate names may be revoked.\"\n          checked={Boolean(roomLock)}\n          disabled={!isSubscriber}\n          subOnly={true}\n          content={\n            <React.Fragment>\n              <Input\n                value={vanity}\n                disabled={!isSubscriber}\n                onChange={(e) => {\n                  setAdminSettingsChanged(true);\n                  checkValidVanity(e.target.value);\n                  setVanity(e.target.value);\n                }}\n                label={<Label>{`${window.location.origin}/r/`}</Label>}\n                loading={validVanityLoading}\n                fluid\n                size=\"mini\"\n                icon\n                action={\n                  validVanity ? (\n                    <Icon name=\"checkmark\" color=\"green\" />\n                  ) : (\n                    <Icon name=\"close\" color=\"red\" />\n                  )\n                }\n              ></Input>\n            </React.Fragment>\n          }\n        />\n      )}\n      <p />\n      {owner && owner === user?.uid && (\n        <Button\n          primary\n          disabled={!validVanity || !adminSettingsChanged}\n          labelPosition=\"left\"\n          icon\n          fluid\n          onClick={() => {\n            setRoomState({\n              vanity: vanity,\n              password: password,\n              isChatDisabled: isChatDisabled,\n            });\n            setAdminSettingsChanged(false);\n          }}\n        >\n          <Icon name=\"save\" />\n          Save Admin Settings\n        </Button>\n      )}\n      {/* MEDIA_PATH */}\n      <div className=\"sectionHeader\">Local Settings</div>\n      <SettingRow\n        updateTS={updateTS}\n        icon=\"bell\"\n        name=\"Disable chat notification sound\"\n        description=\"Don't play a sound when a chat message is sent while you're on another tab\"\n        checked={Boolean(getCurrentSettings().disableChatSound)}\n        disabled={false}\n        onChange={(_e, data) => {\n          updateSettings(\n            JSON.stringify({\n              ...getCurrentSettings(),\n              disableChatSound: data.checked,\n            })\n          );\n          setUpdateTS(Number(new Date()));\n        }}\n      />\n    </div>\n  );\n};\n\nconst SettingRow = ({\n  icon,\n  name,\n  description,\n  checked,\n  disabled,\n  onChange,\n  content,\n  subOnly,\n  helpIcon,\n}: {\n  icon: string;\n  name: string;\n  description?: React.ReactNode;\n  checked?: boolean;\n  disabled: boolean;\n  updateTS?: number;\n  onChange?: (e: React.FormEvent, data: CheckboxProps) => void;\n  content?: React.ReactNode;\n  subOnly?: boolean;\n  helpIcon?: React.ReactNode;\n}) => {\n  return (\n    <React.Fragment>\n      <Divider inverted horizontal />\n      <div>\n        <div style={{ display: 'flex' }}>\n          <Icon size=\"large\" name={icon as any} />\n          <div>\n            {name} {helpIcon}\n            {subOnly ? (\n              <Label size=\"mini\" color=\"orange\">\n                Subscriber only\n              </Label>\n            ) : null}\n          </div>\n          {!content && (\n            <Radio\n              style={{ marginLeft: 'auto' }}\n              toggle\n              checked={checked}\n              disabled={disabled}\n              onChange={onChange}\n            />\n          )}\n        </div>\n        <div className=\"smallText\" style={{ marginBottom: '8px' }}>\n          {description}\n        </div>\n        {content}\n      </div>\n    </React.Fragment>\n  );\n};\n","import React from 'react';\nimport { Modal, Header, Button, Icon } from 'semantic-ui-react';\n\nexport const ErrorModal = ({ error }: { error: string }) => {\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        {error}\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Button\n          primary\n          size=\"huge\"\n          onClick={() => {\n            window.location.href = '/';\n          }}\n          icon\n          labelPosition=\"left\"\n        >\n          <Icon name=\"home\" />\n          Go to home page\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { Modal, Header, Input, Icon } from 'semantic-ui-react';\n\nexport const PasswordModal = ({\n  savedPasswords,\n  roomId,\n}: {\n  savedPasswords: StringDict;\n  roomId: string;\n}) => {\n  const setPassword = useCallback(() => {\n    window.localStorage.setItem(\n      'watchparty-passwords',\n      JSON.stringify({\n        ...savedPasswords,\n        [roomId]: (document.getElementById('roomPassword') as HTMLInputElement)\n          ?.value,\n      })\n    );\n    window.location.reload();\n  }, [savedPasswords, roomId]);\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        This room requires a password.\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Input\n          id=\"roomPassword\"\n          type=\"password\"\n          size=\"large\"\n          onKeyPress={(e: any) => e.key === 'Enter' && setPassword()}\n          icon={\n            <Icon onClick={setPassword} name=\"key\" inverted circular link />\n          }\n        />\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class ScreenShareModal extends React.Component<{\n  closeModal: Function;\n  startScreenShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share Your Screen</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share your screen.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To share audio, you need to check the \"Share audio\" checkbox in\n                the screen selection dialog.\n              </li>\n              <li>\n                Audio sharing is only supported if sharing your entire screen or\n                a browser tab, not an application.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startScreenShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Screenshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class FileShareModal extends React.Component<{\n  closeModal: Function;\n  startFileShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share A File</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share a file from your device.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To test whether the file can be shared, you can try opening it\n                locally with your browser to see if it will play properly.\n              </li>\n              <li>\n                Certain codecs, such as HEVC, AC3, and H265 will not play in\n                Chrome (they may work in Edge)\n              </li>\n              <li>\n                There is a Chrome issue where the sharer needs to{' '}\n                <a\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  href=\"https://www.howtogeek.com/412738/how-to-turn-hardware-acceleration-on-and-off-in-chrome/\"\n                >\n                  disable hardware acceleration\n                </a>{' '}\n                in order for others to receive video.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startFileShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Fileshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button, Popup, Icon, Grid, Radio } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\nimport { openFileSelector, serverPath } from '../../utils';\n\nexport class SubtitleModal extends React.Component<{\n  closeModal: Function;\n  currentSubtitle: string;\n  haveLock: Function;\n  src: string;\n  socket: Socket;\n}> {\n  state = {\n    loading: false,\n    searchResults: [],\n  };\n  uploadSubtitle = async () => {\n    const files = await openFileSelector('.srt');\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const reader = new FileReader();\n    reader.addEventListener('load', async (event) => {\n      const subData = event.target?.result;\n      // Upload to server\n      const resp = await window.fetch(serverPath + '/subtitle', {\n        method: 'POST',\n        body: subData,\n        headers: { 'Content-Type': 'text/plain' },\n      });\n      // Once URL obtained, make those the room subtitles\n      const json = await resp.json();\n      this.props.socket.emit(\n        'CMD:subtitle',\n        serverPath + '/subtitle/' + json.hash\n      );\n    });\n    reader.readAsText(file);\n  };\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>\n          Subtitles are {Boolean(this.props.currentSubtitle) ? 'on' : 'off'}\n          <Button\n            style={{ float: 'right' }}\n            color=\"red\"\n            title=\"Remove Subtitles\"\n            disabled={\n              !Boolean(this.props.currentSubtitle) || !this.props.haveLock()\n            }\n            icon\n            onClick={() => {\n              this.props.socket.emit('CMD:subtitle', null);\n            }}\n          >\n            <Icon name=\"trash\" />\n          </Button>\n        </Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            {process.env.NODE_ENV === 'development' && (\n              <div style={{ maxWidth: '600px' }}>\n                {this.props.currentSubtitle}\n              </div>\n            )}\n            <Grid columns={2}>\n              <Grid.Column>\n                <Popup\n                  content=\"Upload a .srt subtitle file for this video\"\n                  trigger={\n                    <Button\n                      color=\"violet\"\n                      icon\n                      labelPosition=\"left\"\n                      fluid\n                      onClick={() => this.uploadSubtitle()}\n                      disabled={!this.props.haveLock()}\n                    >\n                      <Icon name=\"closed captioning\" />\n                      Upload Subtitle\n                    </Button>\n                  }\n                />\n              </Grid.Column>\n              <Grid.Column>\n                <Button\n                  loading={this.state.loading}\n                  color=\"green\"\n                  disabled={!this.props.haveLock()}\n                  icon\n                  labelPosition=\"left\"\n                  fluid\n                  onClick={async () => {\n                    this.setState({ loading: true });\n                    const resp = await window.fetch(\n                      serverPath + '/searchSubtitles?url=' + this.props.src\n                    );\n                    const json = await resp.json();\n                    this.setState({ searchResults: json });\n                    this.setState({ loading: false });\n                  }}\n                >\n                  <Icon name=\"search\" />\n                  Search OpenSubtitles\n                </Button>\n              </Grid.Column>\n            </Grid>\n            <div>\n              {this.state.searchResults.map((result: any) => (\n                <div>\n                  <Radio\n                    label={result.SubFileName}\n                    name=\"radioGroup\"\n                    value={result.SubDownloadLink}\n                    checked={this.props.currentSubtitle?.includes(\n                      result.SubDownloadLink\n                    )}\n                    onChange={(e, { value }) => {\n                      this.props.socket.emit(\n                        'CMD:subtitle',\n                        serverPath + '/downloadSubtitles?url=' + value\n                      );\n                    }}\n                  />\n                </div>\n              ))}\n            </div>\n            {/* TODO add a spinner */}\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import './App.css';\n\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport magnet from 'magnet-uri';\nimport React from 'react';\nimport {\n  Button,\n  Dimmer,\n  Dropdown,\n  DropdownProps,\n  Grid,\n  Icon,\n  Input,\n  Loader,\n  Message,\n  Popup,\n  Progress,\n  Menu,\n  Modal,\n  Label,\n  SemanticCOLORS,\n} from 'semantic-ui-react';\nimport io, { Socket } from 'socket.io-client';\nimport { default as toWebVTT } from 'srt-webvtt';\nimport {\n  formatSpeed,\n  getMediaType,\n  iceServers,\n  isMobile,\n  serverPath,\n  testAutoplay,\n  openFileSelector,\n  getAndSaveClientId,\n  calculateMedian,\n  getUserImage,\n  getColorForString,\n} from '../../utils';\nimport { generateName } from '../../utils/generateName';\nimport { Chat } from '../Chat';\nimport { TopBar } from '../TopBar';\nimport { VBrowser } from '../VBrowser';\nimport { VideoChat } from '../VideoChat';\nimport { getCurrentSettings } from '../Settings';\nimport { MultiStreamModal } from '../Modal/MultiStreamModal';\nimport { ComboBox } from '../ComboBox/ComboBox';\nimport { SearchComponent } from '../SearchComponent/SearchComponent';\nimport { Controls } from '../Controls/Controls';\nimport { VBrowserModal } from '../Modal/VBrowserModal';\nimport { SettingsTab } from '../Settings/SettingsTab';\nimport { ErrorModal } from '../Modal/ErrorModal';\nimport { PasswordModal } from '../Modal/PasswordModal';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ScreenShareModal } from '../Modal/ScreenShareModal';\nimport { FileShareModal } from '../Modal/FileShareModal';\nimport firebase from 'firebase/compat/app';\nimport { SubtitleModal } from '../Modal/SubtitleModal';\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any;\n    YT: any;\n    FB: any;\n    fbAsyncInit: Function;\n    Hls: any;\n    watchparty: {\n      ourStream: MediaStream | undefined;\n      videoRefs: HTMLVideoElementDict;\n      videoPCs: PCDict;\n    };\n  }\n}\n\nwindow.watchparty = {\n  ourStream: undefined,\n  videoRefs: {},\n  videoPCs: {},\n};\n\ninterface AppProps {\n  vanity?: string;\n  user?: firebase.User;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}\n\ninterface AppState {\n  state: 'init' | 'starting' | 'connected';\n  currentMedia: string;\n  currentSubtitle: string;\n  currentMediaPaused: boolean;\n  participants: User[];\n  rosterUpdateTS: Number;\n  chat: ChatMessage[];\n  playlist: PlaylistVideo[];\n  tsMap: NumberDict;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  myName: string;\n  myPicture: string;\n  loading: boolean;\n  scrollTimestamp: number;\n  unreadCount: number;\n  fullScreen: boolean;\n  controlsTimestamp: number;\n  watchOptions: SearchResult[];\n  isScreenSharing: boolean;\n  isScreenSharingFile: boolean;\n  isVBrowser: boolean;\n  isYouTubeReady: boolean;\n  isAutoPlayable: boolean;\n  downloaded: number;\n  total: number;\n  speed: number;\n  connections: number;\n  multiStreamSelection?: any[];\n  error: string;\n  isErrorAuth: boolean;\n  settings: Settings;\n  vBrowserResolution: string;\n  isVBrowserLarge: boolean;\n  nonPlayableMedia: boolean;\n  currentTab: string;\n  isSubscribeModalOpen: boolean;\n  isVBrowserModalOpen: boolean;\n  isScreenShareModalOpen: boolean;\n  isFileShareModalOpen: boolean;\n  isSubtitleModalOpen: boolean;\n  roomLock: string;\n  controller?: string;\n  savedPasswords: StringDict;\n  roomId: string;\n  errorMessage: string;\n  successMessage: string;\n  isChatDisabled: boolean;\n  showRightBar: boolean;\n  owner: string | undefined;\n  vanity: string | undefined;\n  password: string | undefined;\n  roomLink: string;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n  state: AppState = {\n    state: 'starting',\n    currentMedia: '',\n    currentMediaPaused: false,\n    currentSubtitle: '',\n    participants: [],\n    rosterUpdateTS: Number(new Date()),\n    chat: [],\n    playlist: [],\n    tsMap: {},\n    nameMap: {},\n    pictureMap: {},\n    myName: '',\n    myPicture: '',\n    loading: true,\n    scrollTimestamp: 0,\n    unreadCount: 0,\n    fullScreen: false,\n    controlsTimestamp: 0,\n    watchOptions: [],\n    isScreenSharing: false,\n    isScreenSharingFile: false,\n    isVBrowser: false,\n    isYouTubeReady: false,\n    isAutoPlayable: true,\n    downloaded: 0,\n    total: 0,\n    speed: 0,\n    connections: 0,\n    multiStreamSelection: undefined,\n    error: '',\n    isErrorAuth: false,\n    settings: {},\n    vBrowserResolution: '1280x720@30',\n    isVBrowserLarge: false,\n    nonPlayableMedia: false,\n    currentTab:\n      (querystring.parse(window.location.search.substring(1)).tab as string) ||\n      'chat',\n    isSubscribeModalOpen: false,\n    isVBrowserModalOpen: false,\n    isScreenShareModalOpen: false,\n    isFileShareModalOpen: false,\n    isSubtitleModalOpen: false,\n    roomLock: '',\n    controller: '',\n    roomId: '',\n    savedPasswords: {},\n    errorMessage: '',\n    successMessage: '',\n    isChatDisabled: false,\n    showRightBar: true,\n    owner: undefined,\n    vanity: undefined,\n    password: undefined,\n    roomLink: '',\n  };\n  socket: Socket = null as any;\n  watchPartyYTPlayer: any = null;\n  ytDebounce = true;\n  screenShareStream?: MediaStream;\n  screenHostPC: PCDict = {};\n  screenSharePC?: RTCPeerConnection;\n  progressUpdater?: number;\n  heartbeat: number | undefined = undefined;\n\n  async componentDidMount() {\n    document.onfullscreenchange = this.onFullScreenChange;\n    document.onkeydown = this.onKeydown;\n\n    // Send heartbeat to the server\n    this.heartbeat = window.setInterval(() => {\n      window.fetch(serverPath + '/ping');\n    }, 10 * 60 * 1000);\n\n    const canAutoplay = await testAutoplay();\n    this.setState({ isAutoPlayable: canAutoplay });\n    this.loadSettings();\n    this.loadYouTube();\n    this.init();\n  }\n\n  getRoomLink = (vanity: string) => {\n    if (vanity) {\n      return `${window.location.origin}/r/${vanity}`;\n    }\n    return `${window.location.origin}${this.state.roomId.replace('/', '#')}`;\n  };\n\n  handleRoomState = (data: any) => {\n    this.setOwner(data.owner);\n    this.setVanity(data.vanity);\n    this.setPassword(data.password);\n    this.setRoomLink(this.getRoomLink(data.vanity));\n    this.setIsChatDisabled(data.isChatDisabled);\n    window.history.replaceState('', '', this.getRoomLink(data.vanity));\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.onFullScreenChange);\n    document.removeEventListener('keydown', this.onKeydown);\n    window.clearInterval(this.heartbeat);\n  }\n\n  componentDidUpdate(prevProps: AppProps) {\n    if (this.props.user && !prevProps.user) {\n      this.loadSignInData();\n    }\n  }\n\n  loadSettings = async () => {\n    // Load settings from localstorage and remote\n    const customSettingsData = await fetch(serverPath + '/settings');\n    const customSettings = await customSettingsData.json();\n    let settings = { ...getCurrentSettings(), ...customSettings };\n    this.setState({ settings });\n  };\n\n  loadSignInData = async () => {\n    const user = this.props.user;\n    if (user && this.socket) {\n      // NOTE: firebase auth doesn't provide the actual first name data that individual providers (G/FB) do\n      // It's accessible at the time the user logs in but not afterward\n      // If we want accurate surname/given name we'll need to save that somewhere\n      const firstName = user.displayName?.split(' ')[0];\n      if (firstName) {\n        this.updateName(null, { value: firstName });\n      }\n      const userImage = await getUserImage(user);\n      if (userImage) {\n        this.updatePicture(userImage);\n      }\n      this.updateUid(user);\n    }\n  };\n\n  loadYouTube = () => {\n    // This code loads the IFrame Player API code asynchronously.\n    const tag = document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    document.body.append(tag);\n    window.onYouTubeIframeAPIReady = () => {\n      // Note: this fails silently if the element is not available\n      const ytPlayer = new window.YT.Player('leftYt', {\n        events: {\n          onReady: () => {\n            this.watchPartyYTPlayer = ytPlayer;\n            this.setState({ isYouTubeReady: true, loading: false });\n            // We might have failed to play YT originally, ask for the current video again\n            if (this.isYouTube()) {\n              this.socket.emit('CMD:askHost');\n            }\n          },\n          onStateChange: (e: any) => {\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.CUED\n            ) {\n              this.setState({ loading: false });\n            }\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.ENDED\n            ) {\n              this.onVideoEnded();\n            }\n            // console.log(this.ytDebounce, e.data, this.watchPartyYTPlayer?.getVideoUrl());\n            if (\n              this.ytDebounce &&\n              ((e.data === window.YT?.PlayerState?.PLAYING &&\n                this.state.currentMediaPaused) ||\n                (e.data === window.YT?.PlayerState?.PAUSED &&\n                  !this.state.currentMediaPaused))\n            ) {\n              this.ytDebounce = false;\n              if (e.data === window.YT?.PlayerState?.PLAYING) {\n                this.socket.emit('CMD:play');\n                this.doPlay();\n              } else {\n                this.socket.emit('CMD:pause');\n                this.doPause();\n              }\n              window.setTimeout(() => (this.ytDebounce = true), 500);\n            }\n          },\n        },\n      });\n    };\n  };\n\n  setOwner = (owner: string) => {\n    this.setState({ owner });\n  };\n  setVanity = (vanity: string | undefined) => {\n    this.setState({ vanity });\n  };\n  setPassword = (password: string | undefined) => {\n    this.setState({ password });\n  };\n  setRoomLink = (roomLink: string) => {\n    this.setState({ roomLink });\n  };\n\n  init = async () => {\n    // Load room ID from url\n    let roomId = '/default';\n    let query = window.location.hash.substring(1);\n    if (query) {\n      roomId = '/' + query;\n    }\n    // if a vanity name, resolve the url to a room id\n    if (this.props.vanity) {\n      try {\n        const response = await axios.get(\n          serverPath + '/resolveRoom/' + this.props.vanity\n        );\n        if (response.data.roomId) {\n          roomId = response.data.roomId;\n        } else {\n          throw new Error('failed to resolve room name');\n        }\n      } catch (e) {\n        console.error(e);\n        this.setState({ error: \"There's no room with this name.\" });\n        return;\n      }\n    }\n    this.setState({ roomId }, () => {\n      this.join(roomId);\n    });\n  };\n\n  join = async (roomId: string) => {\n    let password = '';\n    try {\n      const savedPasswordsString = window.localStorage.getItem(\n        'watchparty-passwords'\n      );\n      const savedPasswords = JSON.parse(savedPasswordsString || '{}');\n      this.setState({ savedPasswords });\n      password = savedPasswords[roomId] || '';\n    } catch (e) {\n      console.warn('[ALERT] Could not parse saved passwords');\n    }\n    let shard = '';\n    if (/^\\d/.test(roomId.slice(1))) {\n      // Rooms assigned to shards start with a number\n      shard = /^\\d+/.exec(roomId.slice(1))?.[0] ?? '';\n    }\n    const socket = io(serverPath + roomId, {\n      transports: ['websocket'],\n      query: {\n        clientId: getAndSaveClientId(),\n        password,\n        shard,\n      },\n    });\n    this.socket = socket;\n    socket.on('connect', async () => {\n      this.setState({ state: 'connected' });\n      // Load username from localstorage\n      let userName = window.localStorage.getItem('watchparty-username');\n      this.updateName(null, { value: userName || generateName() });\n      this.loadSignInData();\n    });\n    socket.on('error', (err: any) => {\n      console.error(err);\n      if (err === 'Invalid namespace') {\n        this.setState({ error: \"There's no room with this name.\" });\n      } else if (err === 'not authorized') {\n        this.setState({ isErrorAuth: true });\n      } else if (err === 'room full') {\n        this.setState({ error: 'This room is full.' });\n      } else {\n        this.setState({ error: 'An error occurred.' });\n      }\n    });\n    socket.on('errorMessage', (err: string) => {\n      this.setState({ errorMessage: err });\n      setTimeout(() => {\n        this.setState({ errorMessage: '' });\n      }, 3000);\n    });\n    socket.on('successMessage', (success: string) => {\n      this.setState({ successMessage: success });\n      setTimeout(() => {\n        this.setState({ successMessage: '' });\n      }, 3000);\n    });\n    socket.on('kicked', () => {\n      window.location.assign('/');\n    });\n    socket.on('REC:play', () => {\n      this.doPlay();\n    });\n    socket.on('REC:pause', () => {\n      this.doPause();\n    });\n    socket.on('REC:seek', (data: any) => {\n      this.doSeek(data);\n    });\n    socket.on('REC:subtitle', (data: string) => {\n      this.setState({ currentSubtitle: data }, () => {\n        this.loadSubtitles();\n      });\n    });\n    socket.on('REC:changeController', (data: string) => {\n      this.setState({ controller: data });\n    });\n    socket.on('REC:host', async (data: HostState) => {\n      let currentMedia = data.video || '';\n      if (this.isScreenShare() && !currentMedia.startsWith('screenshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isFileShare() && !currentMedia.startsWith('fileshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isScreenShare() && currentMedia.startsWith('screenshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isFileShare() && currentMedia.startsWith('fileshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isVBrowser() && !currentMedia.startsWith('vbrowser://')) {\n        this.stopVBrowser();\n      }\n      this.setState(\n        {\n          currentMedia,\n          currentMediaPaused: data.paused,\n          currentSubtitle: data.subtitle,\n          loading: Boolean(data.video),\n          nonPlayableMedia: false,\n          isVBrowserLarge: data.isVBrowserLarge,\n          vBrowserResolution: data.isVBrowserLarge\n            ? '1920x1080@30'\n            : '1280x720@30',\n          controller: data.controller,\n        },\n        () => {\n          if (\n            this.state.isScreenSharingFile ||\n            (this.isVBrowser() && this.getVBrowserHost())\n          ) {\n            console.log(\n              'skipping REC:host video since fileshare is using leftVideo or this is a vbrowser'\n            );\n            this.setLoadingFalse();\n            return;\n          }\n          // Stop all players\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          leftVideo?.pause();\n          this.watchPartyYTPlayer?.stopVideo();\n\n          if (this.isYouTube() && !this.watchPartyYTPlayer) {\n            console.log(\n              'YT player not ready, onReady callback will retry when it is'\n            );\n          } else if (this.isVBrowser()) {\n            console.log(\n              'not playing video as this is a vbrowser:// placeholder'\n            );\n          } else {\n            // Start this video\n            this.doSrc(data.video, data.videoTS);\n            if (!data.paused) {\n              this.doPlay();\n            }\n            if (data.subtitle) {\n              this.loadSubtitles();\n            }\n            // One time, when we're ready to play\n            leftVideo?.addEventListener(\n              'canplay',\n              () => {\n                this.setLoadingFalse();\n                this.jumpToLeader();\n              },\n              { once: true }\n            );\n\n            // Progress updater\n            window.clearInterval(this.progressUpdater);\n            this.setState({ downloaded: 0, total: 0, speed: 0 });\n            if (currentMedia.includes('/stream?torrent=magnet')) {\n              this.progressUpdater = window.setInterval(async () => {\n                const response = await window.fetch(\n                  currentMedia.replace('/stream', '/progress')\n                );\n                const data = await response.json();\n                this.setState({\n                  downloaded: data.downloaded,\n                  total: data.total,\n                  speed: data.speed,\n                  connections: data.connections,\n                });\n              }, 1000);\n            }\n          }\n        }\n      );\n    });\n    socket.on('REC:chat', (data: ChatMessage) => {\n      if (\n        !getCurrentSettings().disableChatSound &&\n        ((document.visibilityState && document.visibilityState !== 'visible') ||\n          this.state.currentTab !== 'chat')\n      ) {\n        new Audio('/clearly.mp3').play();\n      }\n      this.state.chat.push(data);\n      this.setState({\n        chat: this.state.chat,\n        scrollTimestamp: Number(new Date()),\n        unreadCount:\n          this.state.currentTab === 'chat'\n            ? this.state.unreadCount\n            : this.state.unreadCount + 1,\n      });\n    });\n    socket.on('REC:tsMap', (data: NumberDict) => {\n      this.setState({ tsMap: data });\n      this.syncSubtitle();\n    });\n    socket.on('REC:nameMap', (data: StringDict) => {\n      this.setState({ nameMap: data });\n    });\n    socket.on('REC:pictureMap', (data: StringDict) => {\n      this.setState({ pictureMap: data });\n    });\n    socket.on('REC:lock', (data: string) => {\n      this.setState({ roomLock: data });\n    });\n    socket.on('roster', (data: User[]) => {\n      this.setState(\n        { participants: data, rosterUpdateTS: Number(new Date()) },\n        () => {\n          this.updateScreenShare();\n        }\n      );\n    });\n    socket.on('chatinit', (data: ChatMessage[]) => {\n      this.setState({ chat: data, scrollTimestamp: Number(new Date()) });\n    });\n    socket.on('playlist', (data: PlaylistVideo[]) => {\n      this.setState({ playlist: data });\n    });\n    socket.on('signalSS', async (data: any) => {\n      // Handle messages received from signaling server\n      const msg = data.msg;\n      const from = data.from;\n      // Determine whether the message came from the sharer or the sharee\n      const pc = (\n        data.sharer ? this.screenSharePC : this.screenHostPC[from]\n      ) as RTCPeerConnection;\n      if (msg.ice !== undefined) {\n        pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n      } else if (msg.sdp && msg.sdp.type === 'offer') {\n        // console.log('offer');\n        // TODO Currently ios/Safari cannot handle this property, so remove it from the offer\n        const _sdp = msg.sdp.sdp\n          .split('\\n')\n          .filter((line: string) => {\n            return line.trim() !== 'a=extmap-allow-mixed';\n          })\n          .join('\\n');\n        msg.sdp.sdp = _sdp;\n        await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n        const answer = await pc.createAnswer();\n        answer.sdp = answer.sdp?.replace(\n          'useinbandfec=1',\n          'useinbandfec=1; stereo=1; maxaveragebitrate=510000'\n        );\n        await pc.setLocalDescription(answer);\n        this.sendSignalSS(from, { sdp: pc.localDescription }, !data.sharer);\n      } else if (msg.sdp && msg.sdp.type === 'answer') {\n        pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      }\n    });\n    socket.on('REC:getRoomState', this.handleRoomState);\n    window.setInterval(() => {\n      if (this.state.currentMedia) {\n        this.socket.emit('CMD:ts', this.getCurrentTime());\n      }\n    }, 1000);\n  };\n\n  setupFileShare = async () => {\n    const files = await openFileSelector();\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    leftVideo.srcObject = null;\n    leftVideo.src = URL.createObjectURL(file);\n    leftVideo.play();\n    //@ts-ignore\n    const stream = leftVideo.captureStream ? leftVideo.captureStream() : {};\n    // Can render video to a canvas to resize it, reduce size\n    stream.onaddtrack = () => {\n      console.log(stream, stream.getVideoTracks(), stream.getAudioTracks());\n      if (\n        !this.screenShareStream &&\n        stream.getVideoTracks().length &&\n        stream.getAudioTracks().length\n      ) {\n        stream.getVideoTracks()[0].onended = this.stopScreenShare;\n        this.screenShareStream = stream;\n        this.socket.emit('CMD:joinScreenShare', { file: true });\n        this.setState({ isScreenSharing: true, isScreenSharingFile: true });\n        stream.onaddtrack = undefined;\n      }\n    };\n  };\n\n  setupScreenShare = async () => {\n    //@ts-ignore\n    if (navigator.mediaDevices.getDisplayMedia) {\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        //@ts-ignore\n        video: { height: 720, logicalSurface: true },\n        audio: {\n          autoGainControl: false,\n          channelCount: 2,\n          echoCancellation: false,\n          latency: 0,\n          noiseSuppression: false,\n          sampleRate: 48000,\n          sampleSize: 16,\n        },\n      });\n      stream.getVideoTracks()[0].onended = this.stopScreenShare;\n      this.screenShareStream = stream;\n      this.socket.emit('CMD:joinScreenShare');\n      this.setState({ isScreenSharing: true });\n    }\n  };\n\n  stopScreenShare = async () => {\n    this.screenShareStream &&\n      this.screenShareStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.screenShareStream = undefined;\n    if (this.screenSharePC) {\n      this.screenSharePC.close();\n      this.screenSharePC = undefined;\n    }\n    Object.values(this.screenHostPC).forEach((pc) => {\n      pc.close();\n    });\n    this.screenHostPC = {};\n    if (this.state.isScreenSharing) {\n      this.socket.emit('CMD:leaveScreenShare');\n    }\n    this.setState({ isScreenSharing: false, isScreenSharingFile: false });\n  };\n\n  updateScreenShare = async () => {\n    if (!this.isScreenShare() && !this.isFileShare()) {\n      return;\n    }\n    // TODO teardown for those who leave\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (sharer && sharer.id === this.socket.id) {\n      // We're the sharer, create a connection to each other member\n      this.state.participants.forEach((user) => {\n        const id = user.id;\n        if (id === this.socket.id && this.state.isScreenSharingFile) {\n          // Don't set up a connection to ourselves if sharing file\n          return;\n        }\n        if (!this.screenHostPC[id]) {\n          // Set up the RTCPeerConnection for sharing media to each member\n          const pc = new RTCPeerConnection({ iceServers: iceServers() });\n          this.screenHostPC[id] = pc;\n          this.screenShareStream?.getTracks().forEach((track) => {\n            if (this.screenShareStream != null) {\n              pc.addTrack(track, this.screenShareStream);\n            }\n          });\n          pc.onicecandidate = (event) => {\n            // We generated an ICE candidate, send it to peer\n            if (event.candidate) {\n              this.sendSignalSS(id, { ice: event.candidate }, true);\n            }\n          };\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignalSS(id, { sdp: pc.localDescription }, true);\n          };\n        }\n      });\n    }\n    // We're a watcher, establish connection to sharer\n    // If screensharing, sharer also does this\n    // If filesharing, sharer does not do this since we use leftVideo\n    if (sharer && !this.screenSharePC && !this.state.isScreenSharingFile) {\n      const pc = new RTCPeerConnection({ iceServers: iceServers() });\n      this.screenSharePC = pc;\n      pc.onicecandidate = (event) => {\n        // We generated an ICE candidate, send it to peer\n        if (event.candidate) {\n          this.sendSignalSS(sharer.id, { ice: event.candidate });\n        }\n      };\n      pc.ontrack = (event: RTCTrackEvent) => {\n        // Mount the stream from peer\n        // console.log(stream);\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        if (leftVideo) {\n          leftVideo.src = '';\n          leftVideo.srcObject = event.streams[0];\n          this.doPlay();\n        }\n      };\n    }\n  };\n\n  startVBrowser = async (rcToken: string, options: { size: string }) => {\n    // user.uid is the public user identifier\n    // user.getIdToken() is the secret access token we can send to the server to prove identity\n    const user = this.props.user;\n    const uid = user?.uid;\n    const token = await user?.getIdToken();\n    this.socket.emit('CMD:startVBrowser', { options, uid, token, rcToken });\n  };\n\n  stopVBrowser = async () => {\n    this.socket.emit('CMD:stopVBrowser');\n  };\n\n  changeController = async (_e: any, data: DropdownProps) => {\n    // console.log(data);\n    this.socket.emit('CMD:changeController', data.value);\n  };\n\n  sendSignalSS = async (to: string, data: any, sharer?: boolean) => {\n    // console.log('sendSS', to, data);\n    this.socket.emit('signalSS', { to, msg: data, sharer });\n  };\n\n  isYouTube = () => {\n    return getMediaType(this.state.currentMedia) === 'youtube';\n  };\n\n  isVideo = () => {\n    return getMediaType(this.state.currentMedia) === 'video';\n  };\n\n  isScreenShare = () => {\n    return this.state.currentMedia.startsWith('screenshare://');\n  };\n\n  isFileShare = () => {\n    return this.state.currentMedia.startsWith('fileshare://');\n  };\n\n  isVBrowser = () => {\n    return this.state.currentMedia.startsWith('vbrowser://');\n  };\n\n  isHttp = () => {\n    return this.state.currentMedia.startsWith('http');\n  };\n\n  getVBrowserPass = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[0];\n  };\n\n  getVBrowserHost = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[1];\n  };\n\n  getCurrentTime = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.currentTime;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getCurrentTime();\n    }\n  };\n\n  getDuration = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.duration;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getDuration();\n    }\n    return 0;\n  };\n\n  isPauseDisabled = () => {\n    return this.isScreenShare() || this.isVBrowser();\n  };\n\n  isMuted = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.muted;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.isMuted();\n    }\n    return false;\n  };\n\n  isSubtitled = () => {\n    if (this.isVideo()) {\n      return Boolean(this.state.currentSubtitle);\n    }\n    if (this.isYouTube()) {\n      try {\n        const current = this.watchPartyYTPlayer?.getOption('captions', 'track');\n        return Boolean(current && current.languageCode);\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n    }\n    return false;\n  };\n\n  jumpToLeader = () => {\n    // Jump to the leader's position\n    const maxTS = this.getLeaderTime();\n    if (maxTS > 0) {\n      console.log('jump to leader at ', maxTS);\n      this.doSeek(maxTS);\n    }\n  };\n\n  doSrc = async (src: string, time: number) => {\n    console.log('doSrc', src, time);\n    if (this.isScreenShare() || this.isFileShare() || this.isVBrowser()) {\n      // No-op as we'll set video when WebRTC completes\n      return;\n    }\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.srcObject = null;\n        leftVideo.src = src;\n        leftVideo.currentTime = time;\n        // Clear subtitles\n        leftVideo.innerHTML = '';\n      }\n    }\n    if (this.isYouTube()) {\n      let url = new window.URL(src);\n      // Standard link https://www.youtube.com/watch?v=ID\n      let videoId = querystring.parse(url.search.substring(1))['v'];\n      // Link shortener https://youtu.be/ID\n      let altVideoId = src.split('/').slice(-1)[0];\n      this.watchPartyYTPlayer?.cueVideoById(videoId || altVideoId, time);\n    }\n  };\n\n  doPlay = async () => {\n    const canAutoplay = this.state.isAutoPlayable || (await testAutoplay());\n    this.setState(\n      { currentMediaPaused: false, isAutoPlayable: canAutoplay },\n      async () => {\n        if (this.isVideo()) {\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          //check for HLS\n          let lv = leftVideo?.src.split('.');\n          if (\n            lv[lv.length - 1] === 'm3u8' &&\n            !leftVideo?.canPlayType('application/vnd.apple.mpegurl')\n          ) {\n            let hls = new window.Hls();\n            hls.loadSource(leftVideo.src);\n            hls.attachMedia(leftVideo);\n          }\n          try {\n            if (this.state.isAutoPlayable) {\n              this.setMute(false);\n            } else {\n              this.setMute(true);\n            }\n            await leftVideo?.play();\n          } catch (e: any) {\n            console.warn(e);\n            if (e.name === 'NotSupportedError') {\n              this.setState({ loading: false, nonPlayableMedia: true });\n            }\n          }\n        }\n        if (this.isYouTube()) {\n          setTimeout(() => {\n            console.log('play yt');\n            this.watchPartyYTPlayer?.playVideo();\n          }, 200);\n        }\n      }\n    );\n  };\n\n  doPause = () => {\n    this.setState({ currentMediaPaused: true }, async () => {\n      if (this.isVideo()) {\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        leftVideo.pause();\n      }\n      if (this.isYouTube()) {\n        console.log('pause');\n        this.watchPartyYTPlayer?.pauseVideo();\n      }\n    });\n  };\n\n  doSeek = (time: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.currentTime = time;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.seekTo(time, true);\n    }\n  };\n\n  togglePlay = () => {\n    if (this.isPauseDisabled()) {\n      return;\n    }\n    let shouldPlay = true;\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      shouldPlay = leftVideo.paused || leftVideo.ended;\n    } else if (this.isYouTube()) {\n      shouldPlay =\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState.PAUSED ||\n        this.getCurrentTime() === this.getDuration();\n    }\n    if (shouldPlay) {\n      this.socket.emit('CMD:play');\n      this.doPlay();\n    } else {\n      this.socket.emit('CMD:pause');\n      this.doPause();\n    }\n  };\n\n  onSeek = (e: any, time: number) => {\n    let target = time;\n    if (e) {\n      const rect = e.target.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const max = rect.width;\n      target = (x / max) * this.getDuration();\n    }\n    target = Math.max(target, 0);\n    this.doSeek(target);\n    this.socket.emit('CMD:seek', target);\n  };\n\n  onFullScreenChange = () => {\n    this.setState({ fullScreen: Boolean(document.fullscreenElement) });\n  };\n\n  onKeydown = (e: any) => {\n    if (!document.activeElement || document.activeElement.tagName === 'BODY') {\n      if (e.key === ' ') {\n        e.preventDefault();\n        this.togglePlay();\n      } else if (e.key === 'ArrowRight') {\n        this.onSeek(null, this.getCurrentTime() + 10);\n      } else if (e.key === 'ArrowLeft') {\n        this.onSeek(null, this.getCurrentTime() - 10);\n      } else if (e.key === 'c') {\n        this.toggleSubtitle();\n      } else if (e.key === 't') {\n        this.fullScreen(false);\n      } else if (e.key === 'f') {\n        this.fullScreen(true);\n      } else if (e.key === 'm') {\n        this.toggleMute();\n      }\n    }\n  };\n\n  fullScreen = async (bVideoOnly: boolean) => {\n    let container = document.getElementById('theaterContainer') as HTMLElement;\n    if (bVideoOnly || isMobile()) {\n      if (this.isVBrowser() && !isMobile()) {\n        // Can't really control the VBrowser on mobile anyway, so just fullscreen the video\n        // https://github.com/howardchung/watchparty/issues/208\n        container = document.getElementById('leftVideoParent') as HTMLElement;\n      } else {\n        container = document.getElementById(\n          this.isYouTube() ? 'leftYt' : 'leftVideo'\n        ) as HTMLElement;\n      }\n    }\n    if (\n      !container.requestFullscreen &&\n      (container as any).webkitEnterFullScreen\n    ) {\n      // e.g. iPhone doesn't allow requestFullscreen\n      (container as any).webkitEnterFullscreen();\n      return;\n    }\n    if (!document.fullscreenElement) {\n      await container.requestFullscreen();\n      return;\n    }\n    const bChangeElements = document.fullscreenElement !== container;\n    await document.exitFullscreen();\n    if (bChangeElements) {\n      await container.requestFullscreen();\n    }\n  };\n\n  toggleMute = () => {\n    this.setMute(!this.isMuted());\n  };\n\n  setMute = (muted: boolean) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.muted = muted;\n      }\n      const audio = document.getElementById('iPhoneAudio') as HTMLAudioElement;\n      if (audio) {\n        audio.muted = muted;\n      }\n    }\n    if (this.isYouTube()) {\n      if (muted) {\n        this.watchPartyYTPlayer?.mute();\n      } else {\n        this.watchPartyYTPlayer?.unMute();\n      }\n    }\n  };\n\n  setVolume = (volume: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.volume = volume;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.setVolume(volume * 100);\n    }\n  };\n\n  getVolume = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.volume;\n    }\n    if (this.isYouTube()) {\n      const volume = this.watchPartyYTPlayer?.getVolume();\n      return volume / 100;\n    }\n  };\n\n  loadSubtitles = async () => {\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    if (!this.isSubtitled()) {\n      leftVideo.innerHTML = '';\n    } else {\n      // Clear subtitles and put new ones in\n      leftVideo.innerHTML = '';\n      let subtitleSrc = this.state.currentSubtitle;\n      if (subtitleSrc) {\n        const response = await window.fetch(subtitleSrc);\n        const buffer = await response.arrayBuffer();\n        const url = await toWebVTT(new Blob([buffer]));\n        const track = document.createElement('track');\n        track.kind = 'captions';\n        track.label = 'English';\n        track.srclang = 'en';\n        track.src = url;\n        leftVideo.appendChild(track);\n        leftVideo.textTracks[0].mode = 'showing';\n      }\n    }\n  };\n\n  syncSubtitle = () => {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (!sharer || sharer.id === this.socket.id) {\n      return;\n    }\n    // When sharing, our timestamp doesn't match the subtitles so adjust them\n    // For each cue, subtract the videoTS of the sharer, then add our own\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    const track = leftVideo?.textTracks[0];\n    let offset = leftVideo.currentTime - this.state.tsMap[sharer.id];\n    if (track && track.cues && offset) {\n      for (let i = 0; i < track.cues.length; i++) {\n        let cue = track?.cues?.[i];\n        if (!cue) {\n          continue;\n        }\n        // console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\n        if (!(cue as any).origStart) {\n          (cue as any).origStart = cue.startTime;\n          (cue as any).origEnd = cue.endTime;\n        }\n        cue.startTime = (cue as any).origStart + offset;\n        cue.endTime = (cue as any).origEnd + offset;\n      }\n    }\n  };\n\n  toggleSubtitle = () => {\n    if (this.isVideo()) {\n      this.setState({ isSubtitleModalOpen: true });\n    }\n    if (this.isYouTube()) {\n      const isSubtitled = this.isSubtitled();\n      // console.log(isSubtitled);\n      if (isSubtitled) {\n        // BUG this doesn't actually set the value so subtitles can't be toggled off\n        this.watchPartyYTPlayer?.setOption('captions', 'track', {});\n      } else {\n        this.watchPartyYTPlayer?.setOption('captions', 'reload', true);\n        const tracks = this.watchPartyYTPlayer?.getOption(\n          'captions',\n          'tracklist'\n        );\n        this.watchPartyYTPlayer?.setOption('captions', 'track', tracks?.[0]);\n      }\n    }\n  };\n\n  setMedia = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:host', data.value);\n  };\n\n  playlistAdd = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:playlistAdd', data.value);\n  };\n\n  playlistMove = (index: number, toIndex: number) => {\n    this.socket.emit('CMD:playlistMove', { index, toIndex });\n  };\n\n  playlistDelete = (index: number) => {\n    this.socket.emit('CMD:playlistDelete', index);\n  };\n\n  launchMultiSelect = (data: any) => {\n    this.setState({ multiStreamSelection: data });\n  };\n\n  resetMultiSelect = () => {\n    this.setState({ multiStreamSelection: undefined });\n  };\n\n  updateName = (_e: any, data: { value: string }) => {\n    this.setState({ myName: data.value });\n    this.socket.emit('CMD:name', data.value);\n    window.localStorage.setItem('watchparty-username', data.value);\n  };\n\n  updatePicture = (url: string) => {\n    this.setState({ myPicture: url });\n    this.socket.emit('CMD:picture', url);\n  };\n\n  updateUid = async (user: firebase.User) => {\n    const uid = user.uid;\n    const token = await user.getIdToken();\n    this.socket.emit('CMD:uid', { uid, token });\n  };\n\n  getMediaDisplayName = (input: string) => {\n    if (!input) {\n      return '';\n    }\n    // Show the whole URL for youtube\n    if (getMediaType(input) === 'youtube') {\n      return input;\n    }\n    if (input.startsWith('screenshare://')) {\n      let id = input.slice('screenshare://'.length);\n      return this.state.nameMap[id] + \"'s screen\";\n    }\n    if (input.startsWith('fileshare://')) {\n      let id = input.slice('fileshare://'.length);\n      return this.state.nameMap[id] + \"'s file\";\n    }\n    if (input.startsWith('vbrowser://')) {\n      return 'Virtual Browser' + (this.state.isVBrowserLarge ? '+' : '');\n    }\n    if (input.includes('/stream?torrent=magnet')) {\n      const search = new URL(input).search;\n      const magnetUrl = querystring.parse(search.substring(1))\n        .torrent as string;\n      const magnetParsed = magnet.decode(magnetUrl);\n      return magnetParsed.name;\n    }\n    // Get the filename out of the URL\n    return input;\n  };\n\n  getFileName = (input: string) => {\n    return input.split('/').slice(-1)[0];\n  };\n\n  setLoadingFalse = () => {\n    this.setState({ loading: false });\n  };\n\n  setRoomLock = async (locked: boolean) => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:lock', { uid, token, locked });\n  };\n\n  haveLock = () => {\n    if (!this.state.roomLock) {\n      return true;\n    }\n    return this.props.user?.uid === this.state.roomLock;\n  };\n\n  setIsChatDisabled = (val: boolean) => this.setState({ isChatDisabled: val });\n\n  clearChat = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:deleteChatMessages', { uid, token });\n  };\n\n  getLeaderTime = () => {\n    if (this.state.participants.length > 2) {\n      return calculateMedian(Object.values(this.state.tsMap));\n    }\n    return Math.max(...Object.values(this.state.tsMap));\n  };\n\n  onVideoEnded = () => {\n    this.socket.emit('CMD:playlistNext', this.state.currentMedia);\n    // Play next\n    if (this.state.currentMedia?.includes('/stream?torrent=magnet')) {\n      const url = new URL(this.state.currentMedia);\n      const fileIndex = url.searchParams.get('fileIndex');\n      if (fileIndex != null) {\n        url.searchParams.set('fileIndex', (Number(fileIndex) + 1).toString());\n        this.setMedia(null, { value: url.toString() });\n      }\n    }\n  };\n\n  render() {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    const controls = (\n      <Controls\n        key={this.state.controlsTimestamp}\n        togglePlay={this.togglePlay}\n        onSeek={this.onSeek}\n        fullScreen={this.fullScreen}\n        toggleMute={this.toggleMute}\n        toggleSubtitle={this.toggleSubtitle}\n        setVolume={this.setVolume}\n        jumpToLeader={this.jumpToLeader}\n        paused={this.state.currentMediaPaused}\n        muted={this.isMuted()}\n        subtitled={this.isSubtitled()}\n        currentTime={this.getCurrentTime()}\n        duration={this.getDuration()}\n        disabled={!this.haveLock()}\n        leaderTime={this.isHttp() ? this.getLeaderTime() : undefined}\n        isPauseDisabled={this.isPauseDisabled()}\n      />\n    );\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber}\n        isCustomer={this.props.isCustomer}\n      />\n    );\n    const displayRightContent =\n      this.state.showRightBar || this.state.fullScreen;\n    const rightBar = (\n      <Grid.Column\n        width={displayRightContent ? 4 : 1}\n        style={{ display: 'flex', flexDirection: 'column' }}\n        className={`${\n          this.state.fullScreen\n            ? 'fullHeightColumnFullscreen'\n            : 'fullHeightColumn'\n        }`}\n      >\n        <Input\n          inverted\n          fluid\n          label={'My name is:'}\n          value={this.state.myName}\n          onChange={this.updateName}\n          style={{ visibility: displayRightContent ? '' : 'hidden' }}\n          icon={\n            <Icon\n              onClick={() => this.updateName(null, { value: generateName() })}\n              name=\"refresh\"\n              inverted\n              circular\n              link\n            />\n          }\n        />\n        {\n          <Menu\n            inverted\n            widths={3}\n            style={{\n              marginTop: '4px',\n              marginBottom: '4px',\n              visibility: displayRightContent ? '' : 'hidden',\n            }}\n          >\n            <Menu.Item\n              name=\"chat\"\n              active={this.state.currentTab === 'chat'}\n              onClick={() => {\n                this.setState({ currentTab: 'chat', unreadCount: 0 });\n              }}\n              as=\"a\"\n            >\n              Chat\n              {this.state.unreadCount > 0 && (\n                <Label circular color=\"red\">\n                  {this.state.unreadCount}\n                </Label>\n              )}\n            </Menu.Item>\n            <Menu.Item\n              name=\"people\"\n              active={this.state.currentTab === 'people'}\n              onClick={() => this.setState({ currentTab: 'people' })}\n              as=\"a\"\n            >\n              People\n              <Label\n                circular\n                color={\n                  getColorForString(\n                    this.state.participants.length.toString()\n                  ) as SemanticCOLORS\n                }\n              >\n                {this.state.participants.length}\n              </Label>\n            </Menu.Item>\n            <Menu.Item\n              name=\"settings\"\n              active={this.state.currentTab === 'settings'}\n              onClick={() => this.setState({ currentTab: 'settings' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"setting\" /> */}\n              Settings\n            </Menu.Item>\n          </Menu>\n        }\n        <Chat\n          chat={this.state.chat}\n          nameMap={this.state.nameMap}\n          pictureMap={this.state.pictureMap}\n          socket={this.socket}\n          scrollTimestamp={this.state.scrollTimestamp}\n          getMediaDisplayName={this.getMediaDisplayName}\n          hide={this.state.currentTab !== 'chat' || !displayRightContent}\n          isChatDisabled={this.state.isChatDisabled}\n          owner={this.state.owner}\n          user={this.props.user}\n        />\n        {this.state.state === 'connected' && (\n          <VideoChat\n            socket={this.socket}\n            participants={this.state.participants}\n            nameMap={this.state.nameMap}\n            pictureMap={this.state.pictureMap}\n            tsMap={this.state.tsMap}\n            rosterUpdateTS={this.state.rosterUpdateTS}\n            hide={this.state.currentTab !== 'people' || !displayRightContent}\n            owner={this.state.owner}\n            user={this.props.user}\n          />\n        )}\n        <SettingsTab\n          hide={this.state.currentTab !== 'settings' || !displayRightContent}\n          user={this.props.user}\n          roomLock={this.state.roomLock}\n          setRoomLock={this.setRoomLock}\n          socket={this.socket}\n          isSubscriber={this.props.isSubscriber}\n          roomId={this.state.roomId}\n          isChatDisabled={this.state.isChatDisabled}\n          setIsChatDisabled={this.setIsChatDisabled}\n          owner={this.state.owner}\n          setOwner={this.setOwner}\n          vanity={this.state.vanity}\n          setVanity={this.setVanity}\n          roomLink={this.state.roomLink}\n          password={this.state.password}\n          setPassword={this.setPassword}\n          clearChat={this.clearChat}\n        />\n      </Grid.Column>\n    );\n    return (\n      <React.Fragment>\n        {!this.state.isAutoPlayable && (\n          <Modal inverted basic open>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <Button\n                primary\n                size=\"large\"\n                onClick={() => {\n                  this.setState({ isAutoPlayable: true });\n                  this.setMute(false);\n                  this.setVolume(1);\n                }}\n                icon\n                labelPosition=\"left\"\n              >\n                <Icon name=\"volume up\" />\n                Click to unmute\n              </Button>\n            </div>\n          </Modal>\n        )}\n        {this.state.multiStreamSelection && (\n          <MultiStreamModal\n            streams={this.state.multiStreamSelection}\n            setMedia={this.setMedia}\n            resetMultiSelect={this.resetMultiSelect}\n          />\n        )}\n        {this.state.isVBrowserModalOpen && (\n          <VBrowserModal\n            isSubscriber={this.props.isSubscriber}\n            subscribeButton={subscribeButton}\n            closeModal={() => this.setState({ isVBrowserModalOpen: false })}\n            startVBrowser={this.startVBrowser}\n            user={this.props.user}\n            beta={this.state.settings.beta}\n          />\n        )}\n        {this.state.isScreenShareModalOpen && (\n          <ScreenShareModal\n            closeModal={() => this.setState({ isScreenShareModalOpen: false })}\n            startScreenShare={this.setupScreenShare}\n          />\n        )}\n        {this.state.isFileShareModalOpen && (\n          <FileShareModal\n            closeModal={() => this.setState({ isFileShareModalOpen: false })}\n            startFileShare={this.setupFileShare}\n          />\n        )}\n        {this.state.isSubtitleModalOpen && (\n          <SubtitleModal\n            closeModal={() => this.setState({ isSubtitleModalOpen: false })}\n            socket={this.socket}\n            currentSubtitle={this.state.currentSubtitle}\n            src={this.state.currentMedia}\n            haveLock={this.haveLock}\n          />\n        )}\n        {this.state.error && <ErrorModal error={this.state.error} />}\n        {this.state.isErrorAuth && (\n          <PasswordModal\n            savedPasswords={this.state.savedPasswords}\n            roomId={this.state.roomId}\n          />\n        )}\n        {this.state.errorMessage && (\n          <Message\n            negative\n            header=\"Error\"\n            content={this.state.errorMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        {this.state.successMessage && (\n          <Message\n            positive\n            header=\"Success\"\n            content={this.state.successMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        <TopBar\n          user={this.props.user}\n          isCustomer={this.props.isCustomer}\n          isSubscriber={this.props.isSubscriber}\n        />\n        {\n          <Grid stackable celled=\"internally\">\n            <Grid.Row id=\"theaterContainer\">\n              <Grid.Column\n                width={this.state.showRightBar ? 12 : 15}\n                className={\n                  this.state.fullScreen\n                    ? 'fullHeightColumnFullscreen'\n                    : 'fullHeightColumn'\n                }\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                  }}\n                >\n                  {!this.state.fullScreen && (\n                    <React.Fragment>\n                      <ComboBox\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        playlistDelete={this.playlistDelete}\n                        playlistMove={this.playlistMove}\n                        currentMedia={this.state.currentMedia}\n                        getMediaDisplayName={this.getMediaDisplayName}\n                        launchMultiSelect={this.launchMultiSelect}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                        playlist={this.state.playlist}\n                      />\n                      <Separator />\n                      <div\n                        className=\"mobileStack\"\n                        style={{ display: 'flex', gap: '4px' }}\n                      >\n                        {this.screenShareStream && (\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            icon\n                            labelPosition=\"left\"\n                            color=\"red\"\n                            onClick={this.stopScreenShare}\n                            disabled={sharer?.id !== this.socket?.id}\n                          >\n                            <Icon name=\"cancel\" />\n                            Stop Share\n                          </Button>\n                        )}\n                        {!this.screenShareStream &&\n                          !sharer &&\n                          !this.isVBrowser() && (\n                            <Popup\n                              content={`Share a tab or an application. Make sure to check \"Share audio\" for best results.`}\n                              trigger={\n                                <Button\n                                  fluid\n                                  className=\"toolButton\"\n                                  disabled={!this.haveLock()}\n                                  icon\n                                  labelPosition=\"left\"\n                                  color={'instagram'}\n                                  onClick={() => {\n                                    this.setState({\n                                      isScreenShareModalOpen: true,\n                                    });\n                                  }}\n                                >\n                                  <Icon name={'slideshare'} />\n                                  Screenshare\n                                </Button>\n                              }\n                            />\n                          )}\n                        {!this.screenShareStream &&\n                          !sharer &&\n                          !this.isVBrowser() && (\n                            <Popup\n                              content=\"Launch a shared virtual browser\"\n                              trigger={\n                                <Button\n                                  fluid\n                                  className=\"toolButton\"\n                                  disabled={!this.haveLock()}\n                                  icon\n                                  labelPosition=\"left\"\n                                  color=\"green\"\n                                  onClick={() => {\n                                    this.setState({\n                                      isVBrowserModalOpen: true,\n                                    });\n                                  }}\n                                >\n                                  <Icon name=\"desktop\" />\n                                  VBrowser\n                                </Button>\n                              }\n                            />\n                          )}\n                        {this.isVBrowser() && (\n                          <Popup\n                            content=\"Choose the person controlling the VBrowser\"\n                            trigger={\n                              <Dropdown\n                                icon=\"keyboard\"\n                                labeled\n                                className=\"icon\"\n                                style={{ height: '36px' }}\n                                button\n                                value={this.state.controller}\n                                placeholder=\"No controller\"\n                                clearable\n                                onChange={this.changeController}\n                                selection\n                                disabled={!this.haveLock()}\n                                options={this.state.participants.map((p) => ({\n                                  text: this.state.nameMap[p.id] || p.id,\n                                  value: p.id,\n                                }))}\n                              ></Dropdown>\n                            }\n                          />\n                        )}\n                        {this.isVBrowser() && (\n                          <Dropdown\n                            icon=\"desktop\"\n                            labeled\n                            className=\"icon\"\n                            style={{ height: '36px' }}\n                            button\n                            disabled={!this.haveLock()}\n                            value={this.state.vBrowserResolution}\n                            onChange={(_e, data) =>\n                              this.setState({\n                                vBrowserResolution: data.value as string,\n                              })\n                            }\n                            selection\n                            options={[\n                              {\n                                text: '1080p (WatchParty Plus)',\n                                value: '1920x1080@30',\n                                disabled: !this.state.isVBrowserLarge,\n                              },\n                              {\n                                text: '720p',\n                                value: '1280x720@30',\n                              },\n                              {\n                                text: '576p',\n                                value: '1024x576@60',\n                              },\n                              {\n                                text: '486p',\n                                value: '864x486@60',\n                              },\n                              {\n                                text: '360p',\n                                value: '640x360@60',\n                              },\n                            ]}\n                          ></Dropdown>\n                        )}\n                        {this.isVBrowser() && (\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            icon\n                            labelPosition=\"left\"\n                            color=\"red\"\n                            disabled={!this.haveLock()}\n                            onClick={this.stopVBrowser}\n                          >\n                            <Icon name=\"cancel\" />\n                            Stop VBrowser\n                          </Button>\n                        )}\n                        {!this.screenShareStream &&\n                          !sharer &&\n                          !this.isVBrowser() && (\n                            <Popup\n                              content=\"Stream your own video file\"\n                              trigger={\n                                <Button\n                                  fluid\n                                  className=\"toolButton\"\n                                  disabled={!this.haveLock()}\n                                  icon\n                                  labelPosition=\"left\"\n                                  onClick={() => {\n                                    this.setState({\n                                      isFileShareModalOpen: true,\n                                    });\n                                  }}\n                                >\n                                  <Icon name=\"file\" />\n                                  File\n                                </Button>\n                              }\n                            />\n                          )}\n                        {false && (\n                          <SearchComponent\n                            setMedia={this.setMedia}\n                            playlistAdd={this.playlistAdd}\n                            type={'youtube'}\n                            streamPath={this.state.settings.streamPath}\n                            mediaPath={this.state.settings.mediaPath}\n                            disabled={!this.haveLock()}\n                          />\n                        )}\n                        {Boolean(this.state.settings.mediaPath) && (\n                          <SearchComponent\n                            setMedia={this.setMedia}\n                            playlistAdd={this.playlistAdd}\n                            type={'media'}\n                            streamPath={this.state.settings.streamPath}\n                            mediaPath={this.state.settings.mediaPath}\n                            disabled={!this.haveLock()}\n                          />\n                        )}\n                        {Boolean(this.state.settings.streamPath) && (\n                          <SearchComponent\n                            setMedia={this.setMedia}\n                            playlistAdd={this.playlistAdd}\n                            type={'stream'}\n                            streamPath={this.state.settings.streamPath}\n                            mediaPath={this.state.settings.mediaPath}\n                            launchMultiSelect={this.launchMultiSelect}\n                            disabled={!this.haveLock()}\n                          />\n                        )}\n                      </div>\n                      <Separator />\n                    </React.Fragment>\n                  )}\n                  <div style={{ flexGrow: 1 }}>\n                    <div id=\"playerContainer\">\n                      {(this.state.loading ||\n                        !this.state.currentMedia ||\n                        this.state.nonPlayableMedia) && (\n                        <div\n                          id=\"loader\"\n                          className=\"videoContent\"\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          {this.state.loading && (\n                            <Dimmer active>\n                              <Loader>\n                                {this.isVBrowser()\n                                  ? 'Launching virtual browser. This can take up to a minute.'\n                                  : ''}\n                              </Loader>\n                            </Dimmer>\n                          )}\n                          {!this.state.loading && !this.state.currentMedia && (\n                            <Message\n                              color=\"yellow\"\n                              icon=\"hand point up\"\n                              header=\"You're not watching anything!\"\n                              content=\"Pick something to watch above.\"\n                            />\n                          )}\n                          {!this.state.loading &&\n                            this.state.nonPlayableMedia && (\n                              <Message\n                                color=\"red\"\n                                icon=\"frown\"\n                                header=\"It doesn't look like this is a media file!\"\n                                content=\"Maybe you meant to launch a VBrowser if you're trying to visit a web page?\"\n                              />\n                            )}\n                        </div>\n                      )}\n                      <iframe\n                        style={{\n                          display:\n                            this.isYouTube() && !this.state.loading\n                              ? 'block'\n                              : 'none',\n                        }}\n                        title=\"YouTube\"\n                        id=\"leftYt\"\n                        className=\"videoContent\"\n                        allowFullScreen\n                        frameBorder=\"0\"\n                        allow=\"autoplay\"\n                        src=\"https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0\"\n                      />\n                      {this.isVBrowser() &&\n                      this.getVBrowserPass() &&\n                      this.getVBrowserHost() ? (\n                        <VBrowser\n                          username={this.socket.id}\n                          password={this.getVBrowserPass()}\n                          hostname={this.getVBrowserHost()}\n                          controlling={this.state.controller === this.socket.id}\n                          setLoadingFalse={this.setLoadingFalse}\n                          resolution={this.state.vBrowserResolution}\n                          doPlay={this.doPlay}\n                          setResolution={(data: string) =>\n                            this.setState({ vBrowserResolution: data })\n                          }\n                        />\n                      ) : (\n                        <video\n                          style={{\n                            display:\n                              (this.isVideo() && !this.state.loading) ||\n                              this.state.fullScreen\n                                ? 'block'\n                                : 'none',\n                            width: '100%',\n                            maxHeight:\n                              'calc(100vh - 62px - 36px - 36px - 8px - 41px - 16px)',\n                          }}\n                          id=\"leftVideo\"\n                          onEnded={this.onVideoEnded}\n                          playsInline\n                        ></video>\n                      )}\n                    </div>\n                  </div>\n                  {this.state.currentMedia && controls}\n                  {Boolean(this.state.total) && (\n                    <div>\n                      <Progress\n                        size=\"tiny\"\n                        color=\"green\"\n                        inverted\n                        value={this.state.downloaded}\n                        total={this.state.total}\n                        // indicating\n                        label={\n                          Math.min(\n                            (this.state.downloaded / this.state.total) * 100,\n                            100\n                          ).toFixed(2) +\n                          '% - ' +\n                          formatSpeed(this.state.speed) +\n                          ' - ' +\n                          this.state.connections +\n                          ' connections'\n                        }\n                      ></Progress>\n                    </div>\n                  )}\n                </div>\n                <Button\n                  style={{\n                    position: 'absolute',\n                    top: '50%',\n                    right: 'calc(0% - 18px)',\n                    zIndex: 900,\n                  }}\n                  circular\n                  size=\"mini\"\n                  icon={this.state.showRightBar ? 'angle right' : 'angle left'}\n                  onClick={() =>\n                    this.setState({ showRightBar: !this.state.showRightBar })\n                  }\n                />\n              </Grid.Column>\n              {rightBar}\n            </Grid.Row>\n          </Grid>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport const Separator = () => <div style={{ height: '4px', flexShrink: 0 }} />;\n","import React from 'react';\nimport { Divider, Header, Icon, Step } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\n\nimport { NewRoomButton } from '../TopBar';\nimport styles from './Home.module.css';\n\nexport const Home = ({ user }: { user: firebase.User | undefined }) => {\n  return (\n    <div>\n      <div className={styles.container}>\n        <Hero\n          heroText={'Watch videos in-sync with friends far away.'}\n          subText={'No registration or download required.'}\n          action={\n            <div style={{ marginTop: '8px', width: '160px' }}>\n              <NewRoomButton user={user} />\n            </div>\n          }\n          image={'/screenshot4.png'}\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"film\" />\n            Multiple ways to watch\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"slideshare\"\n            title={`Screensharing`}\n            text=\"Share a browser tab or an application.\"\n          />\n          <Feature\n            icon=\"desktop\"\n            title={`VBrowser`}\n            text=\"Launch a virtual browser in the cloud that all room members can view and control. No need to worry about slow upload speeds!\"\n          />\n          <Feature\n            icon=\"file\"\n            title={`File`}\n            text=\"Upload and stream your own file.\"\n          />\n          <Feature\n            icon=\"linkify\"\n            title={`URL`}\n            text=\"Paste in a URL for everyone to watch from.\"\n          />\n          <Feature\n            icon=\"youtube\"\n            title={`YouTube`}\n            text=\"Watch videos in-sync from YouTube.\"\n          />\n        </div>\n        <Hero\n          heroText={'React to moments together.'}\n          subText={\"Find moments of shared joy even when you're apart.\"}\n          image={'/screenshot18.png'}\n          color=\"green\"\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"cogs\" />\n            Features\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"sync\"\n            title=\"Synchronized\"\n            text=\"Starts, stops, and seeks are synchronized to everyone, so take those restroom and snack breaks without worrying about falling behind.\"\n          />\n          <Feature\n            icon=\"conversation\"\n            title=\"Chat\"\n            text=\"Chat with others in your room. Memes and inside jokes encouraged.\"\n          />\n          <Feature\n            icon=\"video\"\n            title=\"Video chat\"\n            text=\"Jump into video chat if there's something that you just can't express with text.\"\n          />\n        </div>\n        <Hero\n          heroText={'Theater mode.'}\n          subText={\n            'Bring video and chat front-and-center for minimal distractions.'\n          }\n          image={'/screenshot14.png'}\n        />\n        <Divider horizontal />\n        <div\n          style={{\n            padding: '30px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <div className={styles.heroText}>Get started!</div>\n          <div className={styles.featureSection}>\n            <Step.Group style={{ margin: '8px' }}>\n              <Step>\n                <Icon name=\"certificate\" />\n                <Step.Content>\n                  <Step.Title>1.</Step.Title>\n                  <Step.Description>Make a room</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"group\" />\n                <Step.Content>\n                  <Step.Title>2.</Step.Title>\n                  <Step.Description>Share link with friends</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"film\" />\n                <Step.Content>\n                  <Step.Title>3.</Step.Title>\n                  <Step.Description>Pick something to watch</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"thumbs up outline\" />\n                <Step.Content>\n                  <Step.Title>4.</Step.Title>\n                  <Step.Description>Success!</Step.Description>\n                </Step.Content>\n              </Step>\n            </Step.Group>\n          </div>\n          <div style={{ width: '160px' }}>\n            <NewRoomButton user={user} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Feature = ({\n  icon,\n  text,\n  title,\n}: {\n  icon: string;\n  text: string;\n  title: string;\n}) => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: '1 1 0px',\n        flexDirection: 'column',\n        alignItems: 'center',\n        padding: '10px',\n        minWidth: '180px',\n      }}\n    >\n      <Icon fitted size=\"huge\" name={icon as any} />\n      <h4 className={styles.featureTitle}>{title}</h4>\n      <div className={styles.featureText}>{text}</div>\n    </div>\n  );\n};\n\nconst Hero = ({\n  heroText,\n  subText,\n  action,\n  image,\n  color,\n}: {\n  heroText?: string;\n  subText?: string;\n  action?: React.ReactNode;\n  image?: string;\n  color?: string;\n}) => {\n  return (\n    <div className={`${styles.hero} ${color === 'green' ? styles.green : ''}`}>\n      <div className={styles.heroInner}>\n        <div style={{ padding: '30px', flex: '1 1 0' }}>\n          <div className={styles.heroText}>{heroText}</div>\n          <div className={styles.subText}>{subText}</div>\n          {action}\n        </div>\n        <div\n          style={{\n            flex: '1 1 0',\n          }}\n        >\n          <img\n            alt=\"hero\"\n            style={{ width: '100%', borderRadius: '10px' }}\n            src={image}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nconst mdStyle = { color: 'white', margin: '50px', maxWidth: '800px' };\n\nexport const Privacy = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nPrivacy Policy\n====\n\nRooms\n----\n- By default, rooms are temporary and expire after one day of inactivity.\n- Users have the option of making a room permanent, which can be undone at any time.\n- We do not keep logs of the content that users watch.\n\nPersonal Information\n----\n- You are not required to register to use the service, but you have the option to sign in with an email or authentication provider, which will be used to display your name and picture in the rooms you join.\n- If you provide this information, we may use it to contact you regarding your use of the service, or to link your account to a subscription.\n- We do not sell personal information to third parties.\n- You have the right to request deletion of your user data, in accordance with various laws governing data protection. Please contact support@watchparty.me to request user data deletion.\n- Payment information is handled by providers such as Stripe. We do not collect or access financial information directly.\n\nCookies\n----\n- We use services such as Google Analytics to measure usage. These services may set cookies or other information locally on your device.\n\nVirtual Browsers\n----\n- Virtual machines are recycled after each session ends and any data on them is destroyed.\n- Your commands are encrypted while in-transit to the virtual machine.\n\nYouTube\n----\n- The service provides the ability to search and play YouTube videos. Google/YouTube may use data provided to the search service in accordance with the [Google Privacy Policy](https://policies.google.com/privacy).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const Terms = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nTerms of Service\n====\nBy using this service you agree to the following terms:\n- You are over 13 years of age\n- Your use of the service may be terminated if you are found to be sharing illegal or infringing content\n- The service provides no guarantee of uptime or availability\n- You use the service at your own risk of encountering objectionable content, as we do not actively moderate rooms unless content is found to be illegal or infringing\n\nSubscriptions\n----\n- If you are dissatisfied with the service for any reason or believe you have been charged in error, please contact support@watchparty.me.\n- We will provide a full refund of the most recent payment, no questions asked.\n\nYouTube\n----\nThe service provides the ability to search and play YouTube videos. By using the YouTube search you agree to the [YouTube Terms of Service](https://www.youtube.com/t/terms).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const FAQ = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nFAQ\n====\nWhat's a VBrowser?\n----\nA virtual browser (VBrowser) is a browser running in the cloud that a room's members can connect to. Everyone in the room sees the same thing, so it's a great way to watch videos or collaborate on tasks together.\n\nWhy did my VBrowser session stop?\n----\nVBrowsers will terminate automatically if no one is in the room for a while.\nVBrowser sessions are also limited to a maximum of 3 hours for free users, and 24 hours for subscribers.\n\nDoes everyone in the room need to be a subscriber to get the benefits?\n----\nNo, only the person who created the VBrowser needs to be.\n\nHow do I access sites that have a \"not available\" message in the VBrowser?\n----\nSome sites may block traffic that's detected as coming from certain geographic regions. You may need to install an extension like Hola VPN inside the virtual browser.\n\nHow come I'm not getting any audio when screensharing?\n----\nTo share audio, you must be using Chrome or Edge, sharing a tab (not application), and check a small checkbox at the bottom-left of the share screen dialog.\n\nIs there a limit to how many people can be in a room?\n----\nCurrently there isn't a hard limit, although the service hasn't been tested with more than 15 people or so. Screensharing and filesharing rely on one person uploading to everyone else, so it may not work well with large room sizes.\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const Footer = () => (\n  <div style={{ margin: '1em', fontSize: '14px', color: 'white' }}>\n    <Link style={{ color: 'white' }} to=\"/terms\">\n      Terms\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/privacy\">\n      Privacy\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/faq\">\n      FAQ\n    </Link>\n  </div>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import './index.css';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport App from './components/App';\nimport { Home } from './components/Home';\nimport { Privacy, Terms, FAQ } from './components/PrivacyTerms/PrivacyTerms';\nimport { TopBar } from './components/TopBar/TopBar';\nimport { Footer } from './components/Footer/Footer';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/auth';\nimport { serverPath } from './utils';\n\nconst Debug = lazy(() => import('./components/Debug/Debug'));\n\nconst firebaseConfig = process.env.REACT_APP_FIREBASE_CONFIG;\nif (firebaseConfig) {\n  firebase.initializeApp(JSON.parse(firebaseConfig));\n}\n\nclass WatchParty extends React.Component {\n  public state = {\n    user: undefined as firebase.User | undefined,\n    isSubscriber: false,\n    isCustomer: false,\n  };\n  async componentDidMount() {\n    if (firebaseConfig) {\n      firebase.auth().onAuthStateChanged(async (user: firebase.User | null) => {\n        if (user) {\n          // console.log(user);\n          this.setState({ user });\n          const token = await user.getIdToken();\n          const response = await window.fetch(\n            serverPath + `/metadata?uid=${user.uid}&token=${token}`\n          );\n          const data = await response.json();\n          this.setState({\n            isSubscriber: data.isSubscriber,\n            isCustomer: data.isCustomer,\n          });\n        }\n      });\n    }\n  }\n  render() {\n    return (\n      <React.StrictMode>\n        <BrowserRouter>\n          <Route\n            path=\"/\"\n            exact\n            render={(props) => {\n              if (props.location?.hash) {\n                return (\n                  <App\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                  />\n                );\n              }\n              return (\n                <React.Fragment>\n                  <TopBar\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                    hideNewRoom\n                  />\n                  <Home user={this.state.user} />\n                  <Footer />\n                </React.Fragment>\n              );\n            }}\n          />\n          <Route\n            path=\"/r/:vanity\"\n            exact\n            render={(props) => {\n              return (\n                <App\n                  user={this.state.user}\n                  isSubscriber={this.state.isSubscriber}\n                  isCustomer={this.state.isCustomer}\n                  vanity={props.match.params.vanity}\n                />\n              );\n            }}\n          />\n          <Route path=\"/terms\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Terms />\n            <Footer />\n          </Route>\n          <Route path=\"/privacy\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Privacy />\n            <Footer />\n          </Route>\n          <Route path=\"/faq\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <FAQ />\n            <Footer />\n          </Route>\n          <Route path=\"/debug\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Suspense fallback={null}>\n              <Debug />\n            </Suspense>\n            <Footer />\n          </Route>\n        </BrowserRouter>\n      </React.StrictMode>\n    );\n  }\n}\nReactDOM.render(<WatchParty />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__1ukFy\",\"hero\":\"Home_hero__1zBE5\",\"green\":\"Home_green__3PMJt\",\"heroInner\":\"Home_heroInner__3w7l9\",\"heroText\":\"Home_heroText__21xIv\",\"subText\":\"Home_subText__363Kx\",\"featureSection\":\"Home_featureSection__1E5B_\",\"featureTitle\":\"Home_featureTitle__37GMX\",\"featureText\":\"Home_featureText__2VOwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"ChatVideoCard_Card__38w-I\",\"Wrapper\":\"ChatVideoCard_Wrapper__3cH2f\",\"ThumbnailWrapper\":\"ChatVideoCard_ThumbnailWrapper__hBV8X\",\"Thumbnail\":\"ChatVideoCard_Thumbnail__1J61h\",\"Content\":\"ChatVideoCard_Content__1q2Wx\",\"Title\":\"ChatVideoCard_Title__2XtVu\",\"ChannelName\":\"ChatVideoCard_ChannelName__3RX-r\",\"DurationLabel\":\"ChatVideoCard_DurationLabel__2dPHz\",\"Controls\":\"ChatVideoCard_Controls__3AJAK\"};"],"sourceRoot":""}